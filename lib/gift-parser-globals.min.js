!function(r){"use strict";function ne(r,t,n,e){this.message=r,this.expected=t,this.found=n,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,ne)}function t(){this.constructor=n}var n,e;n=ne,e=Error,t.prototype=e.prototype,n.prototype=new t,ne.buildMessage=function(r,t){var n,c={literal:function(r){return'"'+u(r.text)+'"'},class:function(r){for(var t="",n=0;n<r.parts.length;n++)t+=r.parts[n]instanceof Array?o(r.parts[n][0])+"-"+o(r.parts[n][1]):o(r.parts[n]);return"["+(r.inverted?"^":"")+t+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function e(r){return r.charCodeAt(0).toString(16).toUpperCase()}function u(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+e(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+e(r)})}function o(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+e(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+e(r)})}return"Expected "+function(r){for(var t,n,e=new Array(r.length),u=0;u<r.length;u++)e[u]=(n=r[u],c[n.type](n));if(e.sort(),0<e.length){for(t=u=1;u<e.length;u++)e[u-1]!==e[u]&&(e[t]=e[u],t++);e.length=t}switch(e.length){case 1:return e[0];case 2:return e[0]+" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}(r)+" but "+((n=t)?'"'+u(n)+'"':"end of input")+" found."},r.giftParser={SyntaxError:ne,parse:function(l,r){var s={},t={GIFTQuestions:mn},n=mn,e=function(r){return r},u=pn("Category"),c="$",o=fn("$",!1),a="CATEGORY:",i=fn("CATEGORY:",!1),f=function(r){return{type:"Category",title:r}},h=pn("Description"),p=function(r,t){t={id:Vn,tags:Wn,type:"Description",title:r,stem:t,hasEmbeddedAnswers:!1};return te(),Wn=Vn=null,t},d="{",A=fn("{",!1),v="}",g=fn("}",!1),m=function(r,t,n,e){var u=null!==e,c=t?t.text+(u?" ":""):"",t=t&&t.format||e&&e.format||"moodle",e=c+(u?"_____ "+e.text:""),u=function(r,t){switch(r.globalFeedback=t.globalFeedback,r.type){case"TF":r.isTrue=t.isTrue,r.incorrectFeedback=t.feedback[1],r.correctFeedback=t.feedback[2];break;case"MC":case"Numerical":case"Short":r.choices=t.choices;break;case"Matching":r.matchPairs=t.matchPairs}"MC"==r.type&&function(r){for(var t=!0,n=0;n<r.length;n++)t&=r[n].isCorrect;return t}(r.choices)&&(r.type="Short");return r.id=Vn,r.tags=Wn,r}(u={type:n.type,title:r,stem:{format:t,text:e},hasEmbeddedAnswers:u},n);return te(),u},b=pn("{= match1 -> Match1\n...}"),C=function(r,t){return{type:"Matching",matchPairs:r,globalFeedback:t}},x=pn("matches"),y=function(r){return r},F=pn("match"),w="=",k=fn("=",!1),E="->",T=fn("->",!1),S=function(r,t){return{subquestion:{format:null!==r?r.format:Zn,text:null!==r?r.text:""},subanswer:t}},j=pn("{T} or {F} or {TRUE} or {FALSE}"),M=function(r,t,n){return{type:"TF",isTrue:r,feedback:t,globalFeedback:n}},R=function(r){return r},N="TRUE",_=fn("TRUE",!1),L="T",P=fn("T",!1),U=function(){return!0},q="FALSE",G=fn("FALSE",!1),O="F",D=fn("F",!1),Q=function(){return!1},Y=pn("{=correct choice ~incorrect choice ... }"),$=function(r,t){return{type:"MC",choices:r,globalFeedback:t}},H=pn("Choices"),I=function(r){return r},z=pn("Choice"),B=/^[=~]/,J=hn(["=","~"],!1,!1),K=function(r,t){var n=r[2],e=r[4];return r={isCorrect:"="==r[0],weight:n,text:e,feedback:t}},V=pn("(weight)"),W="%",X=fn("%",!1),Z=/^[\-]/,rr=hn(["-"],!1,!1),tr=function(r){return parseFloat(r.join(""))},nr=pn("(percent)"),er="100",ur=fn("100",!1),cr=/^[0-9]/,or=hn([["0","9"]],!1,!1),ar=/^[.]/,ir=hn(["."],!1,!1),lr=sn,sr=pn("(feedback)"),fr="#",hr=fn("#",!1),pr="###",dr=fn("###",!1),Ar=function(r){return r},vr=pn("Essay question { ... }"),gr="",mr=function(r){return{type:"Essay",globalFeedback:r}},br=pn("Single short answer { ... }"),Cr=function(r,t,n){var e=[];return e.push({isCorrect:!0,text:r,feedback:t,weight:null}),{type:"Short",choices:e,globalFeedback:n}},xr=pn("{#... }"),yr=function(r,t){return{type:"Numerical",choices:r,globalFeedback:t}},Fr=pn("Numerical Answers"),wr=pn("Multiple Numerical Choices"),kr=pn("Numerical Choice"),Er=function(r,t){var n=r[0],e=r[1],u=r[2];return r={isCorrect:"="==n,weight:e,text:null!==u?u:{format:Zn,text:"*"},feedback:t}},Tr=pn("Single numeric answer"),Sr=pn("(number with range)"),jr=":",Mr=fn(":",!1),Rr=function(r,t){return{type:"range",number:r,range:t}},Nr=pn("(number with high-low)"),_r="..",Lr=fn("..",!1),Pr=function(r,t){return{type:"high-low",numberHigh:t,numberLow:r}},Ur=pn("(number answer)"),qr=function(r){return{type:"simple",number:r}},Gr=pn(":: Title ::"),Or="::",Dr=fn("::",!1),Qr=function(r){return r.join("")},Yr=pn("Question stem"),$r=function(r){var t;return t=r.format,Zn=t,r},Hr=pn("(blank lines separator)"),Ir=pn("(blank lines)"),zr=pn("blank line"),Br=pn("(Title text)"),Jr=function(r){return r},Kr=pn("(text character)"),Vr=pn("format"),Wr="[",Xr=fn("[",!1),Zr="html",rt=fn("html",!1),tt="markdown",nt=fn("markdown",!1),et="plain",ut=fn("plain",!1),ct="moodle",ot=fn("moodle",!1),at="]",it=fn("]",!1),lt=function(r){return r},st=pn("(escape character)"),ft="\\",ht=fn("\\",!1),pt=pn("escape sequence"),dt="~",At=fn("~",!1),vt=function(r){return r},gt=pn(""),mt={type:"any"},bt=sn,Ct=pn("(formatted text excluding '->'"),xt=function(r,t){return{format:null!==r?r:Zn,text:"html"!==r?re(t.join("").trim()):t.join("").replace(/\r\n/g,"\n")}},yt=pn("(formatted text)"),Ft=pn("(unformatted text)"),wt=function(r){return re(r.join("").trim())},kt=pn("(category text)"),Et=function(r){return r.flat().join("")},Tt=function(r,t){return parseFloat(r.join("")+t)},St=".",jt=fn(".",!1),Mt=function(r){return"."+r.join("")},Rt="####",Nt=fn("####",!1),_t=function(r){return r},Lt=pn("(single line whitespace)"),Pt=pn("(multiple line whitespace)"),Ut=" ",qt=fn(" ",!1),Gt=function(){Wn=Vn=null},Ot=pn("(comment)"),Dt="//",Qt=fn("//",!1),Yt=/^[^\n\r]/,$t=hn(["\n","\r"],!0,!1),Ht=function(r){return null},It=function(r){var t=r.join(""),r=t.match(/\[id:([^\x00-\x1F\x7F]+?)]/);r&&(Vn=r[1].trim().replace("\\]","]"));t.matchAll(/\[tag:([^\x00-\x1F\x7F]+?)]/g);return Array.from(t.matchAll(/\[tag:([^\x00-\x1F\x7F]+?)]/g),function(r){return r[1]}).forEach(function(r){(Wn=Wn||[]).push(r)}),null},zt=pn("(space)"),Bt="\t",Jt=fn("\t",!1),Kt=pn("(end of line)"),Vt="\r\n",Wt=fn("\r\n",!1),Xt="\n",Zt=fn("\n",!1),rn="\r",tn=fn("\r",!1),nn=function(){return"EOF"},en=0,un=0,cn=[{line:1,column:1}],on=0,an=[],ln=0;if("startRule"in(r=void 0!==r?r:{})){if(!(r.startRule in t))throw new Error("Can't start parsing from rule \""+r.startRule+'".');n=t[r.startRule]}function sn(){return l.substring(un,en)}function fn(r,t){return{type:"literal",text:r,ignoreCase:t}}function hn(r,t,n){return{type:"class",parts:r,inverted:t,ignoreCase:n}}function pn(r){return{type:"other",description:r}}function dn(r){var t,n=cn[r];if(n)return n;for(t=r-1;!cn[t];)t--;for(n={line:(n=cn[t]).line,column:n.column};t<r;)10===l.charCodeAt(t)?(n.line++,n.column=1):n.column++,t++;return cn[r]=n}function An(r,t){var n=dn(r),e=dn(t);return{start:{offset:r,line:n.line,column:n.column},end:{offset:t,line:e.line,column:e.column}}}function vn(r){en<on||(on<en&&(on=en,an=[]),an.push(r))}function gn(r,t,n){return new ne(ne.buildMessage(r,t),r,t,n)}function mn(){var r=en,t=[],n=bn();if((n=n===s&&(n=Cn())===s?xn():n)!==s)for(;n!==s;)t.push(n),(n=bn())===s&&(n=Cn())===s&&(n=xn());else t=s;return r=t!==s&&(n=$n())!==s&&Hn()!==s?(un=r,t=e(t)):(en=r,s)}function bn(){var r,t,n,e;return ln++,r=en,r=In()!==s&&Hn()!==s?(36===l.charCodeAt(en)?(t=c,en++):(t=s,0===ln&&vn(o)),t!==s?(l.substr(en,9)===a?(n=a,en+=9):(n=s,0===ln&&vn(i)),n!==s&&$n()!==s&&(e=function(){var r,t,n,e,u;ln++,t=[],e=n=r=en,ln++,u=Jn(),ln--,e=u===s?void 0:(en=e,s);n=e!==s?(l.length>en?(u=l.charAt(en),en++):(u=s,0===ln&&vn(mt)),u!==s?e=[e,u]:(en=n,s)):(en=n,s);for(;n!==s;)t.push(n),e=n=en,ln++,u=Jn(),ln--,e=u===s?void 0:(en=e,s),n=e!==s?(l.length>en?(u=l.charAt(en),en++):(u=s,0===ln&&vn(mt)),u!==s?e=[e,u]:(en=n,s)):(en=n,s);r=t!==s?(n=en,ln++,(e=Jn())===s&&(e=Kn()),ln--,n=e!==s?void(en=n):s,n!==s?(un=r,t=Et(t)):(en=r,s)):(en=r,s);ln--,r===s&&(t=s,0===ln&&vn(kt));return r}())!==s&&Mn()!==s?(un=r,f(e)):(en=r,s)):(en=r,s)):(en=r,s),ln--,r===s&&(0===ln&&vn(u)),r}function Cn(){var r,t,n,e;if(ln++,r=en,In()!==s)if(Hn()!==s){for(t=[],n=zn();n!==s;)t.push(n),n=zn();r=t!==s&&(n=(n=Sn())===s?null:n)!==s&&$n()!==s&&(e=jn())!==s&&Mn()!==s?(un=r,p(n,e)):(en=r,s)}else en=r,r=s;else en=r,r=s;return ln--,r===s&&(0===ln&&vn(h)),r}function xn(){var r,t,n,e,u,c,o,a=en,i=In();if(i!==s)if(Hn()!==s){for(r=[],t=zn();t!==s;)r.push(t),t=zn();a=r!==s&&(t=(t=Sn())===s?null:t)!==s&&$n()!==s&&(n=(n=jn())===s?null:n)!==s&&$n()!==s?(123===l.charCodeAt(en)?(e=d,en++):(e=s,0===ln&&vn(A)),e!==s&&$n()!==s&&(u=(u=function(){var r,t,n;ln++,r=en,r=(t=function(){var r,t,n;if(ln++,r=en,t=[],(n=yn())!==s)for(;n!==s;)t.push(n),n=yn();else t=s;t!==s&&(un=r,t=y(t));ln--,(r=t)===s&&(t=s,0===ln&&vn(x));return r}())!==s?(n=$n(),n!==s?(n=(n=Yn())===s?null:n)!==s?$n()!==s?(un=r,t=C(t,n)):(en=r,s):(en=r,s):(en=r,s)):(en=r,s);ln--,r===s&&(t=s,0===ln&&vn(b));return r}())===s&&(u=function(){var r,t,n,e,u,c;ln++,r=en,r=(t=function(){var r,t;r=en,(t=function(){var r,t;r=en,l.substr(en,4)===N?(t=N,en+=4):(t=s,0===ln&&vn(_));t===s&&(84===l.charCodeAt(en)?(t=L,en++):(t=s,0===ln&&vn(P)));t!==s&&(un=r,t=U());return r=t}())===s&&(t=function(){var r,t;r=en,l.substr(en,5)===q?(t=q,en+=5):(t=s,0===ln&&vn(G));t===s&&(70===l.charCodeAt(en)?(t=O,en++):(t=s,0===ln&&vn(D)));t!==s&&(un=r,t=Q());return r=t}());t!==s&&(un=r,t=R(t));return r=t}())!==s?(c=$n(),c!==s?(n=en,e=$n(),(n=e!==s?(u=(u=kn())===s?null:u)!==s?(c=(c=kn())===s?null:c)!==s?e=[e,u,c]:(en=n,s):(en=n,s):(en=n,s))!==s?(e=$n())!==s?(u=(u=Yn())===s?null:u)!==s?(un=r,t=M(t,n,u)):(en=r,s):(en=r,s):(en=r,s)):(en=r,s)):(en=r,s);ln--,r===s&&(t=s,0===ln&&vn(j));return r}())===s&&(u=function(){var r,t,n;ln++,r=en,r=(t=function(){var r,t,n;if(ln++,r=en,t=[],(n=Fn())!==s)for(;n!==s;)t.push(n),n=Fn();else t=s;t!==s&&(un=r,t=I(t));ln--,(r=t)===s&&(t=s,0===ln&&vn(H));return r}())!==s?(n=$n(),n!==s?(n=(n=Yn())===s?null:n)!==s?$n()!==s?(un=r,t=$(t,n)):(en=r,s):(en=r,s):(en=r,s)):(en=r,s);ln--,r===s&&(t=s,0===ln&&vn(Y));return r}())===s&&(u=function(){var r,t,n,e;ln++,r=en,35===l.charCodeAt(en)?(t=fr,en++):(t=s,0===ln&&vn(hr));r=t!==s?(e=$n(),e!==s?(n=function(){var r;ln++,(r=function(){var r,t,n;if(ln++,r=en,t=[],(n=En())!==s)for(;n!==s;)t.push(n),n=En();else t=s;t!==s&&(un=r,t=I(t));ln--,(r=t)===s&&(t=s,0===ln&&vn(wr));return r}())===s&&(r=Tn());ln--,r===s&&(0===ln&&vn(Fr));return r}())!==s?$n()!==s?(e=(e=Yn())===s?null:e)!==s?(un=r,t=yr(n,e)):(en=r,s):(en=r,s):(en=r,s):(en=r,s)):(en=r,s);ln--,r===s&&(t=s,0===ln&&vn(xr));return r}())===s&&(u=function(){var r,t,n,e;ln++,r=en,r=(t=Dn())!==s?(e=$n(),e!==s?(n=(n=kn())===s?null:n)!==s?$n()!==s?(e=(e=Yn())===s?null:e)!==s?$n()!==s?(un=r,t=Cr(t,n,e)):(en=r,s):(en=r,s):(en=r,s):(en=r,s):(en=r,s)):(en=r,s);ln--,r===s&&(t=s,0===ln&&vn(br));return r}())===s?function(){var r,t;ln++,r=en,r=gr!==s?(t=$n(),t!==s?(t=(t=Yn())===s?null:t)!==s?$n()!==s?(un=r,mr(t)):(en=r,s):(en=r,s):(en=r,s)):(en=r,s);ln--,r===s&&(0===ln&&vn(vr));return r}():u)!==s&&$n()!==s?(125===l.charCodeAt(en)?(c=v,en++):(c=s,0===ln&&vn(g)),c!==s&&$n()!==s&&(o=(o=(o=function(){var r,t,n,e;ln++,r=en,l.substr(en,2)===Dt?(t=Dt,en+=2):(t=s,0===ln&&vn(Qt));if(t!==s){for(n=[],Yt.test(l.charAt(en))?(e=l.charAt(en),en++):(e=s,0===ln&&vn($t));e!==s;)n.push(e),Yt.test(l.charAt(en))?(e=l.charAt(en),en++):(e=s,0===ln&&vn($t));r=n!==s?(un=r,t=Ht(n)):(en=r,s)}else en=r,r=s;ln--,r===s&&(t=s,0===ln&&vn(Ot));return r}())===s?jn():o)===s?null:o)!==s&&Mn()!==s?(un=a,m(t,n,u,o)):(en=a,s)):(en=a,s)):(en=a,s)}else en=a,a=s;else en=a,a=s;return a}function yn(){var r,t,n,e,u;return ln++,r=en,r=$n()!==s?(61===l.charCodeAt(en)?(t=w,en++):(t=s,0===ln&&vn(k)),t!==s&&$n()!==s&&(n=(n=function(){var r,t,n,e;ln++,r=en,(t=Pn())===s&&(t=null);if(t!==s)if($n()!==s){if(n=[],(e=Ln())!==s)for(;e!==s;)n.push(e),e=Ln();else n=s;r=n!==s?(un=r,t=xt(t,n)):(en=r,s)}else en=r,r=s;else en=r,r=s;ln--,r===s&&(t=s,0===ln&&vn(Ct));return r}())===s?null:n)!==s&&$n()!==s?(l.substr(en,2)===E?(e=E,en+=2):(e=s,0===ln&&vn(T)),e!==s&&$n()!==s&&(u=function(){var r,t,n;if(ln++,r=en,t=[],(n=_n())!==s)for(;n!==s;)t.push(n),n=_n();else t=s;t!==s&&(un=r,t=wt(t));ln--,(r=t)===s&&(t=s,0===ln&&vn(Ft));return r}())!==s&&$n()!==s?(un=r,S(n,u)):(en=r,s)):(en=r,s)):(en=r,s),ln--,r===s&&(0===ln&&vn(F)),r}function Fn(){var r,t,n,e,u,c,o;return ln++,r=en,r=$n()!==s?(B.test(l.charAt(t=en))?(n=l.charAt(en),en++):(n=s,0===ln&&vn(J)),(t=n!==s&&(e=$n())!==s&&(u=(u=wn())===s?null:u)!==s&&(c=$n())!==s&&(o=Dn())!==s?n=[n,e,u,c,o]:(en=t,s))!==s&&(n=(n=kn())===s?null:n)!==s&&(e=$n())!==s?(un=r,K(t,n)):(en=r,s)):(en=r,s),ln--,r===s&&(0===ln&&vn(z)),r}function wn(){var r,t,n,e,u;return ln++,37===l.charCodeAt(r=en)?(t=W,en++):(t=s,0===ln&&vn(X)),r=t!==s?(Z.test(l.charAt(n=en))?(e=l.charAt(en),en++):(e=s,0===ln&&vn(rr)),(n=(e=e===s?null:e)!==s&&(u=function(){var r,t,n,e,u,c;ln++,l.substr(en,3)===er?(r=er,en+=3):(r=s,0===ln&&vn(ur));if(r===s)if(r=en,cr.test(l.charAt(en))?(t=l.charAt(en),en++):(t=s,0===ln&&vn(or)),t!==s)if(cr.test(l.charAt(en))?(n=l.charAt(en),en++):(n=s,0===ln&&vn(or)),(n=n===s?null:n)!==s)if(ar.test(l.charAt(en))?(e=l.charAt(en),en++):(e=s,0===ln&&vn(ir)),(e=e===s?null:e)!==s){for(u=[],cr.test(l.charAt(en))?(c=l.charAt(en),en++):(c=s,0===ln&&vn(or));c!==s;)u.push(c),cr.test(l.charAt(en))?(c=l.charAt(en),en++):(c=s,0===ln&&vn(or));r=u!==s?(un=r,t=lr()):(en=r,s)}else en=r,r=s;else en=r,r=s;else en=r,r=s;ln--,r===s&&(t=s,0===ln&&vn(nr));return r}())!==s?e=[e,u]:(en=n,s))!==s?(37===l.charCodeAt(en)?(e=W,en++):(e=s,0===ln&&vn(X)),e!==s?(un=r,t=tr(n)):(en=r,s)):(en=r,s)):(en=r,s),ln--,r===s&&(t=s,0===ln&&vn(V)),r}function kn(){var r,t,n,e,u;return ln++,35===l.charCodeAt(r=en)?(t=fr,en++):(t=s,0===ln&&vn(hr)),r=t!==s?(ln++,l.substr(n=en,3)===pr?(e=pr,en+=3):(e=s,0===ln&&vn(dr)),ln--,(n=e===s?void 0:(en=n,s))!==s&&(e=$n())!==s&&(u=(u=Dn())===s?null:u)!==s?(un=r,t=Ar(u)):(en=r,s)):(en=r,s),ln--,r===s&&(t=s,0===ln&&vn(sr)),r}function En(){var r,t,n,e,u;return ln++,r=en,r=$n()!==s?(B.test(l.charAt(t=en))?(n=l.charAt(en),en++):(n=s,0===ln&&vn(J)),(t=n!==s&&(e=(e=wn())===s?null:e)!==s&&(u=(u=Tn())===s?null:u)!==s?n=[n,e,u]:(en=t,s))!==s&&(n=$n())!==s&&(e=(e=kn())===s?null:e)!==s&&(u=$n())!==s?(un=r,Er(t,e)):(en=r,s)):(en=r,s),ln--,r===s&&(0===ln&&vn(kr)),r}function Tn(){var r;return ln++,(r=function(){var r,t,n;ln++,r=en,r=(t=Qn())!==s?(58===l.charCodeAt(en)?(n=jr,en++):(n=s,0===ln&&vn(Mr)),n!==s?(n=Qn())!==s?(un=r,t=Rr(t,n)):(en=r,s):(en=r,s)):(en=r,s);ln--,r===s&&(t=s,0===ln&&vn(Sr));return r}())===s&&(r=function(){var r,t,n;ln++,r=en,r=(t=Qn())!==s?(l.substr(en,2)===_r?(n=_r,en+=2):(n=s,0===ln&&vn(Lr)),n!==s?(n=Qn())!==s?(un=r,t=Pr(t,n)):(en=r,s):(en=r,s)):(en=r,s);ln--,r===s&&(t=s,0===ln&&vn(Nr));return r}())===s&&(r=function(){var r,t;ln++,r=en,(t=Qn())!==s&&(un=r,t=qr(t));ln--,(r=t)===s&&(t=s,0===ln&&vn(Ur));return r}()),ln--,r===s&&(0===ln&&vn(Tr)),r}function Sn(){var r,t,n,e;if(ln++,l.substr(r=en,2)===Or?(t=Or,en+=2):(t=s,0===ln&&vn(Dr)),t!==s){if(n=[],(e=Nn())!==s)for(;e!==s;)n.push(e),e=Nn();else n=s;r=n!==s?(l.substr(en,2)===Or?(e=Or,en+=2):(e=s,0===ln&&vn(Dr)),e!==s?(un=r,t=Qr(n)):(en=r,s)):(en=r,s)}else en=r,r=s;return ln--,r===s&&(t=s,0===ln&&vn(Gr)),r}function jn(){var r,t;return ln++,r=en,(t=Dn())!==s&&(un=r,t=$r(t)),ln--,(r=t)===s&&(t=s,0===ln&&vn(Yr)),r}function Mn(){var r,t,n;return ln++,(r=function(){var r,t,n,e;if(ln++,r=en,(t=Jn())!==s){if(n=[],(e=Rn())!==s)for(;e!==s;)n.push(e),e=Rn();else n=s;r=n!==s?t=[t,n]:(en=r,s)}else en=r,r=s;ln--,r===s&&(t=s,0===ln&&vn(Ir));return r}())===s&&(r=en,r=(t=(t=Jn())===s?null:t)!==s&&(n=Kn())!==s?t=[t,n]:(en=r,s)),ln--,r===s&&(t=s,0===ln&&vn(Hr)),r}function Rn(){var r,t,n;for(ln++,r=en,t=[],n=Bn();n!==s;)t.push(n),n=Bn();return r=t!==s&&(n=Jn())!==s?t=[t,n]:(en=r,s),ln--,r===s&&(t=s,0===ln&&vn(zr)),r}function Nn(){var r,t,n;return ln++,ln++,l.substr(t=r=en,2)===Or?(n=Or,en+=2):(n=s,0===ln&&vn(Dr)),ln--,r=(t=n===s?void 0:(en=t,s))!==s&&(n=(n=qn())===s?Gn():n)!==s?(un=r,t=Jr(n)):(en=r,s),ln--,r===s&&(t=s,0===ln&&vn(Br)),r}function _n(){var r;return ln++,(r=Gn())===s&&(r=qn())===s&&(r=Un()),ln--,r===s&&(0===ln&&vn(Kr)),r}function Ln(){var r;return ln++,(r=function(){var r,t,n;ln++,t=r=en,ln++,(n=qn())!==s||(n=On())===s&&(l.substr(en,2)===E?(n=E,en+=2):(n=s,0===ln&&vn(T)),n===s&&(n=Mn()));ln--,t=n===s?void 0:(en=t,s);r=t!==s?(l.length>en?(n=l.charAt(en),en++):(n=s,0===ln&&vn(mt)),n!==s?(un=r,t=bt()):(en=r,s)):(en=r,s);ln--,r===s&&(t=s,0===ln&&vn(gt));return r}())===s&&(r=qn())===s&&(r=Un()),ln--,r===s&&(0===ln&&vn(Kr)),r}function Pn(){var r,t,n,e;return ln++,91===l.charCodeAt(r=en)?(t=Wr,en++):(t=s,0===ln&&vn(Xr)),r=t!==s?(l.substr(en,4)===Zr?(n=Zr,en+=4):(n=s,0===ln&&vn(rt)),n===s&&(l.substr(en,8)===tt?(n=tt,en+=8):(n=s,0===ln&&vn(nt)),n===s&&(l.substr(en,5)===et?(n=et,en+=5):(n=s,0===ln&&vn(ut)),n===s&&(l.substr(en,6)===ct?(n=ct,en+=6):(n=s,0===ln&&vn(ot))))),n!==s?(93===l.charCodeAt(en)?(e=at,en++):(e=s,0===ln&&vn(it)),e!==s?(un=r,t=lt(n)):(en=r,s)):(en=r,s)):(en=r,s),ln--,r===s&&(t=s,0===ln&&vn(Vr)),r}function Un(){var r;return ln++,92===l.charCodeAt(en)?(r=ft,en++):(r=s,0===ln&&vn(ht)),ln--,r===s&&(0===ln&&vn(st)),r}function qn(){var r,t;return ln++,r=en,r=Un()!==s?((t=Un())===s&&(58===l.charCodeAt(en)?(t=jr,en++):(t=s,0===ln&&vn(Mr)),t===s&&(126===l.charCodeAt(en)?(t=dt,en++):(t=s,0===ln&&vn(At)),t===s&&(61===l.charCodeAt(en)?(t=w,en++):(t=s,0===ln&&vn(k)),t===s&&(35===l.charCodeAt(en)?(t=fr,en++):(t=s,0===ln&&vn(hr)),t===s&&(91===l.charCodeAt(en)?(t=Wr,en++):(t=s,0===ln&&vn(Xr)),t===s&&(93===l.charCodeAt(en)?(t=at,en++):(t=s,0===ln&&vn(it)),t===s&&(123===l.charCodeAt(en)?(t=d,en++):(t=s,0===ln&&vn(A)),t===s&&(125===l.charCodeAt(en)?(t=v,en++):(t=s,0===ln&&vn(g)))))))))),t!==s?(un=r,vt(t)):(en=r,s)):(en=r,s),ln--,r===s&&(0===ln&&vn(pt)),r}function Gn(){var r,t,n;return ln++,t=r=en,ln++,(n=qn())===s&&(n=On())===s&&(n=Mn()),ln--,r=(t=n===s?void 0:(en=t,s))!==s?(l.length>en?(n=l.charAt(en),en++):(n=s,0===ln&&vn(mt)),n!==s?(un=r,t=bt()):(en=r,s)):(en=r,s),ln--,r===s&&(t=s,0===ln&&vn(gt)),r}function On(){var r;return 61===l.charCodeAt(en)?(r=w,en++):(r=s,0===ln&&vn(k)),r===s&&(126===l.charCodeAt(en)?(r=dt,en++):(r=s,0===ln&&vn(At)),r===s&&(35===l.charCodeAt(en)?(r=fr,en++):(r=s,0===ln&&vn(hr)),r===s&&(123===l.charCodeAt(en)?(r=d,en++):(r=s,0===ln&&vn(A)),r===s&&(125===l.charCodeAt(en)?(r=v,en++):(r=s,0===ln&&vn(g)),r===s&&(92===l.charCodeAt(en)?(r=ft,en++):(r=s,0===ln&&vn(ht)),r===s&&(58===l.charCodeAt(en)?(r=jr,en++):(r=s,0===ln&&vn(Mr)))))))),r}function Dn(){var r,t,n,e;if(ln++,r=en,(t=(t=Pn())===s?null:t)!==s)if($n()!==s){if(n=[],(e=_n())!==s)for(;e!==s;)n.push(e),e=_n();else n=s;r=n!==s?(un=r,t=xt(t,n)):(en=r,s)}else en=r,r=s;else en=r,r=s;return ln--,r===s&&(t=s,0===ln&&vn(yt)),r}function Qn(){var r,t=en,n=[];if(cr.test(l.charAt(en))?(r=l.charAt(en),en++):(r=s,0===ln&&vn(or)),r!==s)for(;r!==s;)n.push(r),cr.test(l.charAt(en))?(r=l.charAt(en),en++):(r=s,0===ln&&vn(or));else n=s;return t=n!==s&&(r=(r=function(){var r,t,n,e,u;r=en,46===l.charCodeAt(en)?(t=St,en++):(t=s,0===ln&&vn(jt));if(t!==s)if(n=en,ln++,46===l.charCodeAt(en)?(e=St,en++):(e=s,0===ln&&vn(jt)),ln--,(n=e===s?void 0:(en=n,s))!==s){for(e=[],cr.test(l.charAt(en))?(u=l.charAt(en),en++):(u=s,0===ln&&vn(or));u!==s;)e.push(u),cr.test(l.charAt(en))?(u=l.charAt(en),en++):(u=s,0===ln&&vn(or));r=e!==s?(un=r,t=Mt(e)):(en=r,s)}else en=r,r=s;else en=r,r=s;return r}())===s?null:r)!==s?(un=t,n=Tt(n,r)):(en=t,s)}function Yn(){var r,t,n=en;return l.substr(en,4)===Rt?(r=Rt,en+=4):(r=s,0===ln&&vn(Nt)),n=r!==s&&$n()!==s&&(t=Dn())!==s&&$n()!==s?(un=n,r=_t(t)):(en=n,s)}function $n(){var r,t,n,e,u;for(ln++,r=[],(t=Bn())===s&&(t=en,t=(n=Jn())!==s?(e=en,ln++,u=Rn(),ln--,(e=u===s?void 0:(en=e,s))!==s?n=[n,e]:(en=t,s)):(en=t,s));t!==s;)r.push(t),(t=Bn())===s&&(t=en,t=(n=Jn())!==s?(e=en,ln++,u=Rn(),ln--,(e=u===s?void 0:(en=e,s))!==s?n=[n,e]:(en=t,s)):(en=t,s));return ln--,r===s&&(t=s,0===ln&&vn(Lt)),r}function Hn(){var r,t;for(ln++,r=[],(t=zn())===s&&(t=Jn())===s&&(t=Bn());t!==s;)r.push(t),(t=zn())===s&&(t=Jn())===s&&(t=Bn());return ln--,r===s&&(t=s,0===ln&&vn(Pt)),r}function In(){var r,t,n=en,e=en;for(ln++,r=[],32===l.charCodeAt(en)?(t=Ut,en++):(t=s,0===ln&&vn(qt));t!==s;)r.push(t),32===l.charCodeAt(en)?(t=Ut,en++):(t=s,0===ln&&vn(qt));return ln--,(e=r!==s?void(en=e):s)!==s&&(un=n,e=Gt()),n=e}function zn(){var r,t,n,e;if(ln++,l.substr(r=en,2)===Dt?(t=Dt,en+=2):(t=s,0===ln&&vn(Qt)),t!==s){for(n=[],Yt.test(l.charAt(en))?(e=l.charAt(en),en++):(e=s,0===ln&&vn($t));e!==s;)n.push(e),Yt.test(l.charAt(en))?(e=l.charAt(en),en++):(e=s,0===ln&&vn($t));r=n!==s?(un=r,t=It(n)):(en=r,s)}else en=r,r=s;return ln--,r===s&&(t=s,0===ln&&vn(Ot)),r}function Bn(){var r;return ln++,32===l.charCodeAt(en)?(r=Ut,en++):(r=s,0===ln&&vn(qt)),r===s&&(9===l.charCodeAt(en)?(r=Bt,en++):(r=s,0===ln&&vn(Jt))),ln--,r===s&&(0===ln&&vn(zt)),r}function Jn(){var r;return ln++,l.substr(en,2)===Vt?(r=Vt,en+=2):(r=s,0===ln&&vn(Wt)),r===s&&(10===l.charCodeAt(en)?(r=Xt,en++):(r=s,0===ln&&vn(Zt)),r===s&&(13===l.charCodeAt(en)?(r=rn,en++):(r=s,0===ln&&vn(tn)))),ln--,r===s&&(0===ln&&vn(Kt)),r}function Kn(){var r,t=en,n=en;return ln++,l.length>en?(r=l.charAt(en),en++):(r=s,0===ln&&vn(mt)),ln--,(n=r===s?void 0:(en=n,s))!==s&&(un=t,n=nn()),t=n}var Vn=null,Wn=null,Xn="moodle",Zn=Xn;function re(r){return(r=r.replace(/[\n\r]/g," ")).replace(/\s\s+/g," ")}function te(){Zn=Xn}if((n=n())!==s&&en===l.length)return n;throw n!==s&&en<l.length&&vn({type:"end"}),gn(an,on<l.length?l.charAt(on):null,on<l.length?An(on,on+1):An(on,on))}}}(this);
