"use strict";function peg$subclass(r,t){function e(){this.constructor=r}e.prototype=t.prototype,r.prototype=new e}function peg$SyntaxError(r,t,e,n){this.message=r,this.expected=t,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(h,r){r=void 0!==r?r:{};var t,p={},e={GIFTQuestions:pe},n=pe,u=function(r){return r},o=ie("Category"),c="$",a=ce("$",!1),i="CATEGORY:",l=ce("CATEGORY:",!1),s=function(r){return{type:"Category",title:r}},f=ie("Description"),d=function(r,t){return Je(),{type:"Description",title:r,stem:t,hasEmbeddedAnswers:!1}},g="{",v=ce("{",!1),A="}",b=ce("}",!1),m=function(r,t,e,n){var u=null!==n,o=t?t.text+(u?" ":""):"",c=t&&t.format||n&&n.format||"moodle",a=o+(u?"_____ "+n.text:""),i={type:e.type,title:r,stem:{format:c,text:a},hasEmbeddedAnswers:u};return i=function(r,t){switch(r.globalFeedback=t.globalFeedback,r.type){case"TF":r.isTrue=t.isTrue,r.incorrectFeedback=t.feedback[1],r.correctFeedback=t.feedback[2];break;case"MC":case"Numerical":case"Short":r.choices=t.choices;break;case"Matching":r.matchPairs=t.matchPairs}"MC"==r.type&&function(r){for(var t=!0,e=0;e<r.length;e++)t&=r[e].isCorrect;return t}(r.choices)&&(r.type="Short");return r}(i,e),Je(),i},C=ie("{= match1 -> Match1\n...}"),x=function(r,t){return{type:"Matching",matchPairs:r,globalFeedback:t}},y=ie("matches"),F=function(r){return r},w=ie("match"),k="=",E=ce("=",!1),S="->",T=ce("->",!1),$=function(r,t){return{subquestion:{format:null!==r?r.format:Be(),text:null!==r?r.text:""},subanswer:t}},j=ie("{T} or {F} or {True} or {False}"),M=function(r,t,e){return{type:"TF",isTrue:r,feedback:t,globalFeedback:e}},R=function(r){return r},N="TRUE",_=ce("TRUE",!1),q="T",G=ce("T",!1),L=function(){return!0},O="FALSE",P=ce("FALSE",!1),U="F",D=ce("F",!1),Q=function(){return!1},Y=ie("{=correct choice ~incorrect choice ... }"),H=function(r,t){return{type:"MC",choices:r,globalFeedback:t}},I=ie("Choices"),z=function(r){return r},B=ie("Choice"),J=/^[=~]/,K=ae(["=","~"],!1,!1),V=function(r,t){var e=r[2],n=r[4];return r={isCorrect:"="==r[0],weight:e,text:n,feedback:t}},W=ie("(weight)"),X="%",Z=ce("%",!1),rr=/^[\-]/,tr=ae(["-"],!1,!1),er=function(r){return parseFloat(r.join(""))},nr=ie("(percent)"),ur="100",or=ce("100",!1),cr=/^[0-9]/,ar=ae([["0","9"]],!1,!1),ir=/^[.]/,lr=ae(["."],!1,!1),sr=function(){return oe()},fr=ie("(feedback)"),hr="#",pr=ce("#",!1),dr="###",gr=ce("###",!1),vr=function(r){return r},Ar=ie("Essay question { ... }"),br="",mr=function(r){return{type:"Essay",globalFeedback:r}},Cr=ie("Single short answer { ... }"),xr=function(r,t,e){var n=[];return n.push({isCorrect:!0,text:r,feedback:t,weight:null}),{type:"Short",choices:n,globalFeedback:e}},yr=ie("{#... }"),Fr=function(r,t){return{type:"Numerical",choices:r,globalFeedback:t}},wr=ie("Numerical Answers"),kr=ie("Multiple Numerical Choices"),Er=ie("Numerical Choice"),Sr=function(r,t){var e=r[0],n=r[1],u=r[2];return r={isCorrect:"="==e,weight:n,text:null!==u?u:{format:Be(),text:"*"},feedback:t}},Tr=ie("Single numeric answer"),$r=ie("(number with range)"),jr=":",Mr=ce(":",!1),Rr=function(r,t){return{type:"range",number:r,range:t}},Nr=ie("(number with high-low)"),_r="..",qr=ce("..",!1),Gr=function(r,t){return{type:"high-low",numberHigh:t,numberLow:r}},Lr=ie("(number answer)"),Or=function(r){return{type:"simple",number:r}},Pr=ie(":: Title ::"),Ur="::",Dr=ce("::",!1),Qr=function(r){return r.join("")},Yr=ie("Question stem"),Hr=function(r){var t;return t=r.format,Ie=t,r},Ir=ie("(blank line separator)"),zr=ie("blank line"),Br=ie("(Title text)"),Jr=function(r){return r},Kr=ie("(text character)"),Vr=ie("format"),Wr="[",Xr=ce("[",!1),Zr="html",rt=ce("html",!1),tt="markdown",et=ce("markdown",!1),nt="plain",ut=ce("plain",!1),ot="moodle",ct=ce("moodle",!1),at="]",it=ce("]",!1),lt=function(r){return r},st=ie("(escape character)"),ft="\\",ht=ce("\\",!1),pt=ie("escape sequence"),dt="~",gt=ce("~",!1),vt=function(r){return r},At=ie(""),bt={type:"any"},mt=function(){return oe()},Ct=ie("(formatted text excluding '->'"),xt=function(r,t){return{format:null!==r?r:Be(),text:"html"!==r?ze(t.join("").trim()):t.join("").replace(/\r\n/g,"\n")}},yt=ie("(formatted text)"),Ft=ie("(unformatted text)"),wt=function(r){return ze(r.join("").trim())},kt=ie("(category text)"),Et=function(r){return r.flat().join("")},St=function(r,t){return parseFloat(r.join("")+t)},Tt=".",$t=ce(".",!1),jt=function(r){return"."+r.join("")},Mt="####",Rt=ce("####",!1),Nt=function(r){return r},_t=ie("(single line whitespace)"),qt=ie("(multiple line whitespace)"),Gt=ie("(comment)"),Lt="//",Ot=ce("//",!1),Pt=function(){return null},Ut=ie("(space)"),Dt=" ",Qt=ce(" ",!1),Yt="\t",Ht=ce("\t",!1),It=ie("(end of line)"),zt="\r\n",Bt=ce("\r\n",!1),Jt="\n",Kt=ce("\n",!1),Vt="\r",Wt=ce("\r",!1),Xt=function(){return"EOF"},Zt=0,re=0,te=[{line:1,column:1}],ee=0,ne=[],ue=0;if("startRule"in r){if(!(r.startRule in e))throw new Error("Can't start parsing from rule \""+r.startRule+'".');n=e[r.startRule]}function oe(){return h.substring(re,Zt)}function ce(r,t){return{type:"literal",text:r,ignoreCase:t}}function ae(r,t,e){return{type:"class",parts:r,inverted:t,ignoreCase:e}}function ie(r){return{type:"other",description:r}}function le(r){var t,e=te[r];if(e)return e;for(t=r-1;!te[t];)t--;for(e={line:(e=te[t]).line,column:e.column};t<r;)10===h.charCodeAt(t)?(e.line++,e.column=1):e.column++,t++;return te[r]=e}function se(r,t){var e=le(r),n=le(t);return{start:{offset:r,line:e.line,column:e.column},end:{offset:t,line:n.line,column:n.column}}}function fe(r){Zt<ee||(ee<Zt&&(ee=Zt,ne=[]),ne.push(r))}function he(r,t,e){return new peg$SyntaxError(peg$SyntaxError.buildMessage(r,t),r,t,e)}function pe(){var r,t,e;if(r=Zt,t=[],(e=de())===p&&(e=ge())===p&&(e=ve()),e!==p)for(;e!==p;)t.push(e),(e=de())===p&&(e=ge())===p&&(e=ve());else t=p;return t!==p&&(e=Oe())!==p&&Pe()!==p?(re=r,r=t=u(t)):(Zt=r,r=p),r}function de(){var r,t,e,n;return ue++,r=Zt,Pe()!==p?(36===h.charCodeAt(Zt)?(t=c,Zt++):(t=p,0===ue&&fe(a)),t!==p?(h.substr(Zt,9)===i?(e=i,Zt+=9):(e=p,0===ue&&fe(l)),e!==p&&Oe()!==p&&(n=function(){var r,t,e,n,u;ue++,t=[],n=e=r=Zt,ue++,u=Qe(),ue--,u===p?n=void 0:(Zt=n,n=p);n!==p?(h.length>Zt?(u=h.charAt(Zt),Zt++):(u=p,0===ue&&fe(bt)),u!==p?e=n=[n,u]:(Zt=e,e=p)):(Zt=e,e=p);for(;e!==p;)t.push(e),n=e=Zt,ue++,u=Qe(),ue--,u===p?n=void 0:(Zt=n,n=p),n!==p?(h.length>Zt?(u=h.charAt(Zt),Zt++):(u=p,0===ue&&fe(bt)),u!==p?e=n=[n,u]:(Zt=e,e=p)):(Zt=e,e=p);t!==p?(e=Zt,ue++,(n=Qe())===p&&(n=Ye()),ue--,n!==p?(Zt=e,e=void 0):e=p,e!==p?(re=r,t=Et(t),r=t):(Zt=r,r=p)):(Zt=r,r=p);ue--,r===p&&(t=p,0===ue&&fe(kt));return r}())!==p&&ke()!==p?(re=r,r=s(n)):(Zt=r,r=p)):(Zt=r,r=p)):(Zt=r,r=p),ue--,r===p&&(p,0===ue&&fe(o)),r}function ge(){var r,t,e;return ue++,r=Zt,Pe()!==p?((t=Fe())===p&&(t=null),t!==p&&Oe()!==p&&(e=we())!==p&&ke()!==p?(re=r,r=d(t,e)):(Zt=r,r=p)):(Zt=r,r=p),ue--,r===p&&(p,0===ue&&fe(f)),r}function ve(){var r,t,e,n,u,o,c;return r=Zt,Pe()!==p?((t=Fe())===p&&(t=null),t!==p&&Oe()!==p?((e=we())===p&&(e=null),e!==p&&Oe()!==p?(123===h.charCodeAt(Zt)?(n=g,Zt++):(n=p,0===ue&&fe(v)),n!==p&&Oe()!==p?((u=function(){var r,t,e;ue++,r=Zt,(t=function(){var r,t,e;if(ue++,r=Zt,t=[],(e=Ae())!==p)for(;e!==p;)t.push(e),e=Ae();else t=p;return t!==p&&(re=r,t=F(t)),ue--,(r=t)===p&&(t=p,0===ue&&fe(y)),r}())!==p&&Oe()!==p?((e=Le())===p&&(e=null),e!==p&&Oe()!==p?(re=r,t=x(t,e),r=t):(Zt=r,r=p)):(Zt=r,r=p);ue--,r===p&&(t=p,0===ue&&fe(C));return r}())===p&&(u=function(){var r,t,e,n,u,o;ue++,r=Zt,s=c=Zt,h.substr(Zt,4)===N?(f=N,Zt+=4):(f=p,0===ue&&fe(_)),f===p&&(84===h.charCodeAt(Zt)?(f=q,Zt++):(f=p,0===ue&&fe(G))),f!==p&&(re=s,f=L()),(a=s=f)===p&&(i=Zt,h.substr(Zt,5)===O?(l=O,Zt+=5):(l=p,0===ue&&fe(P)),l===p&&(70===h.charCodeAt(Zt)?(l=U,Zt++):(l=p,0===ue&&fe(D))),l!==p&&(re=i,l=Q()),a=i=l),a!==p&&(re=c,a=R(a)),(t=c=a)!==p&&Oe()!==p?(e=Zt,(n=Oe())!==p?((u=Ce())===p&&(u=null),u!==p?((o=Ce())===p&&(o=null),o!==p?e=n=[n,u,o]:(Zt=e,e=p)):(Zt=e,e=p)):(Zt=e,e=p),e!==p&&(n=Oe())!==p?((u=Le())===p&&(u=null),u!==p?(re=r,t=M(t,e,u),r=t):(Zt=r,r=p)):(Zt=r,r=p)):(Zt=r,r=p);var c,a,i,l,s,f;ue--,r===p&&(t=p,0===ue&&fe(j));return r}())===p&&(u=function(){var r,t,e;ue++,r=Zt,(t=function(){var r,t,e;if(ue++,r=Zt,t=[],(e=be())!==p)for(;e!==p;)t.push(e),e=be();else t=p;return t!==p&&(re=r,t=z(t)),ue--,(r=t)===p&&(t=p,0===ue&&fe(I)),r}())!==p&&Oe()!==p?((e=Le())===p&&(e=null),e!==p&&Oe()!==p?(re=r,t=H(t,e),r=t):(Zt=r,r=p)):(Zt=r,r=p);ue--,r===p&&(t=p,0===ue&&fe(Y));return r}())===p&&(u=function(){var r,t,e,n;ue++,r=Zt,35===h.charCodeAt(Zt)?(t=hr,Zt++):(t=p,0===ue&&fe(pr));t!==p&&Oe()!==p&&(e=function(){var r;ue++,(r=function(){var r,t,e;if(ue++,r=Zt,t=[],(e=xe())!==p)for(;e!==p;)t.push(e),e=xe();else t=p;return t!==p&&(re=r,t=z(t)),ue--,(r=t)===p&&(t=p,0===ue&&fe(kr)),r}())===p&&(r=ye());ue--,r===p&&(p,0===ue&&fe(wr));return r}())!==p&&Oe()!==p?((n=Le())===p&&(n=null),n!==p?(re=r,t=Fr(e,n),r=t):(Zt=r,r=p)):(Zt=r,r=p);ue--,r===p&&(t=p,0===ue&&fe(yr));return r}())===p&&(u=function(){var r,t,e,n;ue++,r=Zt,(t=qe())!==p&&Oe()!==p?((e=Ce())===p&&(e=null),e!==p&&Oe()!==p?((n=Le())===p&&(n=null),n!==p&&Oe()!==p?(re=r,t=xr(t,e,n),r=t):(Zt=r,r=p)):(Zt=r,r=p)):(Zt=r,r=p);ue--,r===p&&(t=p,0===ue&&fe(Cr));return r}())===p&&(u=function(){var r,t,e;ue++,r=Zt,(t=br)!==p&&Oe()!==p?((e=Le())===p&&(e=null),e!==p&&Oe()!==p?(re=r,t=mr(e),r=t):(Zt=r,r=p)):(Zt=r,r=p);ue--,r===p&&(t=p,0===ue&&fe(Ar));return r}()),u!==p&&Oe()!==p?(125===h.charCodeAt(Zt)?(o=A,Zt++):(o=p,0===ue&&fe(b)),o!==p&&Oe()!==p?((c=Ue())===p&&(c=we()),c===p&&(c=null),c!==p&&ke()!==p?(re=r,r=m(t,e,u,c)):(Zt=r,r=p)):(Zt=r,r=p)):(Zt=r,r=p)):(Zt=r,r=p)):(Zt=r,r=p)):(Zt=r,r=p)):(Zt=r,r=p),r}function Ae(){var r,t,e,n,u;return ue++,r=Zt,Oe()!==p?(61===h.charCodeAt(Zt)?(t=k,Zt++):(t=p,0===ue&&fe(E)),t!==p&&Oe()!==p?((e=function(){var r,t,e,n;ue++,r=Zt,(t=je())===p&&(t=null);if(t!==p)if(Oe()!==p){if(e=[],(n=$e())!==p)for(;n!==p;)e.push(n),n=$e();else e=p;e!==p?(re=r,t=xt(t,e),r=t):(Zt=r,r=p)}else Zt=r,r=p;else Zt=r,r=p;ue--,r===p&&(t=p,0===ue&&fe(Ct));return r}())===p&&(e=null),e!==p&&Oe()!==p?(h.substr(Zt,2)===S?(n=S,Zt+=2):(n=p,0===ue&&fe(T)),n!==p&&Oe()!==p&&(u=function(){var r,t,e;if(ue++,r=Zt,t=[],(e=Te())!==p)for(;e!==p;)t.push(e),e=Te();else t=p;t!==p&&(re=r,t=wt(t));ue--,(r=t)===p&&(t=p,0===ue&&fe(Ft));return r}())!==p&&Oe()!==p?(re=r,r=$(e,u)):(Zt=r,r=p)):(Zt=r,r=p)):(Zt=r,r=p)):(Zt=r,r=p),ue--,r===p&&(p,0===ue&&fe(w)),r}function be(){var r,t,e,n,u,o,c;return ue++,r=Zt,Oe()!==p?(t=Zt,J.test(h.charAt(Zt))?(e=h.charAt(Zt),Zt++):(e=p,0===ue&&fe(K)),e!==p&&(n=Oe())!==p?((u=me())===p&&(u=null),u!==p&&(o=Oe())!==p&&(c=qe())!==p?t=e=[e,n,u,o,c]:(Zt=t,t=p)):(Zt=t,t=p),t!==p?((e=Ce())===p&&(e=null),e!==p&&(n=Oe())!==p?(re=r,r=V(t,e)):(Zt=r,r=p)):(Zt=r,r=p)):(Zt=r,r=p),ue--,r===p&&(p,0===ue&&fe(B)),r}function me(){var r,t,e,n,u;return ue++,r=Zt,37===h.charCodeAt(Zt)?(t=X,Zt++):(t=p,0===ue&&fe(Z)),t!==p?(e=Zt,rr.test(h.charAt(Zt))?(n=h.charAt(Zt),Zt++):(n=p,0===ue&&fe(tr)),n===p&&(n=null),n!==p&&(u=function(){var r,t,e,n,u,o;ue++,h.substr(Zt,3)===ur?(r=ur,Zt+=3):(r=p,0===ue&&fe(or));if(r===p)if(r=Zt,cr.test(h.charAt(Zt))?(t=h.charAt(Zt),Zt++):(t=p,0===ue&&fe(ar)),t!==p)if(cr.test(h.charAt(Zt))?(e=h.charAt(Zt),Zt++):(e=p,0===ue&&fe(ar)),e===p&&(e=null),e!==p)if(ir.test(h.charAt(Zt))?(n=h.charAt(Zt),Zt++):(n=p,0===ue&&fe(lr)),n===p&&(n=null),n!==p){for(u=[],cr.test(h.charAt(Zt))?(o=h.charAt(Zt),Zt++):(o=p,0===ue&&fe(ar));o!==p;)u.push(o),cr.test(h.charAt(Zt))?(o=h.charAt(Zt),Zt++):(o=p,0===ue&&fe(ar));u!==p?(re=r,t=sr(),r=t):(Zt=r,r=p)}else Zt=r,r=p;else Zt=r,r=p;else Zt=r,r=p;ue--,r===p&&(t=p,0===ue&&fe(nr));return r}())!==p?e=n=[n,u]:(Zt=e,e=p),e!==p?(37===h.charCodeAt(Zt)?(n=X,Zt++):(n=p,0===ue&&fe(Z)),n!==p?(re=r,r=t=er(e)):(Zt=r,r=p)):(Zt=r,r=p)):(Zt=r,r=p),ue--,r===p&&(t=p,0===ue&&fe(W)),r}function Ce(){var r,t,e,n,u;return ue++,r=Zt,35===h.charCodeAt(Zt)?(t=hr,Zt++):(t=p,0===ue&&fe(pr)),t!==p?(e=Zt,ue++,h.substr(Zt,3)===dr?(n=dr,Zt+=3):(n=p,0===ue&&fe(gr)),ue--,n===p?e=void 0:(Zt=e,e=p),e!==p&&(n=Oe())!==p?((u=qe())===p&&(u=null),u!==p?(re=r,r=t=vr(u)):(Zt=r,r=p)):(Zt=r,r=p)):(Zt=r,r=p),ue--,r===p&&(t=p,0===ue&&fe(fr)),r}function xe(){var r,t,e,n,u;return ue++,r=Zt,Oe()!==p?(t=Zt,J.test(h.charAt(Zt))?(e=h.charAt(Zt),Zt++):(e=p,0===ue&&fe(K)),e!==p?((n=me())===p&&(n=null),n!==p?((u=ye())===p&&(u=null),u!==p?t=e=[e,n,u]:(Zt=t,t=p)):(Zt=t,t=p)):(Zt=t,t=p),t!==p&&(e=Oe())!==p?((n=Ce())===p&&(n=null),n!==p&&(u=Oe())!==p?(re=r,r=Sr(t,n)):(Zt=r,r=p)):(Zt=r,r=p)):(Zt=r,r=p),ue--,r===p&&(p,0===ue&&fe(Er)),r}function ye(){var r;return ue++,(r=function(){var r,t,e,n;ue++,r=Zt,(t=Ge())!==p?(58===h.charCodeAt(Zt)?(e=jr,Zt++):(e=p,0===ue&&fe(Mr)),e!==p&&(n=Ge())!==p?(re=r,t=Rr(t,n),r=t):(Zt=r,r=p)):(Zt=r,r=p);ue--,r===p&&(t=p,0===ue&&fe($r));return r}())===p&&(r=function(){var r,t,e,n;ue++,r=Zt,(t=Ge())!==p?(h.substr(Zt,2)===_r?(e=_r,Zt+=2):(e=p,0===ue&&fe(qr)),e!==p&&(n=Ge())!==p?(re=r,t=Gr(t,n),r=t):(Zt=r,r=p)):(Zt=r,r=p);ue--,r===p&&(t=p,0===ue&&fe(Nr));return r}())===p&&(r=function(){var r,t;ue++,r=Zt,(t=Ge())!==p&&(re=r,t=Or(t));ue--,(r=t)===p&&(t=p,0===ue&&fe(Lr));return r}()),ue--,r===p&&(p,0===ue&&fe(Tr)),r}function Fe(){var r,t,e,n;if(ue++,r=Zt,h.substr(Zt,2)===Ur?(t=Ur,Zt+=2):(t=p,0===ue&&fe(Dr)),t!==p){if(e=[],(n=Se())!==p)for(;n!==p;)e.push(n),n=Se();else e=p;e!==p?(h.substr(Zt,2)===Ur?(n=Ur,Zt+=2):(n=p,0===ue&&fe(Dr)),n!==p?(re=r,r=t=Qr(e)):(Zt=r,r=p)):(Zt=r,r=p)}else Zt=r,r=p;return ue--,r===p&&(t=p,0===ue&&fe(Pr)),r}function we(){var r,t;return ue++,r=Zt,(t=qe())!==p&&(re=r,t=Hr(t)),ue--,(r=t)===p&&(t=p,0===ue&&fe(Yr)),r}function ke(){var r,t,e,n;if(ue++,r=Zt,(t=Qe())!==p){if(e=[],(n=Ee())!==p)for(;n!==p;)e.push(n),n=Ee();else e=p;e!==p?r=t=[t,e]:(Zt=r,r=p)}else Zt=r,r=p;return r===p&&(r=Zt,(t=Qe())===p&&(t=null),t!==p&&(e=Ye())!==p?r=t=[t,e]:(Zt=r,r=p)),ue--,r===p&&(t=p,0===ue&&fe(Ir)),r}function Ee(){var r,t,e;for(ue++,r=Zt,t=[],e=De();e!==p;)t.push(e),e=De();return t!==p&&(e=Qe())!==p?r=t=[t,e]:(Zt=r,r=p),ue--,r===p&&(t=p,0===ue&&fe(zr)),r}function Se(){var r,t,e;return ue++,t=r=Zt,ue++,h.substr(Zt,2)===Ur?(e=Ur,Zt+=2):(e=p,0===ue&&fe(Dr)),ue--,e===p?t=void 0:(Zt=t,t=p),t!==p?((e=Re())===p&&(e=Ne()),e!==p?(re=r,r=t=Jr(e)):(Zt=r,r=p)):(Zt=r,r=p),ue--,r===p&&(t=p,0===ue&&fe(Br)),r}function Te(){var r;return ue++,(r=Ne())===p&&(r=Re())===p&&(r=Me()),ue--,r===p&&(p,0===ue&&fe(Kr)),r}function $e(){var r;return ue++,(r=function(){var r,t,e;ue++,t=r=Zt,ue++,(e=Re())===p&&(e=_e())===p&&(h.substr(Zt,2)===S?(e=S,Zt+=2):(e=p,0===ue&&fe(T)),e===p&&(e=ke()));ue--,e===p?t=void 0:(Zt=t,t=p);t!==p?(h.length>Zt?(e=h.charAt(Zt),Zt++):(e=p,0===ue&&fe(bt)),e!==p?(re=r,t=mt(),r=t):(Zt=r,r=p)):(Zt=r,r=p);ue--,r===p&&(t=p,0===ue&&fe(At));return r}())===p&&(r=Re())===p&&(r=Me()),ue--,r===p&&(p,0===ue&&fe(Kr)),r}function je(){var r,t,e,n;return ue++,r=Zt,91===h.charCodeAt(Zt)?(t=Wr,Zt++):(t=p,0===ue&&fe(Xr)),t!==p?(h.substr(Zt,4)===Zr?(e=Zr,Zt+=4):(e=p,0===ue&&fe(rt)),e===p&&(h.substr(Zt,8)===tt?(e=tt,Zt+=8):(e=p,0===ue&&fe(et)),e===p&&(h.substr(Zt,5)===nt?(e=nt,Zt+=5):(e=p,0===ue&&fe(ut)),e===p&&(h.substr(Zt,6)===ot?(e=ot,Zt+=6):(e=p,0===ue&&fe(ct))))),e!==p?(93===h.charCodeAt(Zt)?(n=at,Zt++):(n=p,0===ue&&fe(it)),n!==p?(re=r,r=t=lt(e)):(Zt=r,r=p)):(Zt=r,r=p)):(Zt=r,r=p),ue--,r===p&&(t=p,0===ue&&fe(Vr)),r}function Me(){var r;return ue++,92===h.charCodeAt(Zt)?(r=ft,Zt++):(r=p,0===ue&&fe(ht)),ue--,r===p&&(p,0===ue&&fe(st)),r}function Re(){var r,t;return ue++,r=Zt,Me()!==p?((t=Me())===p&&(58===h.charCodeAt(Zt)?(t=jr,Zt++):(t=p,0===ue&&fe(Mr)),t===p&&(126===h.charCodeAt(Zt)?(t=dt,Zt++):(t=p,0===ue&&fe(gt)),t===p&&(61===h.charCodeAt(Zt)?(t=k,Zt++):(t=p,0===ue&&fe(E)),t===p&&(35===h.charCodeAt(Zt)?(t=hr,Zt++):(t=p,0===ue&&fe(pr)),t===p&&(91===h.charCodeAt(Zt)?(t=Wr,Zt++):(t=p,0===ue&&fe(Xr)),t===p&&(93===h.charCodeAt(Zt)?(t=at,Zt++):(t=p,0===ue&&fe(it)),t===p&&(123===h.charCodeAt(Zt)?(t=g,Zt++):(t=p,0===ue&&fe(v)),t===p&&(125===h.charCodeAt(Zt)?(t=A,Zt++):(t=p,0===ue&&fe(b)))))))))),t!==p?(re=r,r=vt(t)):(Zt=r,r=p)):(Zt=r,r=p),ue--,r===p&&(p,0===ue&&fe(pt)),r}function Ne(){var r,t,e;return ue++,t=r=Zt,ue++,(e=Re())===p&&(e=_e())===p&&(e=ke()),ue--,e===p?t=void 0:(Zt=t,t=p),t!==p?(h.length>Zt?(e=h.charAt(Zt),Zt++):(e=p,0===ue&&fe(bt)),e!==p?(re=r,r=t=mt()):(Zt=r,r=p)):(Zt=r,r=p),ue--,r===p&&(t=p,0===ue&&fe(At)),r}function _e(){var r;return 61===h.charCodeAt(Zt)?(r=k,Zt++):(r=p,0===ue&&fe(E)),r===p&&(126===h.charCodeAt(Zt)?(r=dt,Zt++):(r=p,0===ue&&fe(gt)),r===p&&(35===h.charCodeAt(Zt)?(r=hr,Zt++):(r=p,0===ue&&fe(pr)),r===p&&(123===h.charCodeAt(Zt)?(r=g,Zt++):(r=p,0===ue&&fe(v)),r===p&&(125===h.charCodeAt(Zt)?(r=A,Zt++):(r=p,0===ue&&fe(b)),r===p&&(92===h.charCodeAt(Zt)?(r=ft,Zt++):(r=p,0===ue&&fe(ht)),r===p&&(58===h.charCodeAt(Zt)?(r=jr,Zt++):(r=p,0===ue&&fe(Mr)))))))),r}function qe(){var r,t,e,n;if(ue++,r=Zt,(t=je())===p&&(t=null),t!==p)if(Oe()!==p){if(e=[],(n=Te())!==p)for(;n!==p;)e.push(n),n=Te();else e=p;e!==p?(re=r,r=t=xt(t,e)):(Zt=r,r=p)}else Zt=r,r=p;else Zt=r,r=p;return ue--,r===p&&(t=p,0===ue&&fe(yt)),r}function Ge(){var r,t,e;if(r=Zt,t=[],cr.test(h.charAt(Zt))?(e=h.charAt(Zt),Zt++):(e=p,0===ue&&fe(ar)),e!==p)for(;e!==p;)t.push(e),cr.test(h.charAt(Zt))?(e=h.charAt(Zt),Zt++):(e=p,0===ue&&fe(ar));else t=p;return t!==p?((e=function(){var r,t,e,n,u;r=Zt,46===h.charCodeAt(Zt)?(t=Tt,Zt++):(t=p,0===ue&&fe($t));if(t!==p)if(e=Zt,ue++,46===h.charCodeAt(Zt)?(n=Tt,Zt++):(n=p,0===ue&&fe($t)),ue--,n===p?e=void 0:(Zt=e,e=p),e!==p){for(n=[],cr.test(h.charAt(Zt))?(u=h.charAt(Zt),Zt++):(u=p,0===ue&&fe(ar));u!==p;)n.push(u),cr.test(h.charAt(Zt))?(u=h.charAt(Zt),Zt++):(u=p,0===ue&&fe(ar));n!==p?(re=r,t=jt(n),r=t):(Zt=r,r=p)}else Zt=r,r=p;else Zt=r,r=p;return r}())===p&&(e=null),e!==p?(re=r,r=t=St(t,e)):(Zt=r,r=p)):(Zt=r,r=p),r}function Le(){var r,t,e;return r=Zt,h.substr(Zt,4)===Mt?(t=Mt,Zt+=4):(t=p,0===ue&&fe(Rt)),t!==p&&Oe()!==p&&(e=qe())!==p&&Oe()!==p?(re=r,r=t=Nt(e)):(Zt=r,r=p),r}function Oe(){var r,t,e,n,u;for(ue++,r=[],(t=De())===p&&(t=Zt,(e=Qe())!==p?(n=Zt,ue++,u=Ee(),ue--,u===p?n=void 0:(Zt=n,n=p),n!==p?t=e=[e,n]:(Zt=t,t=p)):(Zt=t,t=p));t!==p;)r.push(t),(t=De())===p&&(t=Zt,(e=Qe())!==p?(n=Zt,ue++,u=Ee(),ue--,u===p?n=void 0:(Zt=n,n=p),n!==p?t=e=[e,n]:(Zt=t,t=p)):(Zt=t,t=p));return ue--,r===p&&(t=p,0===ue&&fe(_t)),r}function Pe(){var r,t;for(ue++,r=[],(t=Ue())===p&&(t=Qe())===p&&(t=De());t!==p;)r.push(t),(t=Ue())===p&&(t=Qe())===p&&(t=De());return ue--,r===p&&(t=p,0===ue&&fe(qt)),r}function Ue(){var r,t,e,n,u,o;if(ue++,r=Zt,h.substr(Zt,2)===Lt?(t=Lt,Zt+=2):(t=p,0===ue&&fe(Ot)),t!==p){for(e=[],u=n=Zt,ue++,o=Qe(),ue--,o===p?u=void 0:(Zt=u,u=p),u!==p?(h.length>Zt?(o=h.charAt(Zt),Zt++):(o=p,0===ue&&fe(bt)),o!==p?n=u=[u,o]:(Zt=n,n=p)):(Zt=n,n=p);n!==p;)e.push(n),u=n=Zt,ue++,o=Qe(),ue--,o===p?u=void 0:(Zt=u,u=p),u!==p?(h.length>Zt?(o=h.charAt(Zt),Zt++):(o=p,0===ue&&fe(bt)),o!==p?n=u=[u,o]:(Zt=n,n=p)):(Zt=n,n=p);e!==p?(n=Zt,ue++,(u=Qe())===p&&(u=Ye()),ue--,u!==p?(Zt=n,n=void 0):n=p,n!==p?(re=r,r=t=Pt()):(Zt=r,r=p)):(Zt=r,r=p)}else Zt=r,r=p;return ue--,r===p&&(t=p,0===ue&&fe(Gt)),r}function De(){var r;return ue++,32===h.charCodeAt(Zt)?(r=Dt,Zt++):(r=p,0===ue&&fe(Qt)),r===p&&(9===h.charCodeAt(Zt)?(r=Yt,Zt++):(r=p,0===ue&&fe(Ht))),ue--,r===p&&(p,0===ue&&fe(Ut)),r}function Qe(){var r;return ue++,h.substr(Zt,2)===zt?(r=zt,Zt+=2):(r=p,0===ue&&fe(Bt)),r===p&&(10===h.charCodeAt(Zt)?(r=Jt,Zt++):(r=p,0===ue&&fe(Kt)),r===p&&(13===h.charCodeAt(Zt)?(r=Vt,Zt++):(r=p,0===ue&&fe(Wt)))),ue--,r===p&&(p,0===ue&&fe(It)),r}function Ye(){var r,t,e;return t=r=Zt,ue++,h.length>Zt?(e=h.charAt(Zt),Zt++):(e=p,0===ue&&fe(bt)),ue--,e===p?t=void 0:(Zt=t,t=p),t!==p&&(re=r,t=Xt()),r=t}var He="moodle",Ie=He;function ze(r){return(r=r.replace(/[\n\r]/g," ")).replace(/\s\s+/g," ")}function Be(){return Ie}function Je(){Ie=He}if((t=n())!==p&&Zt===h.length)return t;throw t!==p&&Zt<h.length&&fe({type:"end"}),he(ne,ee<h.length?h.charAt(ee):null,ee<h.length?se(ee,ee+1):se(ee,ee))}peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(r,t){var e,o={literal:function(r){return'"'+u(r.text)+'"'},class:function(r){var t,e="";for(t=0;t<r.parts.length;t++)e+=r.parts[t]instanceof Array?c(r.parts[t][0])+"-"+c(r.parts[t][1]):c(r.parts[t]);return"["+(r.inverted?"^":"")+e+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function u(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}function c(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}return"Expected "+function(r){var t,e,n,u=new Array(r.length);for(t=0;t<r.length;t++)u[t]=(n=r[t],o[n.type](n));if(u.sort(),0<u.length){for(e=t=1;t<u.length;t++)u[t-1]!==u[t]&&(u[e]=u[t],e++);u.length=e}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(r)+" but "+((e=t)?'"'+u(e)+'"':"end of input")+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse};
