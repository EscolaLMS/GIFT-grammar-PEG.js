"use strict";function peg$subclass(r,t){function e(){this.constructor=r}e.prototype=t.prototype,r.prototype=new e}function peg$SyntaxError(r,t,e,n){this.message=r,this.expected=t,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(h,r){r=void 0!==r?r:{};var t,p={},e={GIFTQuestions:oe},n=oe,u=function(r){return r},o=re("Category"),c="$",a=Xt("$",!1),i="CATEGORY:",s=Xt("CATEGORY:",!1),l=function(r){return{type:"Category",title:r}},f=re("Description"),d=function(r){return qe(),{type:"Description",title:null,stem:r,hasEmbeddedAnswers:!1}},g="{",A=Xt("{",!1),v="}",b=Xt("}",!1),m=function(r,t,e,n){var u=null!=n,o={format:t.format,text:t.text+(u?" _____ "+n.text:"")},c={type:e.type,title:r,stem:o,hasEmbeddedAnswers:null!=n};return c=function(r,t){switch(r.globalFeedback=t.globalFeedback,t.type){case"TF":r.isTrue=t.isTrue,r.incorrectFeedback=t.feedback[1],r.correctFeedback=t.feedback[2];break;case"MC":case"Numerical":r.choices=t.choices;break;case"Matching":r.matchPairs=t.matchPairs}return r}(c,e),qe(),c},C=re("{= match1 -> Match1\n...}"),x=function(r,t){return{type:"Matching",matchPairs:r,globalFeedback:t}},y=re("matches"),w=function(r){return r},F=re("match"),E="=",k=Xt("=",!1),T="->",S=Xt("->",!1),$=function(r,t){return{subquestion:{format:null!==r?r.format:_e(),text:null!==r?r.text:""},subanswer:t}},M=re("{T} or {F} or {True} or {False}"),j=function(r,t,e){return{type:"TF",isTrue:r,feedback:t,globalFeedback:e}},R=function(r){return r},L="true",N=Xt("TRUE",!0),_="t",q=Xt("T",!0),G=function(){return!0},O="false",P=Xt("FALSE",!0),D="f",I=Xt("F",!0),Q=function(){return!1},U=re("{=correct choice ~incorrect choice ... }"),Y=function(r,t){return{type:"MC",choices:r,globalFeedback:t}},H=re("Choices"),z=function(r){return r},B=re("Choice"),J=/^[=~]/,K=Zt(["=","~"],!1,!1),V=function(r,t){return r={isCorrect:"="==r[0],weight:r[2],text:r[4],feedback:t}},W=re("(weight)"),X="%",Z=Xt("%",!1),rr=/^[\-]/,tr=Zt(["-"],!1,!1),er=function(r){return parseInt(r.join(""),10)},nr=re("(percent)"),ur="100",or=Xt("100",!1),cr=/^[0-9]/,ar=Zt([["0","9"]],!1,!1),ir=function(){return Wt()},sr=re("(feedback)"),lr="#",fr=Xt("#",!1),hr="###",pr=Xt("###",!1),dr=function(r){return r},gr=re("Essay question { ... }"),Ar="",vr=function(r){return{type:"Essay",globalFeedback:r}},br=re("{#... }"),mr=function(r,t){return{type:"Numerical",choices:r,globalFeedback:t}},Cr=re("Numerical Answers"),xr=re("Multiple Numerical Choices"),yr=re("Numerical Choice"),wr=function(r,t){return r={isCorrect:"="==r[0],weight:r[1],text:r[2],feedback:t}},Fr=re("Single numeric answer"),Er=re("(number with range)"),kr=":",Tr=Xt(":",!1),Sr=function(r,t){return{type:"range",number:r,range:t}},$r=re("(number with high-low)"),Mr="..",jr=Xt("..",!1),Rr=function(r,t){return{type:"high-low",numberHigh:t,numberLow:r}},Lr=re("(number answer)"),Nr=function(r){return{type:"simple",number:r}},_r=re(":: Title ::"),qr="::",Gr=Xt("::",!1),Or=function(r){return r.join("")},Pr=re("Question stem"),Dr=function(r){var t;return t=r.format,Le=t,r},Ir=re("(blank line separator)"),Qr=re("(Title text)"),Ur=function(r){return r},Yr=re("(text character)"),Hr=re("format"),zr="[",Br=Xt("[",!1),Jr="html",Kr=Xt("html",!1),Vr="markdown",Wr=Xt("markdown",!1),Xr="plain",Zr=Xt("plain",!1),rt="moodle",tt=Xt("moodle",!1),et="]",nt=Xt("]",!1),ut=function(r){return r},ot=re("(escape character)"),ct="\\",at=Xt("\\",!1),it=re("escape sequence"),st="~",lt=Xt("~",!1),ft=function(r){return r},ht=re(""),pt={type:"any"},dt=function(){return Wt()},gt=re("(formatted text)"),At=function(r,t){return{format:null!==r?r:_e(),text:Ne(t.join("").trim())}},vt=re("(unformatted text)"),bt=function(r){return Ne(r.join("").trim())},mt=function(r,t){return parseFloat(r.join("")+t)},Ct=".",xt=Xt(".",!1),yt=function(r){return"."+r.join("")},wt="####",Ft=Xt("####",!1),Et=function(r){return r},kt=re("(single line whitespace)"),Tt=re("(multiple line whitespace)"),St=re("(comment)"),$t="//",Mt=Xt("//",!1),jt=function(){return null},Rt=re("(space)"),Lt=" ",Nt=Xt(" ",!1),_t="\t",qt=Xt("\t",!1),Gt=re("(end of line)"),Ot="\r\n",Pt=Xt("\r\n",!1),Dt="\n",It=Xt("\n",!1),Qt="\r",Ut=Xt("\r",!1),Yt=function(){return"EOF"},Ht=0,zt=0,Bt=[{line:1,column:1}],Jt=0,Kt=[],Vt=0;if("startRule"in r){if(!(r.startRule in e))throw new Error("Can't start parsing from rule \""+r.startRule+'".');n=e[r.startRule]}function Wt(){return h.substring(zt,Ht)}function Xt(r,t){return{type:"literal",text:r,ignoreCase:t}}function Zt(r,t,e){return{type:"class",parts:r,inverted:t,ignoreCase:e}}function re(r){return{type:"other",description:r}}function te(r){var t,e=Bt[r];if(e)return e;for(t=r-1;!Bt[t];)t--;for(e={line:(e=Bt[t]).line,column:e.column};t<r;)10===h.charCodeAt(t)?(e.line++,e.column=1):e.column++,t++;return Bt[r]=e}function ee(r,t){var e=te(r),n=te(t);return{start:{offset:r,line:e.line,column:e.column},end:{offset:t,line:n.line,column:n.column}}}function ne(r){Ht<Jt||(Jt<Ht&&(Jt=Ht,Kt=[]),Kt.push(r))}function ue(r,t,e){return new peg$SyntaxError(peg$SyntaxError.buildMessage(r,t),r,t,e)}function oe(){var r,t,e;if(r=Ht,t=[],(e=ce())===p&&(e=ae())===p&&(e=ie()),e!==p)for(;e!==p;)t.push(e),(e=ce())===p&&(e=ae())===p&&(e=ie());else t=p;return t!==p&&(e=ke())!==p&&Te()!==p?(zt=r,r=t=u(t)):(Ht=r,r=p),r}function ce(){var r,t,e,n;return Vt++,r=Ht,Te()!==p?(36===h.charCodeAt(Ht)?(t=c,Ht++):(t=p,0===Vt&&ne(a)),t!==p?(h.substr(Ht,9)===i?(e=i,Ht+=9):(e=p,0===Vt&&ne(s)),e!==p&&ke()!==p&&(n=we())!==p&&Ae()!==p?(zt=r,r=l(n)):(Ht=r,r=p)):(Ht=r,r=p)):(Ht=r,r=p),Vt--,r===p&&(p,0===Vt&&ne(o)),r}function ae(){var r,t;return Vt++,r=Ht,Te()!==p&&(t=ye())!==p&&Ae()!==p?(zt=r,r=d(t)):(Ht=r,r=p),Vt--,r===p&&(p,0===Vt&&ne(f)),r}function ie(){var r,t,e,n,u,o,c;return r=Ht,Te()!==p?((t=function(){var r,t,e,n;Vt++,r=Ht,h.substr(Ht,2)===qr?(t=qr,Ht+=2):(t=p,0===Vt&&ne(Gr));if(t!==p){if(e=[],(n=ve())!==p)for(;n!==p;)e.push(n),n=ve();else e=p;e!==p?(h.substr(Ht,2)===qr?(n=qr,Ht+=2):(n=p,0===Vt&&ne(Gr)),n!==p?(zt=r,t=Or(e),r=t):(Ht=r,r=p)):(Ht=r,r=p)}else Ht=r,r=p;Vt--,r===p&&(t=p,0===Vt&&ne(_r));return r}())===p&&(t=null),t!==p&&ke()!==p&&(e=ge())!==p&&ke()!==p?(123===h.charCodeAt(Ht)?(n=g,Ht++):(n=p,0===Vt&&ne(A)),n!==p?((u=function(){var r,t,e;Vt++,r=Ht,(t=function(){var r,t,e;if(Vt++,r=Ht,t=[],(e=se())!==p)for(;e!==p;)t.push(e),e=se();else t=p;return t!==p&&(zt=r,t=w(t)),Vt--,(r=t)===p&&(t=p,0===Vt&&ne(y)),r}())!==p&&ke()!==p?((e=Ee())===p&&(e=null),e!==p&&ke()!==p?(zt=r,t=x(t,e),r=t):(Ht=r,r=p)):(Ht=r,r=p);Vt--,r===p&&(t=p,0===Vt&&ne(C));return r}())===p&&(u=function(){var r,t,e,n,u,o;Vt++,r=Ht,l=c=Ht,h.substr(Ht,4).toLowerCase()===L?(f=h.substr(Ht,4),Ht+=4):(f=p,0===Vt&&ne(N)),f===p&&(h.substr(Ht,1).toLowerCase()===_?(f=h.charAt(Ht),Ht++):(f=p,0===Vt&&ne(q))),f!==p&&(zt=l,f=G()),(a=l=f)===p&&(i=Ht,h.substr(Ht,5).toLowerCase()===O?(s=h.substr(Ht,5),Ht+=5):(s=p,0===Vt&&ne(P)),s===p&&(h.substr(Ht,1).toLowerCase()===D?(s=h.charAt(Ht),Ht++):(s=p,0===Vt&&ne(I))),s!==p&&(zt=i,s=Q()),a=i=s),a!==p&&(zt=c,a=R(a)),(t=c=a)!==p&&ke()!==p?(e=Ht,(n=ke())!==p?((u=he())===p&&(u=null),u!==p?((o=he())===p&&(o=null),o!==p?e=n=[n,u,o]:(Ht=e,e=p)):(Ht=e,e=p)):(Ht=e,e=p),e!==p&&(n=ke())!==p?((u=Ee())===p&&(u=null),u!==p?(zt=r,t=j(t,e,u),r=t):(Ht=r,r=p)):(Ht=r,r=p)):(Ht=r,r=p);var c,a,i,s,l,f;Vt--,r===p&&(t=p,0===Vt&&ne(M));return r}())===p&&(u=function(){var r,t,e;Vt++,r=Ht,(t=function(){var r,t,e;if(Vt++,r=Ht,t=[],(e=le())!==p)for(;e!==p;)t.push(e),e=le();else t=p;return t!==p&&(zt=r,t=z(t)),Vt--,(r=t)===p&&(t=p,0===Vt&&ne(H)),r}())!==p&&ke()!==p?((e=Ee())===p&&(e=null),e!==p&&ke()!==p?(zt=r,t=Y(t,e),r=t):(Ht=r,r=p)):(Ht=r,r=p);Vt--,r===p&&(t=p,0===Vt&&ne(U));return r}())===p&&(u=function(){var r,t,e,n;Vt++,r=Ht,35===h.charCodeAt(Ht)?(t=lr,Ht++):(t=p,0===Vt&&ne(fr));t!==p&&ke()!==p&&(e=function(){var r;Vt++,(r=function(){var r,t,e;if(Vt++,r=Ht,t=[],(e=pe())!==p)for(;e!==p;)t.push(e),e=pe();else t=p;return t!==p&&(zt=r,t=z(t)),Vt--,(r=t)===p&&(t=p,0===Vt&&ne(xr)),r}())===p&&(r=de());Vt--,r===p&&(p,0===Vt&&ne(Cr));return r}())!==p&&ke()!==p?((n=Ee())===p&&(n=null),n!==p?(zt=r,t=mr(e,n),r=t):(Ht=r,r=p)):(Ht=r,r=p);Vt--,r===p&&(t=p,0===Vt&&ne(br));return r}())===p&&(u=function(){var r,t,e;Vt++,r=Ht,(t=Ar)!==p&&ke()!==p?((e=Ee())===p&&(e=null),e!==p&&ke()!==p?(zt=r,t=vr(e),r=t):(Ht=r,r=p)):(Ht=r,r=p);Vt--,r===p&&(t=p,0===Vt&&ne(gr));return r}()),u!==p?(125===h.charCodeAt(Ht)?(o=v,Ht++):(o=p,0===Vt&&ne(b)),o!==p&&ke()!==p?((c=Se())===p&&(c=ge()),c===p&&(c=null),c!==p&&Ae()!==p?(zt=r,r=m(t,e,u,c)):(Ht=r,r=p)):(Ht=r,r=p)):(Ht=r,r=p)):(Ht=r,r=p)):(Ht=r,r=p)):(Ht=r,r=p),r}function se(){var r,t,e,n,u;return Vt++,r=Ht,ke()!==p?(61===h.charCodeAt(Ht)?(t=E,Ht++):(t=p,0===Vt&&ne(k)),t!==p&&ke()!==p?((e=ye())===p&&(e=null),e!==p&&ke()!==p?(h.substr(Ht,2)===T?(n=T,Ht+=2):(n=p,0===Vt&&ne(S)),n!==p&&ke()!==p&&(u=we())!==p&&ke()!==p?(zt=r,r=$(e,u)):(Ht=r,r=p)):(Ht=r,r=p)):(Ht=r,r=p)):(Ht=r,r=p),Vt--,r===p&&(p,0===Vt&&ne(F)),r}function le(){var r,t,e,n,u,o,c;return Vt++,r=Ht,ke()!==p?(t=Ht,J.test(h.charAt(Ht))?(e=h.charAt(Ht),Ht++):(e=p,0===Vt&&ne(K)),e!==p&&(n=ke())!==p?((u=fe())===p&&(u=null),u!==p&&(o=ke())!==p&&(c=ye())!==p?t=e=[e,n,u,o,c]:(Ht=t,t=p)):(Ht=t,t=p),t!==p?((e=he())===p&&(e=null),e!==p&&(n=ke())!==p?(zt=r,r=V(t,e)):(Ht=r,r=p)):(Ht=r,r=p)):(Ht=r,r=p),Vt--,r===p&&(p,0===Vt&&ne(B)),r}function fe(){var r,t,e,n,u;return Vt++,r=Ht,37===h.charCodeAt(Ht)?(t=X,Ht++):(t=p,0===Vt&&ne(Z)),t!==p?(e=Ht,rr.test(h.charAt(Ht))?(n=h.charAt(Ht),Ht++):(n=p,0===Vt&&ne(tr)),n===p&&(n=null),n!==p&&(u=function(){var r,t,e;Vt++,h.substr(Ht,3)===ur?(r=ur,Ht+=3):(r=p,0===Vt&&ne(or));r===p&&(r=Ht,cr.test(h.charAt(Ht))?(t=h.charAt(Ht),Ht++):(t=p,0===Vt&&ne(ar)),t!==p?(cr.test(h.charAt(Ht))?(e=h.charAt(Ht),Ht++):(e=p,0===Vt&&ne(ar)),e===p&&(e=null),e!==p?(zt=r,t=ir(),r=t):(Ht=r,r=p)):(Ht=r,r=p));Vt--,r===p&&(t=p,0===Vt&&ne(nr));return r}())!==p?e=n=[n,u]:(Ht=e,e=p),e!==p?(37===h.charCodeAt(Ht)?(n=X,Ht++):(n=p,0===Vt&&ne(Z)),n!==p?(zt=r,r=t=er(e)):(Ht=r,r=p)):(Ht=r,r=p)):(Ht=r,r=p),Vt--,r===p&&(t=p,0===Vt&&ne(W)),r}function he(){var r,t,e,n,u;return Vt++,r=Ht,35===h.charCodeAt(Ht)?(t=lr,Ht++):(t=p,0===Vt&&ne(fr)),t!==p?(e=Ht,Vt++,h.substr(Ht,3)===hr?(n=hr,Ht+=3):(n=p,0===Vt&&ne(pr)),Vt--,n===p?e=void 0:(Ht=e,e=p),e!==p&&(n=ke())!==p?((u=ye())===p&&(u=null),u!==p?(zt=r,r=t=dr(u)):(Ht=r,r=p)):(Ht=r,r=p)):(Ht=r,r=p),Vt--,r===p&&(t=p,0===Vt&&ne(sr)),r}function pe(){var r,t,e,n,u;return Vt++,r=Ht,ke()!==p?(t=Ht,J.test(h.charAt(Ht))?(e=h.charAt(Ht),Ht++):(e=p,0===Vt&&ne(K)),e!==p?((n=fe())===p&&(n=null),n!==p&&(u=de())!==p?t=e=[e,n,u]:(Ht=t,t=p)):(Ht=t,t=p),t!==p&&(e=ke())!==p?((n=he())===p&&(n=null),n!==p&&(u=ke())!==p?(zt=r,r=wr(t,n)):(Ht=r,r=p)):(Ht=r,r=p)):(Ht=r,r=p),Vt--,r===p&&(p,0===Vt&&ne(yr)),r}function de(){var r;return Vt++,(r=function(){var r,t,e,n;Vt++,r=Ht,(t=Fe())!==p?(58===h.charCodeAt(Ht)?(e=kr,Ht++):(e=p,0===Vt&&ne(Tr)),e!==p&&(n=Fe())!==p?(zt=r,t=Sr(t,n),r=t):(Ht=r,r=p)):(Ht=r,r=p);Vt--,r===p&&(t=p,0===Vt&&ne(Er));return r}())===p&&(r=function(){var r,t,e,n;Vt++,r=Ht,(t=Fe())!==p?(h.substr(Ht,2)===Mr?(e=Mr,Ht+=2):(e=p,0===Vt&&ne(jr)),e!==p&&(n=Fe())!==p?(zt=r,t=Rr(t,n),r=t):(Ht=r,r=p)):(Ht=r,r=p);Vt--,r===p&&(t=p,0===Vt&&ne($r));return r}())===p&&(r=function(){var r,t;Vt++,r=Ht,(t=Fe())!==p&&(zt=r,t=Nr(t));Vt--,(r=t)===p&&(t=p,0===Vt&&ne(Lr));return r}()),Vt--,r===p&&(p,0===Vt&&ne(Fr)),r}function ge(){var r,t;return Vt++,r=Ht,(t=ye())!==p&&(zt=r,t=Dr(t)),Vt--,(r=t)===p&&(t=p,0===Vt&&ne(Pr)),r}function Ae(){var r,t,e,n;if(Vt++,r=Ht,(t=Me())!==p){if(e=[],(n=Me())!==p)for(;n!==p;)e.push(n),n=Me();else e=p;e!==p?r=t=[t,e]:(Ht=r,r=p)}else Ht=r,r=p;return r===p&&(r=Ht,(t=Me())===p&&(t=null),t!==p&&(e=je())!==p?r=t=[t,e]:(Ht=r,r=p)),Vt--,r===p&&(t=p,0===Vt&&ne(Ir)),r}function ve(){var r,t,e;return Vt++,t=r=Ht,Vt++,h.substr(Ht,2)===qr?(e=qr,Ht+=2):(e=p,0===Vt&&ne(Gr)),Vt--,e===p?t=void 0:(Ht=t,t=p),t!==p&&(e=xe())!==p?(zt=r,r=t=Ur(e)):(Ht=r,r=p),Vt--,r===p&&(t=p,0===Vt&&ne(Qr)),r}function be(){var r;return Vt++,(r=xe())===p&&(r=Ce())===p&&(r=me()),Vt--,r===p&&(p,0===Vt&&ne(Yr)),r}function me(){var r;return Vt++,92===h.charCodeAt(Ht)?(r=ct,Ht++):(r=p,0===Vt&&ne(at)),Vt--,r===p&&(p,0===Vt&&ne(ot)),r}function Ce(){var r,t;return Vt++,r=Ht,me()!==p?((t=me())===p&&(58===h.charCodeAt(Ht)?(t=kr,Ht++):(t=p,0===Vt&&ne(Tr)),t===p&&(126===h.charCodeAt(Ht)?(t=st,Ht++):(t=p,0===Vt&&ne(lt)),t===p&&(61===h.charCodeAt(Ht)?(t=E,Ht++):(t=p,0===Vt&&ne(k)),t===p&&(35===h.charCodeAt(Ht)?(t=lr,Ht++):(t=p,0===Vt&&ne(fr)),t===p&&(91===h.charCodeAt(Ht)?(t=zr,Ht++):(t=p,0===Vt&&ne(Br)),t===p&&(93===h.charCodeAt(Ht)?(t=et,Ht++):(t=p,0===Vt&&ne(nt)),t===p&&(123===h.charCodeAt(Ht)?(t=g,Ht++):(t=p,0===Vt&&ne(A)),t===p&&(125===h.charCodeAt(Ht)?(t=v,Ht++):(t=p,0===Vt&&ne(b)))))))))),t!==p?(zt=r,r=ft(t)):(Ht=r,r=p)):(Ht=r,r=p),Vt--,r===p&&(p,0===Vt&&ne(it)),r}function xe(){var r,t,e;return Vt++,t=r=Ht,Vt++,(e=Ce())===p&&(e=function(){var r;61===h.charCodeAt(Ht)?(r=E,Ht++):(r=p,0===Vt&&ne(k));r===p&&(126===h.charCodeAt(Ht)?(r=st,Ht++):(r=p,0===Vt&&ne(lt)),r===p&&(35===h.charCodeAt(Ht)?(r=lr,Ht++):(r=p,0===Vt&&ne(fr)),r===p&&(123===h.charCodeAt(Ht)?(r=g,Ht++):(r=p,0===Vt&&ne(A)),r===p&&(125===h.charCodeAt(Ht)?(r=v,Ht++):(r=p,0===Vt&&ne(b)),r===p&&(92===h.charCodeAt(Ht)?(r=ct,Ht++):(r=p,0===Vt&&ne(at)),r===p&&(h.substr(Ht,2)===T?(r=T,Ht+=2):(r=p,0===Vt&&ne(S))))))));return r}())===p&&(e=Ae()),Vt--,e===p?t=void 0:(Ht=t,t=p),t!==p?(h.length>Ht?(e=h.charAt(Ht),Ht++):(e=p,0===Vt&&ne(pt)),e!==p?(zt=r,r=t=dt()):(Ht=r,r=p)):(Ht=r,r=p),Vt--,r===p&&(t=p,0===Vt&&ne(ht)),r}function ye(){var r,t,e,n,u,o,c,a;if(Vt++,Vt++,u=r=Ht,91===h.charCodeAt(Ht)?(o=zr,Ht++):(o=p,0===Vt&&ne(Br)),o!==p?(h.substr(Ht,4)===Jr?(c=Jr,Ht+=4):(c=p,0===Vt&&ne(Kr)),c===p&&(h.substr(Ht,8)===Vr?(c=Vr,Ht+=8):(c=p,0===Vt&&ne(Wr)),c===p&&(h.substr(Ht,5)===Xr?(c=Xr,Ht+=5):(c=p,0===Vt&&ne(Zr)),c===p&&(h.substr(Ht,6)===rt?(c=rt,Ht+=6):(c=p,0===Vt&&ne(tt))))),c!==p?(93===h.charCodeAt(Ht)?(a=et,Ht++):(a=p,0===Vt&&ne(nt)),a!==p?(zt=u,u=o=ut(c)):(Ht=u,u=p)):(Ht=u,u=p)):(Ht=u,u=p),Vt--,u===p&&(o=p,0===Vt&&ne(Hr)),(t=u)===p&&(t=null),t!==p)if(ke()!==p){if(e=[],(n=be())!==p)for(;n!==p;)e.push(n),n=be();else e=p;e!==p?(zt=r,r=t=At(t,e)):(Ht=r,r=p)}else Ht=r,r=p;else Ht=r,r=p;return Vt--,r===p&&(t=p,0===Vt&&ne(gt)),r}function we(){var r,t,e;if(Vt++,r=Ht,t=[],(e=be())!==p)for(;e!==p;)t.push(e),e=be();else t=p;return t!==p&&(zt=r,t=bt(t)),Vt--,(r=t)===p&&(t=p,0===Vt&&ne(vt)),r}function Fe(){var r,t,e;if(r=Ht,t=[],cr.test(h.charAt(Ht))?(e=h.charAt(Ht),Ht++):(e=p,0===Vt&&ne(ar)),e!==p)for(;e!==p;)t.push(e),cr.test(h.charAt(Ht))?(e=h.charAt(Ht),Ht++):(e=p,0===Vt&&ne(ar));else t=p;return t!==p?((e=function(){var r,t,e,n,u;r=Ht,46===h.charCodeAt(Ht)?(t=Ct,Ht++):(t=p,0===Vt&&ne(xt));if(t!==p)if(e=Ht,Vt++,46===h.charCodeAt(Ht)?(n=Ct,Ht++):(n=p,0===Vt&&ne(xt)),Vt--,n===p?e=void 0:(Ht=e,e=p),e!==p){for(n=[],cr.test(h.charAt(Ht))?(u=h.charAt(Ht),Ht++):(u=p,0===Vt&&ne(ar));u!==p;)n.push(u),cr.test(h.charAt(Ht))?(u=h.charAt(Ht),Ht++):(u=p,0===Vt&&ne(ar));n!==p?(zt=r,t=yt(n),r=t):(Ht=r,r=p)}else Ht=r,r=p;else Ht=r,r=p;return r}())===p&&(e=null),e!==p?(zt=r,r=t=mt(t,e)):(Ht=r,r=p)):(Ht=r,r=p),r}function Ee(){var r,t,e;return r=Ht,h.substr(Ht,4)===wt?(t=wt,Ht+=4):(t=p,0===Vt&&ne(Ft)),t!==p&&ke()!==p&&(e=ye())!==p&&ke()!==p?(zt=r,r=t=Et(e)):(Ht=r,r=p),r}function ke(){var r,t,e,n,u;for(Vt++,r=[],t=Ht,(e=Me())!==p?(n=Ht,Vt++,u=Me(),Vt--,u===p?n=void 0:(Ht=n,n=p),n!==p?t=e=[e,n]:(Ht=t,t=p)):(Ht=t,t=p),t===p&&(t=$e());t!==p;)r.push(t),t=Ht,(e=Me())!==p?(n=Ht,Vt++,u=Me(),Vt--,u===p?n=void 0:(Ht=n,n=p),n!==p?t=e=[e,n]:(Ht=t,t=p)):(Ht=t,t=p),t===p&&(t=$e());return Vt--,r===p&&(t=p,0===Vt&&ne(kt)),r}function Te(){var r,t;for(Vt++,r=[],(t=Se())===p&&(t=Me())===p&&(t=$e());t!==p;)r.push(t),(t=Se())===p&&(t=Me())===p&&(t=$e());return Vt--,r===p&&(t=p,0===Vt&&ne(Tt)),r}function Se(){var r,t,e,n,u,o;if(Vt++,r=Ht,h.substr(Ht,2)===$t?(t=$t,Ht+=2):(t=p,0===Vt&&ne(Mt)),t!==p){for(e=[],u=n=Ht,Vt++,o=Me(),Vt--,o===p?u=void 0:(Ht=u,u=p),u!==p?(h.length>Ht?(o=h.charAt(Ht),Ht++):(o=p,0===Vt&&ne(pt)),o!==p?n=u=[u,o]:(Ht=n,n=p)):(Ht=n,n=p);n!==p;)e.push(n),u=n=Ht,Vt++,o=Me(),Vt--,o===p?u=void 0:(Ht=u,u=p),u!==p?(h.length>Ht?(o=h.charAt(Ht),Ht++):(o=p,0===Vt&&ne(pt)),o!==p?n=u=[u,o]:(Ht=n,n=p)):(Ht=n,n=p);e!==p?((n=Me())===p&&(n=je()),n!==p?(zt=r,r=t=jt()):(Ht=r,r=p)):(Ht=r,r=p)}else Ht=r,r=p;return Vt--,r===p&&(t=p,0===Vt&&ne(St)),r}function $e(){var r;return Vt++,32===h.charCodeAt(Ht)?(r=Lt,Ht++):(r=p,0===Vt&&ne(Nt)),r===p&&(9===h.charCodeAt(Ht)?(r=_t,Ht++):(r=p,0===Vt&&ne(qt))),Vt--,r===p&&(p,0===Vt&&ne(Rt)),r}function Me(){var r;return Vt++,h.substr(Ht,2)===Ot?(r=Ot,Ht+=2):(r=p,0===Vt&&ne(Pt)),r===p&&(10===h.charCodeAt(Ht)?(r=Dt,Ht++):(r=p,0===Vt&&ne(It)),r===p&&(13===h.charCodeAt(Ht)?(r=Qt,Ht++):(r=p,0===Vt&&ne(Ut)))),Vt--,r===p&&(p,0===Vt&&ne(Gt)),r}function je(){var r,t,e;return t=r=Ht,Vt++,h.length>Ht?(e=h.charAt(Ht),Ht++):(e=p,0===Vt&&ne(pt)),Vt--,e===p?t=void 0:(Ht=t,t=p),t!==p&&(zt=r,t=Yt()),r=t}var Re="moodle",Le=Re;function Ne(r){return(r=r.replace(/[\n\r]/g," ")).replace(/\s\s+/g," ")}function _e(){return Le}function qe(){Le=Re}if((t=n())!==p&&Ht===h.length)return t;throw t!==p&&Ht<h.length&&ne({type:"end"}),ue(Kt,Jt<h.length?h.charAt(Jt):null,Jt<h.length?ee(Jt,Jt+1):ee(Jt,Jt))}peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(r,t){var e,o={literal:function(r){return'"'+u(r.text)+'"'},class:function(r){var t,e="";for(t=0;t<r.parts.length;t++)e+=r.parts[t]instanceof Array?c(r.parts[t][0])+"-"+c(r.parts[t][1]):c(r.parts[t]);return"["+(r.inverted?"^":"")+e+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function u(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}function c(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}return"Expected "+function(r){var t,e,n,u=new Array(r.length);for(t=0;t<r.length;t++)u[t]=(n=r[t],o[n.type](n));if(u.sort(),0<u.length){for(e=t=1;t<u.length;t++)u[t-1]!==u[t]&&(u[e]=u[t],e++);u.length=e}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(r)+" but "+((e=t)?'"'+u(e)+'"':"end of input")+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse};
