"use strict";function peg$subclass(r,t){function e(){this.constructor=r}e.prototype=t.prototype,r.prototype=new e}function peg$SyntaxError(r,t,e,n){this.message=r,this.expected=t,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(h,r){r=void 0!==r?r:{};var t,p={},e={GIFTQuestions:be},n=be,u=function(r){return r},o=pe("Category"),c="$",a=fe("$",!1),i="CATEGORY:",l=fe("CATEGORY:",!1),s=function(r){return{type:"Category",title:r}},f=pe("Description"),d=function(r,t){return rn(),{type:"Description",title:r,stem:t,hasEmbeddedAnswers:!1}},g="{",v=fe("{",!1),A="}",b=fe("}",!1),m=function(r,t,e,n){var u=null!==n,o=t?t.text+(u?" ":""):"",c=t&&t.format||n&&n.format||"moodle",a=o+(u?"_____ "+n.text:""),i={type:e.type,title:r,stem:{format:c,text:a},hasEmbeddedAnswers:u};return i=function(r,t){switch(r.globalFeedback=t.globalFeedback,r.type){case"TF":r.isTrue=t.isTrue,r.incorrectFeedback=t.feedback[1],r.correctFeedback=t.feedback[2];break;case"MC":case"Numerical":case"Short":r.choices=t.choices;break;case"Matching":r.matchPairs=t.matchPairs}"MC"==r.type&&function(r){for(var t=!0,e=0;e<r.length;e++)t&=r[e].isCorrect;return t}(r.choices)&&(r.type="Short");return r}(i,e),rn(),i},C=pe("{= match1 -> Match1\n...}"),x=function(r,t){return{type:"Matching",matchPairs:r,globalFeedback:t}},y=pe("matches"),w=function(r){return r},F=pe("match"),k="=",E=fe("=",!1),S="->",T=fe("->",!1),$=function(r,t){return{subquestion:{format:null!==r?r.format:Ze(),text:null!==r?r.text:""},subanswer:t}},j=pe("{T} or {F} or {True} or {False}"),M=function(r,t,e){return{type:"TF",isTrue:r,feedback:t,globalFeedback:e}},R=function(r){return r},L="true",N=fe("TRUE",!0),_="t",q=fe("T",!0),G=function(){return!0},O="false",P=fe("FALSE",!0),D="f",Q=fe("F",!0),U=function(){return!1},Y=pe("{=correct choice ~incorrect choice ... }"),H=function(r,t){return{type:"MC",choices:r,globalFeedback:t}},I=pe("Choices"),z=function(r){return r},B=pe("Choice"),J=/^[=~]/,K=he(["=","~"],!1,!1),V=function(r,t){var e=r[2],n=r[4];return r={isCorrect:"="==r[0],weight:e,text:n,feedback:t}},W=pe("(weight)"),X="%",Z=fe("%",!1),rr=/^[\-]/,tr=he(["-"],!1,!1),er=function(r){return parseFloat(r.join(""))},nr=pe("(percent)"),ur="100",or=fe("100",!1),cr=/^[0-9]/,ar=he([["0","9"]],!1,!1),ir=/^[.]/,lr=he(["."],!1,!1),sr=function(){return se()},fr=pe("(feedback)"),hr="#",pr=fe("#",!1),dr="###",gr=fe("###",!1),vr=function(r){return r},Ar=pe("Essay question { ... }"),br="",mr=function(r){return{type:"Essay",globalFeedback:r}},Cr=pe("Single short answer { ... }"),xr=function(r,t,e){var n=[];return n.push({isCorrect:!0,text:r,feedback:t,weight:null}),{type:"Short",choices:n,globalFeedback:e}},yr=pe("{#... }"),wr=function(r,t){return{type:"Numerical",choices:r,globalFeedback:t}},Fr=pe("Numerical Answers"),kr=pe("Multiple Numerical Choices"),Er=pe("Numerical Choice"),Sr=function(r,t){var e=r[0],n=r[1],u=r[2];return r={isCorrect:"="==e,weight:n,text:null!==u?u:{format:Ze(),text:"*"},feedback:t}},Tr=pe("Single numeric answer"),$r=pe("(number with range)"),jr=":",Mr=fe(":",!1),Rr=function(r,t){return{type:"range",number:r,range:t}},Lr=pe("(number with high-low)"),Nr="..",_r=fe("..",!1),qr=function(r,t){return{type:"high-low",numberHigh:t,numberLow:r}},Gr=pe("(number answer)"),Or=function(r){return{type:"simple",number:r}},Pr=pe(":: Title ::"),Dr="::",Qr=fe("::",!1),Ur=function(r){return r.join("")},Yr=pe("Question stem"),Hr=function(r){var t;return t=r.format,We=t,r},Ir=pe("(blank line separator)"),zr=pe("blank line"),Br=pe("(Title text)"),Jr=function(r){return r},Kr=pe("(text character)"),Vr=pe("format"),Wr="[",Xr=fe("[",!1),Zr="html",rt=fe("html",!1),tt="markdown",et=fe("markdown",!1),nt="plain",ut=fe("plain",!1),ot="moodle",ct=fe("moodle",!1),at="]",it=fe("]",!1),lt=function(r){return r},st=pe("(newline)"),ft="\\n",ht=fe("\\n",!1),pt=function(){return"\n"},dt=pe("(escape character)"),gt="\\",vt=fe("\\",!1),At=pe("escape sequence"),bt="~",mt=fe("~",!1),Ct=function(r){return r},xt=pe(""),yt={type:"any"},wt=function(){return se()},Ft=pe("(formatted text excluding '->'"),kt=function(r,t){return{format:null!==r?r:Ze(),text:"html"!==r?Xe(t.join("").trim()):t.join("").replace(/\r\n/g,"\n")}},Et=pe("(formatted text)"),St=function(r,t){return{format:null!==r?r:Ze(),text:"html"!==r?Xe(t.join("").trim()):t.join("").replace(/\r\n/g,"\n")}},Tt=pe("(unformatted text)"),$t=function(r){return t=r.join("").trim(),Xe(t=t.replace(/[\n\r]/g," "));var t},jt=pe("(category text)"),Mt=function(r){return r.flat().join("")},Rt=function(r,t){return parseFloat(r.join("")+t)},Lt=".",Nt=fe(".",!1),_t=function(r){return"."+r.join("")},qt="####",Gt=fe("####",!1),Ot=function(r){return r},Pt=pe("(single line whitespace)"),Dt=pe("(multiple line whitespace)"),Qt=pe("(comment)"),Ut="//",Yt=fe("//",!1),Ht=function(){return null},It=pe("(space)"),zt=" ",Bt=fe(" ",!1),Jt="\t",Kt=fe("\t",!1),Vt=pe("(end of line)"),Wt="\r\n",Xt=fe("\r\n",!1),Zt="\n",re=fe("\n",!1),te="\r",ee=fe("\r",!1),ne=function(){return"EOF"},ue=0,oe=0,ce=[{line:1,column:1}],ae=0,ie=[],le=0;if("startRule"in r){if(!(r.startRule in e))throw new Error("Can't start parsing from rule \""+r.startRule+'".');n=e[r.startRule]}function se(){return h.substring(oe,ue)}function fe(r,t){return{type:"literal",text:r,ignoreCase:t}}function he(r,t,e){return{type:"class",parts:r,inverted:t,ignoreCase:e}}function pe(r){return{type:"other",description:r}}function de(r){var t,e=ce[r];if(e)return e;for(t=r-1;!ce[t];)t--;for(e={line:(e=ce[t]).line,column:e.column};t<r;)10===h.charCodeAt(t)?(e.line++,e.column=1):e.column++,t++;return ce[r]=e}function ge(r,t){var e=de(r),n=de(t);return{start:{offset:r,line:e.line,column:e.column},end:{offset:t,line:n.line,column:n.column}}}function ve(r){ue<ae||(ae<ue&&(ae=ue,ie=[]),ie.push(r))}function Ae(r,t,e){return new peg$SyntaxError(peg$SyntaxError.buildMessage(r,t),r,t,e)}function be(){var r,t,e;if(r=ue,t=[],(e=me())===p&&(e=Ce())===p&&(e=xe()),e!==p)for(;e!==p;)t.push(e),(e=me())===p&&(e=Ce())===p&&(e=xe());else t=p;return t!==p&&(e=He())!==p&&Ie()!==p?(oe=r,r=t=u(t)):(ue=r,r=p),r}function me(){var r,t,e,n;return le++,r=ue,Ie()!==p?(36===h.charCodeAt(ue)?(t=c,ue++):(t=p,0===le&&ve(a)),t!==p?(h.substr(ue,9)===i?(e=i,ue+=9):(e=p,0===le&&ve(l)),e!==p&&He()!==p&&(n=function(){var r,t,e,n,u;le++,t=[],n=e=r=ue,le++,u=Je(),le--,u===p?n=void 0:(ue=n,n=p);n!==p?(h.length>ue?(u=h.charAt(ue),ue++):(u=p,0===le&&ve(yt)),u!==p?e=n=[n,u]:(ue=e,e=p)):(ue=e,e=p);for(;e!==p;)t.push(e),n=e=ue,le++,u=Je(),le--,u===p?n=void 0:(ue=n,n=p),n!==p?(h.length>ue?(u=h.charAt(ue),ue++):(u=p,0===le&&ve(yt)),u!==p?e=n=[n,u]:(ue=e,e=p)):(ue=e,e=p);t!==p?(e=ue,le++,(n=Je())===p&&(n=Ke()),le--,n!==p?(ue=e,e=void 0):e=p,e!==p?(oe=r,t=Mt(t),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&ve(jt));return r}())!==p&&je()!==p?(oe=r,r=s(n)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(p,0===le&&ve(o)),r}function Ce(){var r,t,e;return le++,r=ue,Ie()!==p?((t=Te())===p&&(t=null),t!==p&&He()!==p&&(e=$e())!==p&&je()!==p?(oe=r,r=d(t,e)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(p,0===le&&ve(f)),r}function xe(){var r,t,e,n,u,o,c;return r=ue,Ie()!==p?((t=Te())===p&&(t=null),t!==p&&He()!==p?((e=$e())===p&&(e=null),e!==p&&He()!==p?(123===h.charCodeAt(ue)?(n=g,ue++):(n=p,0===le&&ve(v)),n!==p&&He()!==p?((u=function(){var r,t,e;le++,r=ue,(t=function(){var r,t,e;if(le++,r=ue,t=[],(e=ye())!==p)for(;e!==p;)t.push(e),e=ye();else t=p;return t!==p&&(oe=r,t=w(t)),le--,(r=t)===p&&(t=p,0===le&&ve(y)),r}())!==p&&He()!==p?((e=Ye())===p&&(e=null),e!==p&&He()!==p?(oe=r,t=x(t,e),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&ve(C));return r}())===p&&(u=function(){var r,t,e,n,u,o;le++,r=ue,s=c=ue,h.substr(ue,4).toLowerCase()===L?(f=h.substr(ue,4),ue+=4):(f=p,0===le&&ve(N)),f===p&&(h.substr(ue,1).toLowerCase()===_?(f=h.charAt(ue),ue++):(f=p,0===le&&ve(q))),f!==p&&(oe=s,f=G()),(a=s=f)===p&&(i=ue,h.substr(ue,5).toLowerCase()===O?(l=h.substr(ue,5),ue+=5):(l=p,0===le&&ve(P)),l===p&&(h.substr(ue,1).toLowerCase()===D?(l=h.charAt(ue),ue++):(l=p,0===le&&ve(Q))),l!==p&&(oe=i,l=U()),a=i=l),a!==p&&(oe=c,a=R(a)),(t=c=a)!==p&&He()!==p?(e=ue,(n=He())!==p?((u=ke())===p&&(u=null),u!==p?((o=ke())===p&&(o=null),o!==p?e=n=[n,u,o]:(ue=e,e=p)):(ue=e,e=p)):(ue=e,e=p),e!==p&&(n=He())!==p?((u=Ye())===p&&(u=null),u!==p?(oe=r,t=M(t,e,u),r=t):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p);var c,a,i,l,s,f;le--,r===p&&(t=p,0===le&&ve(j));return r}())===p&&(u=function(){var r,t,e;le++,r=ue,(t=function(){var r,t,e;if(le++,r=ue,t=[],(e=we())!==p)for(;e!==p;)t.push(e),e=we();else t=p;return t!==p&&(oe=r,t=z(t)),le--,(r=t)===p&&(t=p,0===le&&ve(I)),r}())!==p&&He()!==p?((e=Ye())===p&&(e=null),e!==p&&He()!==p?(oe=r,t=H(t,e),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&ve(Y));return r}())===p&&(u=function(){var r,t,e,n;le++,r=ue,35===h.charCodeAt(ue)?(t=hr,ue++):(t=p,0===le&&ve(pr));t!==p&&He()!==p&&(e=function(){var r;le++,(r=function(){var r,t,e;if(le++,r=ue,t=[],(e=Ee())!==p)for(;e!==p;)t.push(e),e=Ee();else t=p;return t!==p&&(oe=r,t=z(t)),le--,(r=t)===p&&(t=p,0===le&&ve(kr)),r}())===p&&(r=Se());le--,r===p&&(p,0===le&&ve(Fr));return r}())!==p&&He()!==p?((n=Ye())===p&&(n=null),n!==p?(oe=r,t=wr(e,n),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&ve(yr));return r}())===p&&(u=function(){var r,t,e,n;le++,r=ue,(t=Qe())!==p&&He()!==p?((e=ke())===p&&(e=null),e!==p&&He()!==p?((n=Ye())===p&&(n=null),n!==p&&He()!==p?(oe=r,t=xr(t,e,n),r=t):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&ve(Cr));return r}())===p&&(u=function(){var r,t,e;le++,r=ue,(t=br)!==p&&He()!==p?((e=Ye())===p&&(e=null),e!==p&&He()!==p?(oe=r,t=mr(e),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&ve(Ar));return r}()),u!==p&&He()!==p?(125===h.charCodeAt(ue)?(o=A,ue++):(o=p,0===le&&ve(b)),o!==p&&He()!==p?((c=ze())===p&&(c=$e()),c===p&&(c=null),c!==p&&je()!==p?(oe=r,r=m(t,e,u,c)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p),r}function ye(){var r,t,e,n,u;return le++,r=ue,He()!==p?(61===h.charCodeAt(ue)?(t=k,ue++):(t=p,0===le&&ve(E)),t!==p&&He()!==p?((e=function(){var r,t,e,n;le++,r=ue,(t=_e())===p&&(t=null);if(t!==p)if(He()!==p){if(e=[],(n=Ne())!==p)for(;n!==p;)e.push(n),n=Ne();else e=p;e!==p?(oe=r,t=kt(t,e),r=t):(ue=r,r=p)}else ue=r,r=p;else ue=r,r=p;le--,r===p&&(t=p,0===le&&ve(Ft));return r}())===p&&(e=null),e!==p&&He()!==p?(h.substr(ue,2)===S?(n=S,ue+=2):(n=p,0===le&&ve(T)),n!==p&&He()!==p&&(u=function(){var r,t,e;if(le++,r=ue,t=[],(e=Le())!==p)for(;e!==p;)t.push(e),e=Le();else t=p;t!==p&&(oe=r,t=$t(t));le--,(r=t)===p&&(t=p,0===le&&ve(Tt));return r}())!==p&&He()!==p?(oe=r,r=$(e,u)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(p,0===le&&ve(F)),r}function we(){var r,t,e,n,u,o,c;return le++,r=ue,He()!==p?(t=ue,J.test(h.charAt(ue))?(e=h.charAt(ue),ue++):(e=p,0===le&&ve(K)),e!==p&&(n=He())!==p?((u=Fe())===p&&(u=null),u!==p&&(o=He())!==p&&(c=Qe())!==p?t=e=[e,n,u,o,c]:(ue=t,t=p)):(ue=t,t=p),t!==p?((e=ke())===p&&(e=null),e!==p&&(n=He())!==p?(oe=r,r=V(t,e)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(p,0===le&&ve(B)),r}function Fe(){var r,t,e,n,u;return le++,r=ue,37===h.charCodeAt(ue)?(t=X,ue++):(t=p,0===le&&ve(Z)),t!==p?(e=ue,rr.test(h.charAt(ue))?(n=h.charAt(ue),ue++):(n=p,0===le&&ve(tr)),n===p&&(n=null),n!==p&&(u=function(){var r,t,e,n,u,o;le++,h.substr(ue,3)===ur?(r=ur,ue+=3):(r=p,0===le&&ve(or));if(r===p)if(r=ue,cr.test(h.charAt(ue))?(t=h.charAt(ue),ue++):(t=p,0===le&&ve(ar)),t!==p)if(cr.test(h.charAt(ue))?(e=h.charAt(ue),ue++):(e=p,0===le&&ve(ar)),e===p&&(e=null),e!==p)if(ir.test(h.charAt(ue))?(n=h.charAt(ue),ue++):(n=p,0===le&&ve(lr)),n===p&&(n=null),n!==p){for(u=[],cr.test(h.charAt(ue))?(o=h.charAt(ue),ue++):(o=p,0===le&&ve(ar));o!==p;)u.push(o),cr.test(h.charAt(ue))?(o=h.charAt(ue),ue++):(o=p,0===le&&ve(ar));u!==p?(oe=r,t=sr(),r=t):(ue=r,r=p)}else ue=r,r=p;else ue=r,r=p;else ue=r,r=p;le--,r===p&&(t=p,0===le&&ve(nr));return r}())!==p?e=n=[n,u]:(ue=e,e=p),e!==p?(37===h.charCodeAt(ue)?(n=X,ue++):(n=p,0===le&&ve(Z)),n!==p?(oe=r,r=t=er(e)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(t=p,0===le&&ve(W)),r}function ke(){var r,t,e,n,u;return le++,r=ue,35===h.charCodeAt(ue)?(t=hr,ue++):(t=p,0===le&&ve(pr)),t!==p?(e=ue,le++,h.substr(ue,3)===dr?(n=dr,ue+=3):(n=p,0===le&&ve(gr)),le--,n===p?e=void 0:(ue=e,e=p),e!==p&&(n=He())!==p?((u=Qe())===p&&(u=null),u!==p?(oe=r,r=t=vr(u)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(t=p,0===le&&ve(fr)),r}function Ee(){var r,t,e,n,u;return le++,r=ue,He()!==p?(t=ue,J.test(h.charAt(ue))?(e=h.charAt(ue),ue++):(e=p,0===le&&ve(K)),e!==p?((n=Fe())===p&&(n=null),n!==p?((u=Se())===p&&(u=null),u!==p?t=e=[e,n,u]:(ue=t,t=p)):(ue=t,t=p)):(ue=t,t=p),t!==p&&(e=He())!==p?((n=ke())===p&&(n=null),n!==p&&(u=He())!==p?(oe=r,r=Sr(t,n)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(p,0===le&&ve(Er)),r}function Se(){var r;return le++,(r=function(){var r,t,e,n;le++,r=ue,(t=Ue())!==p?(58===h.charCodeAt(ue)?(e=jr,ue++):(e=p,0===le&&ve(Mr)),e!==p&&(n=Ue())!==p?(oe=r,t=Rr(t,n),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&ve($r));return r}())===p&&(r=function(){var r,t,e,n;le++,r=ue,(t=Ue())!==p?(h.substr(ue,2)===Nr?(e=Nr,ue+=2):(e=p,0===le&&ve(_r)),e!==p&&(n=Ue())!==p?(oe=r,t=qr(t,n),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&ve(Lr));return r}())===p&&(r=function(){var r,t;le++,r=ue,(t=Ue())!==p&&(oe=r,t=Or(t));le--,(r=t)===p&&(t=p,0===le&&ve(Gr));return r}()),le--,r===p&&(p,0===le&&ve(Tr)),r}function Te(){var r,t,e,n;if(le++,r=ue,h.substr(ue,2)===Dr?(t=Dr,ue+=2):(t=p,0===le&&ve(Qr)),t!==p){if(e=[],(n=Re())!==p)for(;n!==p;)e.push(n),n=Re();else e=p;e!==p?(h.substr(ue,2)===Dr?(n=Dr,ue+=2):(n=p,0===le&&ve(Qr)),n!==p?(oe=r,r=t=Ur(e)):(ue=r,r=p)):(ue=r,r=p)}else ue=r,r=p;return le--,r===p&&(t=p,0===le&&ve(Pr)),r}function $e(){var r,t;return le++,r=ue,(t=Qe())!==p&&(oe=r,t=Hr(t)),le--,(r=t)===p&&(t=p,0===le&&ve(Yr)),r}function je(){var r,t,e,n;if(le++,r=ue,(t=Je())!==p){if(e=[],(n=Me())!==p)for(;n!==p;)e.push(n),n=Me();else e=p;e!==p?r=t=[t,e]:(ue=r,r=p)}else ue=r,r=p;return r===p&&(r=ue,(t=Je())===p&&(t=null),t!==p&&(e=Ke())!==p?r=t=[t,e]:(ue=r,r=p)),le--,r===p&&(t=p,0===le&&ve(Ir)),r}function Me(){var r,t,e;for(le++,r=ue,t=[],e=Be();e!==p;)t.push(e),e=Be();return t!==p&&(e=Je())!==p?r=t=[t,e]:(ue=r,r=p),le--,r===p&&(t=p,0===le&&ve(zr)),r}function Re(){var r,t,e;return le++,t=r=ue,le++,h.substr(ue,2)===Dr?(e=Dr,ue+=2):(e=p,0===le&&ve(Qr)),le--,e===p?t=void 0:(ue=t,t=p),t!==p?((e=Oe())===p&&(e=Pe()),e!==p?(oe=r,r=t=Jr(e)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(t=p,0===le&&ve(Br)),r}function Le(){var r;return le++,(r=Pe())===p&&(r=Oe())===p&&(r=qe())===p&&(r=Ge()),le--,r===p&&(p,0===le&&ve(Kr)),r}function Ne(){var r;return le++,(r=function(){var r,t,e;le++,t=r=ue,le++,(e=Oe())===p&&(e=De())===p&&(h.substr(ue,2)===S?(e=S,ue+=2):(e=p,0===le&&ve(T)),e===p&&(e=je()));le--,e===p?t=void 0:(ue=t,t=p);t!==p?(h.length>ue?(e=h.charAt(ue),ue++):(e=p,0===le&&ve(yt)),e!==p?(oe=r,t=wt(),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&ve(xt));return r}())===p&&(r=Oe())===p&&(r=qe())===p&&(r=Ge()),le--,r===p&&(p,0===le&&ve(Kr)),r}function _e(){var r,t,e,n;return le++,r=ue,91===h.charCodeAt(ue)?(t=Wr,ue++):(t=p,0===le&&ve(Xr)),t!==p?(h.substr(ue,4)===Zr?(e=Zr,ue+=4):(e=p,0===le&&ve(rt)),e===p&&(h.substr(ue,8)===tt?(e=tt,ue+=8):(e=p,0===le&&ve(et)),e===p&&(h.substr(ue,5)===nt?(e=nt,ue+=5):(e=p,0===le&&ve(ut)),e===p&&(h.substr(ue,6)===ot?(e=ot,ue+=6):(e=p,0===le&&ve(ct))))),e!==p?(93===h.charCodeAt(ue)?(n=at,ue++):(n=p,0===le&&ve(it)),n!==p?(oe=r,r=t=lt(e)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(t=p,0===le&&ve(Vr)),r}function qe(){var r,t;return le++,r=ue,h.substr(ue,2)===ft?(t=ft,ue+=2):(t=p,0===le&&ve(ht)),t!==p&&(oe=r,t=pt()),le--,(r=t)===p&&(t=p,0===le&&ve(st)),r}function Ge(){var r;return le++,92===h.charCodeAt(ue)?(r=gt,ue++):(r=p,0===le&&ve(vt)),le--,r===p&&(p,0===le&&ve(dt)),r}function Oe(){var r,t;return le++,r=ue,Ge()!==p?((t=Ge())===p&&(58===h.charCodeAt(ue)?(t=jr,ue++):(t=p,0===le&&ve(Mr)),t===p&&(126===h.charCodeAt(ue)?(t=bt,ue++):(t=p,0===le&&ve(mt)),t===p&&(61===h.charCodeAt(ue)?(t=k,ue++):(t=p,0===le&&ve(E)),t===p&&(35===h.charCodeAt(ue)?(t=hr,ue++):(t=p,0===le&&ve(pr)),t===p&&(91===h.charCodeAt(ue)?(t=Wr,ue++):(t=p,0===le&&ve(Xr)),t===p&&(93===h.charCodeAt(ue)?(t=at,ue++):(t=p,0===le&&ve(it)),t===p&&(123===h.charCodeAt(ue)?(t=g,ue++):(t=p,0===le&&ve(v)),t===p&&(125===h.charCodeAt(ue)?(t=A,ue++):(t=p,0===le&&ve(b)))))))))),t!==p?(oe=r,r=Ct(t)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(p,0===le&&ve(At)),r}function Pe(){var r,t,e;return le++,t=r=ue,le++,(e=Oe())===p&&(e=De())===p&&(e=je()),le--,e===p?t=void 0:(ue=t,t=p),t!==p?(h.length>ue?(e=h.charAt(ue),ue++):(e=p,0===le&&ve(yt)),e!==p?(oe=r,r=t=wt()):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(t=p,0===le&&ve(xt)),r}function De(){var r;return 61===h.charCodeAt(ue)?(r=k,ue++):(r=p,0===le&&ve(E)),r===p&&(126===h.charCodeAt(ue)?(r=bt,ue++):(r=p,0===le&&ve(mt)),r===p&&(35===h.charCodeAt(ue)?(r=hr,ue++):(r=p,0===le&&ve(pr)),r===p&&(123===h.charCodeAt(ue)?(r=g,ue++):(r=p,0===le&&ve(v)),r===p&&(125===h.charCodeAt(ue)?(r=A,ue++):(r=p,0===le&&ve(b)),r===p&&(92===h.charCodeAt(ue)?(r=gt,ue++):(r=p,0===le&&ve(vt)),r===p&&(58===h.charCodeAt(ue)?(r=jr,ue++):(r=p,0===le&&ve(Mr)))))))),r}function Qe(){var r,t,e,n;if(le++,r=ue,(t=_e())===p&&(t=null),t!==p)if(He()!==p){if(e=[],(n=Le())!==p)for(;n!==p;)e.push(n),n=Le();else e=p;e!==p?(oe=r,r=t=St(t,e)):(ue=r,r=p)}else ue=r,r=p;else ue=r,r=p;return le--,r===p&&(t=p,0===le&&ve(Et)),r}function Ue(){var r,t,e;if(r=ue,t=[],cr.test(h.charAt(ue))?(e=h.charAt(ue),ue++):(e=p,0===le&&ve(ar)),e!==p)for(;e!==p;)t.push(e),cr.test(h.charAt(ue))?(e=h.charAt(ue),ue++):(e=p,0===le&&ve(ar));else t=p;return t!==p?((e=function(){var r,t,e,n,u;r=ue,46===h.charCodeAt(ue)?(t=Lt,ue++):(t=p,0===le&&ve(Nt));if(t!==p)if(e=ue,le++,46===h.charCodeAt(ue)?(n=Lt,ue++):(n=p,0===le&&ve(Nt)),le--,n===p?e=void 0:(ue=e,e=p),e!==p){for(n=[],cr.test(h.charAt(ue))?(u=h.charAt(ue),ue++):(u=p,0===le&&ve(ar));u!==p;)n.push(u),cr.test(h.charAt(ue))?(u=h.charAt(ue),ue++):(u=p,0===le&&ve(ar));n!==p?(oe=r,t=_t(n),r=t):(ue=r,r=p)}else ue=r,r=p;else ue=r,r=p;return r}())===p&&(e=null),e!==p?(oe=r,r=t=Rt(t,e)):(ue=r,r=p)):(ue=r,r=p),r}function Ye(){var r,t,e;return r=ue,h.substr(ue,4)===qt?(t=qt,ue+=4):(t=p,0===le&&ve(Gt)),t!==p&&He()!==p&&(e=Qe())!==p&&He()!==p?(oe=r,r=t=Ot(e)):(ue=r,r=p),r}function He(){var r,t,e,n,u;for(le++,r=[],(t=Be())===p&&(t=ue,(e=Je())!==p?(n=ue,le++,u=Me(),le--,u===p?n=void 0:(ue=n,n=p),n!==p?t=e=[e,n]:(ue=t,t=p)):(ue=t,t=p));t!==p;)r.push(t),(t=Be())===p&&(t=ue,(e=Je())!==p?(n=ue,le++,u=Me(),le--,u===p?n=void 0:(ue=n,n=p),n!==p?t=e=[e,n]:(ue=t,t=p)):(ue=t,t=p));return le--,r===p&&(t=p,0===le&&ve(Pt)),r}function Ie(){var r,t;for(le++,r=[],(t=ze())===p&&(t=Je())===p&&(t=Be());t!==p;)r.push(t),(t=ze())===p&&(t=Je())===p&&(t=Be());return le--,r===p&&(t=p,0===le&&ve(Dt)),r}function ze(){var r,t,e,n,u,o;if(le++,r=ue,h.substr(ue,2)===Ut?(t=Ut,ue+=2):(t=p,0===le&&ve(Yt)),t!==p){for(e=[],u=n=ue,le++,o=Je(),le--,o===p?u=void 0:(ue=u,u=p),u!==p?(h.length>ue?(o=h.charAt(ue),ue++):(o=p,0===le&&ve(yt)),o!==p?n=u=[u,o]:(ue=n,n=p)):(ue=n,n=p);n!==p;)e.push(n),u=n=ue,le++,o=Je(),le--,o===p?u=void 0:(ue=u,u=p),u!==p?(h.length>ue?(o=h.charAt(ue),ue++):(o=p,0===le&&ve(yt)),o!==p?n=u=[u,o]:(ue=n,n=p)):(ue=n,n=p);e!==p?(n=ue,le++,(u=Je())===p&&(u=Ke()),le--,u!==p?(ue=n,n=void 0):n=p,n!==p?(oe=r,r=t=Ht()):(ue=r,r=p)):(ue=r,r=p)}else ue=r,r=p;return le--,r===p&&(t=p,0===le&&ve(Qt)),r}function Be(){var r;return le++,32===h.charCodeAt(ue)?(r=zt,ue++):(r=p,0===le&&ve(Bt)),r===p&&(9===h.charCodeAt(ue)?(r=Jt,ue++):(r=p,0===le&&ve(Kt))),le--,r===p&&(p,0===le&&ve(It)),r}function Je(){var r;return le++,h.substr(ue,2)===Wt?(r=Wt,ue+=2):(r=p,0===le&&ve(Xt)),r===p&&(10===h.charCodeAt(ue)?(r=Zt,ue++):(r=p,0===le&&ve(re)),r===p&&(13===h.charCodeAt(ue)?(r=te,ue++):(r=p,0===le&&ve(ee)))),le--,r===p&&(p,0===le&&ve(Vt)),r}function Ke(){var r,t,e;return t=r=ue,le++,h.length>ue?(e=h.charAt(ue),ue++):(e=p,0===le&&ve(yt)),le--,e===p?t=void 0:(ue=t,t=p),t!==p&&(oe=r,t=ne()),r=t}var Ve="moodle",We=Ve;function Xe(r){return r.replace(/\s\s+/g," ")}function Ze(){return We}function rn(){We=Ve}if((t=n())!==p&&ue===h.length)return t;throw t!==p&&ue<h.length&&ve({type:"end"}),Ae(ie,ae<h.length?h.charAt(ae):null,ae<h.length?ge(ae,ae+1):ge(ae,ae))}peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(r,t){var e,o={literal:function(r){return'"'+u(r.text)+'"'},class:function(r){var t,e="";for(t=0;t<r.parts.length;t++)e+=r.parts[t]instanceof Array?c(r.parts[t][0])+"-"+c(r.parts[t][1]):c(r.parts[t]);return"["+(r.inverted?"^":"")+e+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function u(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}function c(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}return"Expected "+function(r){var t,e,n,u=new Array(r.length);for(t=0;t<r.length;t++)u[t]=(n=r[t],o[n.type](n));if(u.sort(),0<u.length){for(e=t=1;t<u.length;t++)u[t-1]!==u[t]&&(u[e]=u[t],e++);u.length=e}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(r)+" but "+((e=t)?'"'+u(e)+'"':"end of input")+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse};
