!function(r){"use strict";function t(r,e,n,u){this.message=r,this.expected=e,this.found=n,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}!function(r,t){function e(){this.constructor=r}e.prototype=t.prototype,r.prototype=new e}(t,Error),t.buildMessage=function(r,t){var e={literal:function(r){return'"'+u(r.text)+'"'},class:function(r){var t,e="";for(t=0;t<r.parts.length;t++)e+=r.parts[t]instanceof Array?a(r.parts[t][0])+"-"+a(r.parts[t][1]):a(r.parts[t]);return"["+(r.inverted?"^":"")+e+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function u(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}function a(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}return"Expected "+function(r){var t,n,u,a=new Array(r.length);for(t=0;t<r.length;t++)a[t]=(u=r[t],e[u.type](u));if(a.sort(),a.length>0){for(t=1,n=1;t<a.length;t++)a[t-1]!==a[t]&&(a[n]=a[t],n++);a.length=n}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(r)+" but "+function(r){return r?'"'+u(r)+'"':"end of input"}(t)+" found."},r.giftParser={SyntaxError:t,parse:function(r,e){e=void 0!==e?e:{};var n,u={},a={GIFTQuestions:bt},c=bt,o=dt("Category"),i=ht("$",!1),l="CATEGORY:",s=ht("CATEGORY:",!1),f=dt("Description"),h=ht("{",!1),p=ht("}",!1),d=function(r,t,e,n){var u=null!==n,a=t?t.text+(u?" ":""):"",c=t&&t.format||n&&n.format||"moodle",o=a+(u?"_____ "+n.text:""),i={type:e.type,title:r,stem:{format:c,text:o},hasEmbeddedAnswers:u};return i=function(r,t){switch(r.globalFeedback=t.globalFeedback,r.type){case"TF":r.isTrue=t.isTrue,r.incorrectFeedback=t.feedback[1],r.correctFeedback=t.feedback[2];break;case"MC":case"Numerical":case"Short":r.choices=t.choices;break;case"Matching":r.matchPairs=t.matchPairs}"MC"==r.type&&function(r){for(var t=!0,e=0;e<r.length;e++)t&=r[e].isCorrect;return t}(r.choices)&&(r.type="Short");return r.id=Wt,r.tags=Xt,r}(i,e),ne(),i},A=dt("{= match1 -> Match1\n...}"),v=dt("matches"),g=dt("match"),m=ht("=",!1),b="->",C=ht("->",!1),x=dt("{T} or {F} or {TRUE} or {FALSE}"),y="TRUE",F=ht("TRUE",!1),w=ht("T",!1),k="FALSE",E=ht("FALSE",!1),T=ht("F",!1),S=dt("{=correct choice ~incorrect choice ... }"),j=dt("Choices"),M=dt("Choice"),R=/^[=~]/,N=pt(["=","~"],!1,!1),_=dt("(weight)"),L=ht("%",!1),P=/^[\-]/,U=pt(["-"],!1,!1),q=dt("(percent)"),G="100",O=ht("100",!1),D=/^[0-9]/,Q=pt([["0","9"]],!1,!1),Y=/^[.]/,$=pt(["."],!1,!1),H=dt("(feedback)"),I="#",z=ht("#",!1),B=ht("###",!1),J=dt("Essay question { ... }"),K=dt("Single short answer { ... }"),V=dt("{#... }"),W=dt("Numerical Answers"),X=dt("Multiple Numerical Choices"),Z=dt("Numerical Choice"),rr=dt("Single numeric answer"),tr=dt("(number with range)"),er=":",nr=ht(":",!1),ur=dt("(number with high-low)"),ar="..",cr=ht("..",!1),or=dt("(number answer)"),ir=dt(":: Title ::"),lr="::",sr=ht("::",!1),fr=dt("Question stem"),hr=function(r){var t;return t=r.format,re=t,r},pr=dt("(blank lines separator)"),dr=dt("(blank lines)"),Ar=dt("blank line"),vr=dt("(Title text)"),gr=dt("(text character)"),mr=dt("format"),br=ht("[",!1),Cr="html",xr=ht("html",!1),yr="markdown",Fr=ht("markdown",!1),wr="plain",kr=ht("plain",!1),Er="moodle",Tr=ht("moodle",!1),Sr=ht("]",!1),jr=dt("(escape character)"),Mr=ht("\\",!1),Rr=dt("escape sequence"),Nr=ht("~",!1),_r=dt(""),Lr={type:"any"},Pr=function(){return ft()},Ur=dt("(formatted text excluding '->'"),qr=function(r,t){return{format:null!==r?r:ee(),text:"html"!==r?te(t.join("").trim()):t.join("").replace(/\r\n/g,"\n")}},Gr=dt("(formatted text)"),Or=dt("(unformatted text)"),Dr=dt("(category text)"),Qr=".",Yr=ht(".",!1),$r="####",Hr=ht("####",!1),Ir=dt("(single line whitespace)"),zr=dt("(multiple line whitespace)"),Br=ht(" ",!1),Jr=dt("(comment)"),Kr="//",Vr=ht("//",!1),Wr=/^[^\n\r]/,Xr=pt(["\n","\r"],!0,!1),Zr=dt("(space)"),rt=ht("\t",!1),tt=dt("(end of line)"),et=ht("\r\n",!1),nt=ht("\n",!1),ut=ht("\r",!1),at=0,ct=0,ot=[{line:1,column:1}],it=0,lt=[],st=0;if("startRule"in e){if(!(e.startRule in a))throw new Error("Can't start parsing from rule \""+e.startRule+'".');c=a[e.startRule]}function ft(){return r.substring(ct,at)}function ht(r,t){return{type:"literal",text:r,ignoreCase:t}}function pt(r,t,e){return{type:"class",parts:r,inverted:t,ignoreCase:e}}function dt(r){return{type:"other",description:r}}function At(t){var e,n=ot[t];if(n)return n;for(e=t-1;!ot[e];)e--;for(n={line:(n=ot[e]).line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return ot[t]=n,n}function vt(r,t){var e=At(r),n=At(t);return{start:{offset:r,line:e.line,column:e.column},end:{offset:t,line:n.line,column:n.column}}}function gt(r){at<it||(at>it&&(it=at,lt=[]),lt.push(r))}function mt(r,e,n){return new t(t.buildMessage(r,e),r,e,n)}function bt(){var r,t,e;if(r=at,t=[],(e=Ct())===u&&(e=xt())===u&&(e=yt()),e!==u)for(;e!==u;)t.push(e),(e=Ct())===u&&(e=xt())===u&&(e=yt());else t=u;return t!==u&&(e=Ht())!==u&&It()!==u?(ct=r,r=t=t):(at=r,r=u),r}function Ct(){var t,e,n,a;return st++,t=at,zt()!==u&&It()!==u?(36===r.charCodeAt(at)?(e="$",at++):(e=u,0===st&&gt(i)),e!==u?(r.substr(at,9)===l?(n=l,at+=9):(n=u,0===st&&gt(s)),n!==u&&Ht()!==u?(a=function(){var t,e,n,a,c;st++,t=at,e=[],n=at,a=at,st++,c=Kt(),st--,c===u?a=void 0:(at=a,a=u);a!==u?(r.length>at?(c=r.charAt(at),at++):(c=u,0===st&&gt(Lr)),c!==u?n=a=[a,c]:(at=n,n=u)):(at=n,n=u);for(;n!==u;)e.push(n),n=at,a=at,st++,c=Kt(),st--,c===u?a=void 0:(at=a,a=u),a!==u?(r.length>at?(c=r.charAt(at),at++):(c=u,0===st&&gt(Lr)),c!==u?n=a=[a,c]:(at=n,n=u)):(at=n,n=u);e!==u?(n=at,st++,(a=Kt())===u&&(a=Vt()),st--,a!==u?(at=n,n=void 0):n=u,n!==u?(ct=t,t=e=e.flat().join("")):(at=t,t=u)):(at=t,t=u);st--,t===u&&(e=u,0===st&&gt(Dr));return t}(),a!==u&&Rt()!==u?(ct=t,t={type:"Category",title:a}):(at=t,t=u)):(at=t,t=u)):(at=t,t=u)):(at=t,t=u),st--,t===u&&(u,0===st&&gt(o)),t}function xt(){var r,t,e,n,a;if(st++,r=at,(t=zt())!==u)if(It()!==u){for(e=[],n=Bt();n!==u;)e.push(n),n=Bt();e!==u?((n=jt())===u&&(n=null),n!==u&&Ht()!==u&&(a=Mt())!==u&&Rt()!==u?(ct=r,t=function(r,t){var e={id:Wt,tags:Xt,type:"Description",title:r,stem:t,hasEmbeddedAnswers:!1};return ne(),Wt=null,Xt=null,e}(n,a),r=t):(at=r,r=u)):(at=r,r=u)}else at=r,r=u;else at=r,r=u;return st--,r===u&&(t=u,0===st&&gt(f)),r}function yt(){var t,e,n,a,c,o,i,l;if(t=at,zt()!==u)if(It()!==u){for(e=[],n=Bt();n!==u;)e.push(n),n=Bt();e!==u?((n=jt())===u&&(n=null),n!==u&&Ht()!==u?((a=Mt())===u&&(a=null),a!==u&&Ht()!==u?(123===r.charCodeAt(at)?(c="{",at++):(c=u,0===st&&gt(h)),c!==u&&Ht()!==u?(o=function(){var r,t,e;st++,r=at,t=function(){var r,t,e;if(st++,r=at,t=[],(e=Ft())!==u)for(;e!==u;)t.push(e),e=Ft();else t=u;t!==u&&(ct=r,t=t);st--,(r=t)===u&&(t=u,0===st&&gt(v));return r}(),t!==u&&Ht()!==u?((e=$t())===u&&(e=null),e!==u&&Ht()!==u?(ct=r,r=t={type:"Matching",matchPairs:t,globalFeedback:e}):(at=r,r=u)):(at=r,r=u);st--,r===u&&(t=u,0===st&&gt(A));return r}(),o===u&&(o=function(){var t,e,n,a,c,o;st++,t=at,e=function(){var t,e;t=at,e=function(){var t,e;t=at,r.substr(at,4)===y?(e=y,at+=4):(e=u,0===st&&gt(F));e===u&&(84===r.charCodeAt(at)?(e="T",at++):(e=u,0===st&&gt(w)));e!==u&&(ct=t,e=!0);return t=e}(),e===u&&(e=function(){var t,e;t=at,r.substr(at,5)===k?(e=k,at+=5):(e=u,0===st&&gt(E));e===u&&(70===r.charCodeAt(at)?(e="F",at++):(e=u,0===st&&gt(T)));e!==u&&(ct=t,e=!1);return t=e}());e!==u&&(ct=t,e=e);return t=e}(),e!==u&&Ht()!==u?(n=at,(a=Ht())!==u?((c=Et())===u&&(c=null),c!==u?((o=Et())===u&&(o=null),o!==u?n=a=[a,c,o]:(at=n,n=u)):(at=n,n=u)):(at=n,n=u),n!==u&&(a=Ht())!==u?((c=$t())===u&&(c=null),c!==u?(ct=t,t=e={type:"TF",isTrue:e,feedback:n,globalFeedback:c}):(at=t,t=u)):(at=t,t=u)):(at=t,t=u);st--,t===u&&(e=u,0===st&&gt(x));return t}(),o===u&&(o=function(){var r,t,e;st++,r=at,t=function(){var r,t,e;if(st++,r=at,t=[],(e=wt())!==u)for(;e!==u;)t.push(e),e=wt();else t=u;t!==u&&(ct=r,t=t);st--,(r=t)===u&&(t=u,0===st&&gt(j));return r}(),t!==u&&Ht()!==u?((e=$t())===u&&(e=null),e!==u&&Ht()!==u?(ct=r,r=t={type:"MC",choices:t,globalFeedback:e}):(at=r,r=u)):(at=r,r=u);st--,r===u&&(t=u,0===st&&gt(S));return r}(),o===u&&(o=function(){var t,e,n,a;st++,t=at,35===r.charCodeAt(at)?(e=I,at++):(e=u,0===st&&gt(z));e!==u&&Ht()!==u?(n=function(){var r;st++,r=function(){var r,t,e;if(st++,r=at,t=[],(e=Tt())!==u)for(;e!==u;)t.push(e),e=Tt();else t=u;t!==u&&(ct=r,t=t);st--,(r=t)===u&&(t=u,0===st&&gt(X));return r}(),r===u&&(r=St());st--,r===u&&(u,0===st&&gt(W));return r}(),n!==u&&Ht()!==u?((a=$t())===u&&(a=null),a!==u?(ct=t,t=e={type:"Numerical",choices:n,globalFeedback:a}):(at=t,t=u)):(at=t,t=u)):(at=t,t=u);st--,t===u&&(e=u,0===st&&gt(V));return t}(),o===u&&(o=function(){var r,t,e,n;st++,r=at,(t=Qt())!==u&&Ht()!==u?((e=Et())===u&&(e=null),e!==u&&Ht()!==u?((n=$t())===u&&(n=null),n!==u&&Ht()!==u?(ct=r,a=n,(c=[]).push({isCorrect:!0,text:t,feedback:e,weight:null}),r=t={type:"Short",choices:c,globalFeedback:a}):(at=r,r=u)):(at=r,r=u)):(at=r,r=u);var a,c;st--,r===u&&(t=u,0===st&&gt(K));return r}(),o===u&&(o=function(){var r,t;st++,r=at,""!==u&&Ht()!==u?((t=$t())===u&&(t=null),t!==u&&Ht()!==u?(ct=r,r={type:"Essay",globalFeedback:t}):(at=r,r=u)):(at=r,r=u);st--,r===u&&(u,0===st&&gt(J));return r}()))))),o!==u&&Ht()!==u?(125===r.charCodeAt(at)?(i="}",at++):(i=u,0===st&&gt(p)),i!==u&&Ht()!==u?(l=function(){var t,e,n,a;st++,t=at,r.substr(at,2)===Kr?(e=Kr,at+=2):(e=u,0===st&&gt(Vr));if(e!==u){for(n=[],Wr.test(r.charAt(at))?(a=r.charAt(at),at++):(a=u,0===st&&gt(Xr));a!==u;)n.push(a),Wr.test(r.charAt(at))?(a=r.charAt(at),at++):(a=u,0===st&&gt(Xr));n!==u?(ct=t,t=e=null):(at=t,t=u)}else at=t,t=u;st--,t===u&&(e=u,0===st&&gt(Jr));return t}(),l===u&&(l=Mt()),l===u&&(l=null),l!==u&&Rt()!==u?(ct=t,t=d(n,a,o,l)):(at=t,t=u)):(at=t,t=u)):(at=t,t=u)):(at=t,t=u)):(at=t,t=u)):(at=t,t=u)):(at=t,t=u)}else at=t,t=u;else at=t,t=u;return t}function Ft(){var t,e,n,a,c,o,i;return st++,t=at,Ht()!==u?(61===r.charCodeAt(at)?(e="=",at++):(e=u,0===st&&gt(m)),e!==u&&Ht()!==u?(n=function(){var r,t,e,n;st++,r=at,(t=Ut())===u&&(t=null);if(t!==u)if(Ht()!==u){if(e=[],(n=Pt())!==u)for(;n!==u;)e.push(n),n=Pt();else e=u;e!==u?(ct=r,r=t=qr(t,e)):(at=r,r=u)}else at=r,r=u;else at=r,r=u;st--,r===u&&(t=u,0===st&&gt(Ur));return r}(),n===u&&(n=null),n!==u&&Ht()!==u?(r.substr(at,2)===b?(a=b,at+=2):(a=u,0===st&&gt(C)),a!==u&&Ht()!==u?(c=function(){var r,t,e;if(st++,r=at,t=[],(e=Lt())!==u)for(;e!==u;)t.push(e),e=Lt();else t=u;t!==u&&(ct=r,t=te(t.join("").trim()));st--,(r=t)===u&&(t=u,0===st&&gt(Or));return r}(),c!==u&&Ht()!==u?(ct=t,i=c,t={subquestion:{format:null!==(o=n)?o.format:ee(),text:null!==o?o.text:""},subanswer:i}):(at=t,t=u)):(at=t,t=u)):(at=t,t=u)):(at=t,t=u)):(at=t,t=u),st--,t===u&&(u,0===st&&gt(g)),t}function wt(){var t,e,n,a,c,o,i,l,s,f,h;return st++,t=at,Ht()!==u?(e=at,R.test(r.charAt(at))?(n=r.charAt(at),at++):(n=u,0===st&&gt(N)),n!==u&&(a=Ht())!==u?((c=kt())===u&&(c=null),c!==u&&(o=Ht())!==u&&(i=Qt())!==u?e=n=[n,a,c,o,i]:(at=e,e=u)):(at=e,e=u),e!==u?((n=Et())===u&&(n=null),n!==u&&(a=Ht())!==u?(ct=t,s=n,f=(l=e)[2],h=l[4],t={isCorrect:"="==l[0],weight:f,text:h,feedback:s}):(at=t,t=u)):(at=t,t=u)):(at=t,t=u),st--,t===u&&(u,0===st&&gt(M)),t}function kt(){var t,e,n,a,c;return st++,t=at,37===r.charCodeAt(at)?(e="%",at++):(e=u,0===st&&gt(L)),e!==u?(n=at,P.test(r.charAt(at))?(a=r.charAt(at),at++):(a=u,0===st&&gt(U)),a===u&&(a=null),a!==u?(c=function(){var t,e,n,a,c,o;st++,r.substr(at,3)===G?(t=G,at+=3):(t=u,0===st&&gt(O));if(t===u)if(t=at,D.test(r.charAt(at))?(e=r.charAt(at),at++):(e=u,0===st&&gt(Q)),e!==u)if(D.test(r.charAt(at))?(n=r.charAt(at),at++):(n=u,0===st&&gt(Q)),n===u&&(n=null),n!==u)if(Y.test(r.charAt(at))?(a=r.charAt(at),at++):(a=u,0===st&&gt($)),a===u&&(a=null),a!==u){for(c=[],D.test(r.charAt(at))?(o=r.charAt(at),at++):(o=u,0===st&&gt(Q));o!==u;)c.push(o),D.test(r.charAt(at))?(o=r.charAt(at),at++):(o=u,0===st&&gt(Q));c!==u?(ct=t,t=e=ft()):(at=t,t=u)}else at=t,t=u;else at=t,t=u;else at=t,t=u;st--,t===u&&(e=u,0===st&&gt(q));return t}(),c!==u?n=a=[a,c]:(at=n,n=u)):(at=n,n=u),n!==u?(37===r.charCodeAt(at)?(a="%",at++):(a=u,0===st&&gt(L)),a!==u?(ct=t,t=e=parseFloat(n.join(""))):(at=t,t=u)):(at=t,t=u)):(at=t,t=u),st--,t===u&&(e=u,0===st&&gt(_)),t}function Et(){var t,e,n,a,c;return st++,t=at,35===r.charCodeAt(at)?(e=I,at++):(e=u,0===st&&gt(z)),e!==u?(n=at,st++,"###"===r.substr(at,3)?(a="###",at+=3):(a=u,0===st&&gt(B)),st--,a===u?n=void 0:(at=n,n=u),n!==u&&(a=Ht())!==u?((c=Qt())===u&&(c=null),c!==u?(ct=t,t=e=c):(at=t,t=u)):(at=t,t=u)):(at=t,t=u),st--,t===u&&(e=u,0===st&&gt(H)),t}function Tt(){var t,e,n,a,c,o,i,l,s,f;return st++,t=at,Ht()!==u?(e=at,R.test(r.charAt(at))?(n=r.charAt(at),at++):(n=u,0===st&&gt(N)),n!==u?((a=kt())===u&&(a=null),a!==u?((c=St())===u&&(c=null),c!==u?e=n=[n,a,c]:(at=e,e=u)):(at=e,e=u)):(at=e,e=u),e!==u&&(n=Ht())!==u?((a=Et())===u&&(a=null),a!==u&&(c=Ht())!==u?(ct=t,i=a,l=(o=e)[0],s=o[1],f=o[2],t={isCorrect:"="==l,weight:s,text:null!==f?f:{format:ee(),text:"*"},feedback:i}):(at=t,t=u)):(at=t,t=u)):(at=t,t=u),st--,t===u&&(u,0===st&&gt(Z)),t}function St(){var t;return st++,t=function(){var t,e,n,a;st++,t=at,(e=Yt())!==u?(58===r.charCodeAt(at)?(n=er,at++):(n=u,0===st&&gt(nr)),n!==u&&(a=Yt())!==u?(ct=t,t=e={type:"range",number:e,range:a}):(at=t,t=u)):(at=t,t=u);st--,t===u&&(e=u,0===st&&gt(tr));return t}(),t===u&&(t=function(){var t,e,n,a;st++,t=at,(e=Yt())!==u?(r.substr(at,2)===ar?(n=ar,at+=2):(n=u,0===st&&gt(cr)),n!==u&&(a=Yt())!==u?(ct=t,t=e={type:"high-low",numberHigh:a,numberLow:e}):(at=t,t=u)):(at=t,t=u);st--,t===u&&(e=u,0===st&&gt(ur));return t}(),t===u&&(t=function(){var r,t;st++,r=at,(t=Yt())!==u&&(ct=r,t={type:"simple",number:t});st--,(r=t)===u&&(t=u,0===st&&gt(or));return r}())),st--,t===u&&(u,0===st&&gt(rr)),t}function jt(){var t,e,n,a;if(st++,t=at,r.substr(at,2)===lr?(e=lr,at+=2):(e=u,0===st&&gt(sr)),e!==u){if(n=[],(a=_t())!==u)for(;a!==u;)n.push(a),a=_t();else n=u;n!==u?(r.substr(at,2)===lr?(a=lr,at+=2):(a=u,0===st&&gt(sr)),a!==u?(ct=t,t=e=n.join("")):(at=t,t=u)):(at=t,t=u)}else at=t,t=u;return st--,t===u&&(e=u,0===st&&gt(ir)),t}function Mt(){var r,t;return st++,r=at,(t=Qt())!==u&&(ct=r,t=hr(t)),st--,(r=t)===u&&(t=u,0===st&&gt(fr)),r}function Rt(){var r,t,e;return st++,r=function(){var r,t,e,n;if(st++,r=at,(t=Kt())!==u){if(e=[],(n=Nt())!==u)for(;n!==u;)e.push(n),n=Nt();else e=u;e!==u?r=t=[t,e]:(at=r,r=u)}else at=r,r=u;st--,r===u&&(t=u,0===st&&gt(dr));return r}(),r===u&&(r=at,(t=Kt())===u&&(t=null),t!==u&&(e=Vt())!==u?r=t=[t,e]:(at=r,r=u)),st--,r===u&&(t=u,0===st&&gt(pr)),r}function Nt(){var r,t,e;for(st++,r=at,t=[],e=Jt();e!==u;)t.push(e),e=Jt();return t!==u&&(e=Kt())!==u?r=t=[t,e]:(at=r,r=u),st--,r===u&&(t=u,0===st&&gt(Ar)),r}function _t(){var t,e,n;return st++,t=at,e=at,st++,r.substr(at,2)===lr?(n=lr,at+=2):(n=u,0===st&&gt(sr)),st--,n===u?e=void 0:(at=e,e=u),e!==u?((n=Gt())===u&&(n=Ot()),n!==u?(ct=t,t=e=n):(at=t,t=u)):(at=t,t=u),st--,t===u&&(e=u,0===st&&gt(vr)),t}function Lt(){var r;return st++,(r=Ot())===u&&(r=Gt())===u&&(r=qt()),st--,r===u&&(u,0===st&&gt(gr)),r}function Pt(){var t;return st++,t=function(){var t,e,n;st++,t=at,e=at,st++,(n=Gt())===u&&(n=Dt())===u&&(r.substr(at,2)===b?(n=b,at+=2):(n=u,0===st&&gt(C)),n===u&&(n=Rt()));st--,n===u?e=void 0:(at=e,e=u);e!==u?(r.length>at?(n=r.charAt(at),at++):(n=u,0===st&&gt(Lr)),n!==u?(ct=t,t=e=Pr()):(at=t,t=u)):(at=t,t=u);st--,t===u&&(e=u,0===st&&gt(_r));return t}(),t===u&&(t=Gt())===u&&(t=qt()),st--,t===u&&(u,0===st&&gt(gr)),t}function Ut(){var t,e,n,a;return st++,t=at,91===r.charCodeAt(at)?(e="[",at++):(e=u,0===st&&gt(br)),e!==u?(r.substr(at,4)===Cr?(n=Cr,at+=4):(n=u,0===st&&gt(xr)),n===u&&(r.substr(at,8)===yr?(n=yr,at+=8):(n=u,0===st&&gt(Fr)),n===u&&(r.substr(at,5)===wr?(n=wr,at+=5):(n=u,0===st&&gt(kr)),n===u&&(r.substr(at,6)===Er?(n=Er,at+=6):(n=u,0===st&&gt(Tr))))),n!==u?(93===r.charCodeAt(at)?(a="]",at++):(a=u,0===st&&gt(Sr)),a!==u?(ct=t,t=e=n):(at=t,t=u)):(at=t,t=u)):(at=t,t=u),st--,t===u&&(e=u,0===st&&gt(mr)),t}function qt(){var t;return st++,92===r.charCodeAt(at)?(t="\\",at++):(t=u,0===st&&gt(Mr)),st--,t===u&&(u,0===st&&gt(jr)),t}function Gt(){var t,e;return st++,t=at,qt()!==u?((e=qt())===u&&(58===r.charCodeAt(at)?(e=er,at++):(e=u,0===st&&gt(nr)),e===u&&(126===r.charCodeAt(at)?(e="~",at++):(e=u,0===st&&gt(Nr)),e===u&&(61===r.charCodeAt(at)?(e="=",at++):(e=u,0===st&&gt(m)),e===u&&(35===r.charCodeAt(at)?(e=I,at++):(e=u,0===st&&gt(z)),e===u&&(91===r.charCodeAt(at)?(e="[",at++):(e=u,0===st&&gt(br)),e===u&&(93===r.charCodeAt(at)?(e="]",at++):(e=u,0===st&&gt(Sr)),e===u&&(123===r.charCodeAt(at)?(e="{",at++):(e=u,0===st&&gt(h)),e===u&&(125===r.charCodeAt(at)?(e="}",at++):(e=u,0===st&&gt(p)))))))))),e!==u?(ct=t,t=e):(at=t,t=u)):(at=t,t=u),st--,t===u&&(u,0===st&&gt(Rr)),t}function Ot(){var t,e,n;return st++,t=at,e=at,st++,(n=Gt())===u&&(n=Dt())===u&&(n=Rt()),st--,n===u?e=void 0:(at=e,e=u),e!==u?(r.length>at?(n=r.charAt(at),at++):(n=u,0===st&&gt(Lr)),n!==u?(ct=t,t=e=Pr()):(at=t,t=u)):(at=t,t=u),st--,t===u&&(e=u,0===st&&gt(_r)),t}function Dt(){var t;return 61===r.charCodeAt(at)?(t="=",at++):(t=u,0===st&&gt(m)),t===u&&(126===r.charCodeAt(at)?(t="~",at++):(t=u,0===st&&gt(Nr)),t===u&&(35===r.charCodeAt(at)?(t=I,at++):(t=u,0===st&&gt(z)),t===u&&(123===r.charCodeAt(at)?(t="{",at++):(t=u,0===st&&gt(h)),t===u&&(125===r.charCodeAt(at)?(t="}",at++):(t=u,0===st&&gt(p)),t===u&&(92===r.charCodeAt(at)?(t="\\",at++):(t=u,0===st&&gt(Mr)),t===u&&(58===r.charCodeAt(at)?(t=er,at++):(t=u,0===st&&gt(nr)))))))),t}function Qt(){var r,t,e,n;if(st++,r=at,(t=Ut())===u&&(t=null),t!==u)if(Ht()!==u){if(e=[],(n=Lt())!==u)for(;n!==u;)e.push(n),n=Lt();else e=u;e!==u?(ct=r,r=t=qr(t,e)):(at=r,r=u)}else at=r,r=u;else at=r,r=u;return st--,r===u&&(t=u,0===st&&gt(Gr)),r}function Yt(){var t,e,n,a;if(t=at,e=[],D.test(r.charAt(at))?(n=r.charAt(at),at++):(n=u,0===st&&gt(Q)),n!==u)for(;n!==u;)e.push(n),D.test(r.charAt(at))?(n=r.charAt(at),at++):(n=u,0===st&&gt(Q));else e=u;return e!==u?(n=function(){var t,e,n,a,c;t=at,46===r.charCodeAt(at)?(e=Qr,at++):(e=u,0===st&&gt(Yr));if(e!==u)if(n=at,st++,46===r.charCodeAt(at)?(a=Qr,at++):(a=u,0===st&&gt(Yr)),st--,a===u?n=void 0:(at=n,n=u),n!==u){for(a=[],D.test(r.charAt(at))?(c=r.charAt(at),at++):(c=u,0===st&&gt(Q));c!==u;)a.push(c),D.test(r.charAt(at))?(c=r.charAt(at),at++):(c=u,0===st&&gt(Q));a!==u?(ct=t,t=e="."+a.join("")):(at=t,t=u)}else at=t,t=u;else at=t,t=u;return t}(),n===u&&(n=null),n!==u?(ct=t,a=n,t=e=parseFloat(e.join("")+a)):(at=t,t=u)):(at=t,t=u),t}function $t(){var t,e,n;return t=at,r.substr(at,4)===$r?(e=$r,at+=4):(e=u,0===st&&gt(Hr)),e!==u&&Ht()!==u&&(n=Qt())!==u&&Ht()!==u?(ct=t,t=e=n):(at=t,t=u),t}function Ht(){var r,t,e,n,a;for(st++,r=[],(t=Jt())===u&&(t=at,(e=Kt())!==u?(n=at,st++,a=Nt(),st--,a===u?n=void 0:(at=n,n=u),n!==u?t=e=[e,n]:(at=t,t=u)):(at=t,t=u));t!==u;)r.push(t),(t=Jt())===u&&(t=at,(e=Kt())!==u?(n=at,st++,a=Nt(),st--,a===u?n=void 0:(at=n,n=u),n!==u?t=e=[e,n]:(at=t,t=u)):(at=t,t=u));return st--,r===u&&(t=u,0===st&&gt(Ir)),r}function It(){var r,t;for(st++,r=[],(t=Bt())===u&&(t=Kt())===u&&(t=Jt());t!==u;)r.push(t),(t=Bt())===u&&(t=Kt())===u&&(t=Jt());return st--,r===u&&(t=u,0===st&&gt(zr)),r}function zt(){var t,e,n,a;for(t=at,e=at,st++,n=[],32===r.charCodeAt(at)?(a=" ",at++):(a=u,0===st&&gt(Br));a!==u;)n.push(a),32===r.charCodeAt(at)?(a=" ",at++):(a=u,0===st&&gt(Br));return st--,n!==u?(at=e,e=void 0):e=u,e!==u&&(ct=t,Wt=null,e=void(Xt=null)),t=e}function Bt(){var t,e,n,a,c,o;if(st++,t=at,r.substr(at,2)===Kr?(e=Kr,at+=2):(e=u,0===st&&gt(Vr)),e!==u){for(n=[],Wr.test(r.charAt(at))?(a=r.charAt(at),at++):(a=u,0===st&&gt(Xr));a!==u;)n.push(a),Wr.test(r.charAt(at))?(a=r.charAt(at),at++):(a=u,0===st&&gt(Xr));n!==u?(ct=t,c=n.join(""),(o=c.match(/\[id:([^\x00-\x1F\x7F]+?)]/))&&(Wt=o[1].trim().replace("\\]","]")),c.matchAll(/\[tag:([^\x00-\x1F\x7F]+?)]/g),Array.from(c.matchAll(/\[tag:([^\x00-\x1F\x7F]+?)]/g),(function(r){return r[1]})).forEach((function(r){Xt||(Xt=[]),Xt.push(r)})),t=e=null):(at=t,t=u)}else at=t,t=u;return st--,t===u&&(e=u,0===st&&gt(Jr)),t}function Jt(){var t;return st++,32===r.charCodeAt(at)?(t=" ",at++):(t=u,0===st&&gt(Br)),t===u&&(9===r.charCodeAt(at)?(t="\t",at++):(t=u,0===st&&gt(rt))),st--,t===u&&(u,0===st&&gt(Zr)),t}function Kt(){var t;return st++,"\r\n"===r.substr(at,2)?(t="\r\n",at+=2):(t=u,0===st&&gt(et)),t===u&&(10===r.charCodeAt(at)?(t="\n",at++):(t=u,0===st&&gt(nt)),t===u&&(13===r.charCodeAt(at)?(t="\r",at++):(t=u,0===st&&gt(ut)))),st--,t===u&&(u,0===st&&gt(tt)),t}function Vt(){var t,e,n;return t=at,e=at,st++,r.length>at?(n=r.charAt(at),at++):(n=u,0===st&&gt(Lr)),st--,n===u?e=void 0:(at=e,e=u),e!==u&&(ct=t,e="EOF"),t=e}var Wt=null,Xt=null,Zt="moodle",re=Zt;function te(r){return(r=r.replace(/[\n\r]/g," ")).replace(/\s\s+/g," ")}function ee(){return re}function ne(){re=Zt}if((n=c())!==u&&at===r.length)return n;throw n!==u&&at<r.length&&gt({type:"end"}),mt(lt,it<r.length?r.charAt(it):null,it<r.length?vt(it,it+1):vt(it,it))}}}(this);
