"use strict";function peg$subclass(r,t){function e(){this.constructor=r}e.prototype=t.prototype,r.prototype=new e}function peg$SyntaxError(r,t,e,n){this.message=r,this.expected=t,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(h,r){r=void 0!==r?r:{};var t,p={},e={GIFTQuestions:Zt},n=Zt,u=function(r){return r},o=Kt("Description"),c=function(r){return Te(),{type:"Description",title:null,stem:r,hasEmbeddedAnswers:!1}},a="{",i=Bt("{",!1),s="}",l=Bt("}",!1),f=function(r,t,e,n){var u=null!=n,o={format:t.format,text:t.text+(u?" _____ "+n.text:"")},c={type:e.type,title:r,stem:o,hasEmbeddedAnswers:null!=n};return c=function(r,t){switch(r.globalFeedback=t.globalFeedback,t.type){case"TF":r.isTrue=t.isTrue,r.incorrectFeedback=t.feedback[1],r.correctFeedback=t.feedback[2];break;case"MC":case"Numerical":r.choices=t.choices;break;case"Matching":r.matchPairs=t.matchPairs}return r}(c,e),Te(),c},d=Kt("{= match1 -> Match1\n...}"),g=function(r,t){return{type:"Matching",matchPairs:r,globalFeedback:t}},A=Kt("matches"),v=function(r){return r},b=Kt("match"),m="=",C=Bt("=",!1),x="->",y=Bt("->",!1),w=function(r,t){return{subquestion:{format:null!==r?r.format:Se(),text:null!==r?r.text:""},subanswer:t}},F=Kt("{T} or {F} or {True} or {False}"),k=function(r,t,e){return{type:"TF",isTrue:r,feedback:t,globalFeedback:e}},E=function(r){return r},S="true",T=Bt("TRUE",!0),$="t",M=Bt("T",!0),j=function(){return!0},L="false",N=Bt("FALSE",!0),R="f",_=Bt("F",!0),q=function(){return!1},P=Kt("{=correct choice ~incorrect choice ... }"),D=function(r,t){return{type:"MC",choices:r,globalFeedback:t}},I=Kt("Choices"),Q=function(r){return r},U=Kt("Choice"),G=/^[=~]/,H=Jt(["=","~"],!1,!1),O=function(r,t){return r={isCorrect:"="==r[0],weight:r[2],text:r[4],feedback:t}},z=Kt("(weight)"),B="%",J=Bt("%",!1),K=/^[\-]/,V=Jt(["-"],!1,!1),W=function(r){return parseInt(r.join(""),10)},X=Kt("(percent)"),Y="100",Z=Bt("100",!1),rr=/^[1-9]/,tr=Jt([["1","9"]],!1,!1),er=/^[0-9]/,nr=Jt([["0","9"]],!1,!1),ur=function(){return zt()},or=Kt("(feedback)"),cr="#",ar=Bt("#",!1),ir=function(r){return r},sr=Kt("Essay question { ... }"),lr="",fr=function(r){return{type:"Essay",globalFeedback:r}},hr=Kt("{#... }"),pr=function(r,t){return{type:"Numerical",choices:r,globalFeedback:t}},dr=Kt("Numerical Answers"),gr=Kt("Multiple Numerical Choices"),Ar=Kt("Numerical Choice"),vr=function(r,t){return r={isCorrect:"="==r[0],weight:r[1],text:r[2],feedback:t}},br=Kt("Single numeric answer"),mr=Kt("(number with range)"),Cr=":",xr=Bt(":",!1),yr=function(r,t){return{type:"range",number:r,range:t}},wr=Kt("(number with high-low)"),Fr="..",kr=Bt("..",!1),Er=function(r,t){return{type:"high-low",numberHigh:t,numberLow:r}},Sr=Kt("(number answer)"),Tr=function(r){return{type:"simple",number:r}},$r=Kt(":: Title ::"),Mr="::",jr=Bt("::",!1),Lr=function(r){return r.join("")},Nr=Kt("Question stem"),Rr=function(r){var t;return t=r.format,ke=t,r},_r=Kt("(blank line separator)"),qr=Kt("(Title text)"),Pr=function(r){return r},Dr=Kt("(text character)"),Ir=Kt("format"),Qr="[",Ur=Bt("[",!1),Gr="html",Hr=Bt("html",!1),Or="markdown",zr=Bt("markdown",!1),Br="plain",Jr=Bt("plain",!1),Kr="moodle",Vr=Bt("moodle",!1),Wr="]",Xr=Bt("]",!1),Yr=function(r){return r},Zr=Kt("(escape character)"),rt="\\",tt=Bt("\\",!1),et=Kt("escape sequence"),nt="~",ut=Bt("~",!1),ot=function(r){return r},ct=Kt(""),at={type:"any"},it=function(){return zt()},st=Kt("(formatted text)"),lt=function(r,t){return{format:null!==r?r:Se(),text:Ee(t.join("").trim())}},ft=Kt("(unformatted text)"),ht=function(r){return Ee(r.join("").trim())},pt=function(r,t){return parseFloat(r.join("")+t)},dt=".",gt=Bt(".",!1),At=function(r){return"."+r.join("")},vt="####",bt=Bt("####",!1),mt=function(r){return r},Ct=Kt("(single line whitespace)"),xt=Kt("(multiple line whitespace)"),yt=Kt("(comment)"),wt="//",Ft=Bt("//",!1),kt=function(){return null},Et=Kt("(space)"),St=" ",Tt=Bt(" ",!1),$t="\t",Mt=Bt("\t",!1),jt=Kt("(end of line)"),Lt="\r\n",Nt=Bt("\r\n",!1),Rt="\n",_t=Bt("\n",!1),qt="\r",Pt=Bt("\r",!1),Dt=function(){return"EOF"},It=0,Qt=0,Ut=[{line:1,column:1}],Gt=0,Ht=[],Ot=0;if("startRule"in r){if(!(r.startRule in e))throw new Error("Can't start parsing from rule \""+r.startRule+'".');n=e[r.startRule]}function zt(){return h.substring(Qt,It)}function Bt(r,t){return{type:"literal",text:r,ignoreCase:t}}function Jt(r,t,e){return{type:"class",parts:r,inverted:t,ignoreCase:e}}function Kt(r){return{type:"other",description:r}}function Vt(r){var t,e=Ut[r];if(e)return e;for(t=r-1;!Ut[t];)t--;for(e={line:(e=Ut[t]).line,column:e.column};t<r;)10===h.charCodeAt(t)?(e.line++,e.column=1):e.column++,t++;return Ut[r]=e}function Wt(r,t){var e=Vt(r),n=Vt(t);return{start:{offset:r,line:e.line,column:e.column},end:{offset:t,line:n.line,column:n.column}}}function Xt(r){It<Gt||(Gt<It&&(Gt=It,Ht=[]),Ht.push(r))}function Yt(r,t,e){return new peg$SyntaxError(peg$SyntaxError.buildMessage(r,t),r,t,e)}function Zt(){var r,t,e;if(r=It,t=[],(e=re())===p&&(e=te()),e!==p)for(;e!==p;)t.push(e),(e=re())===p&&(e=te());else t=p;return t!==p&&(e=be())!==p&&me()!==p?(Qt=r,r=t=u(t)):(It=r,r=p),r}function re(){var r,t;return Ot++,r=It,me()!==p&&(t=ge())!==p&&se()!==p?(Qt=r,r=c(t)):(It=r,r=p),Ot--,r===p&&(p,0===Ot&&Xt(o)),r}function te(){var r,t,e,n,u,o,c;return r=It,me()!==p?((t=function(){var r,t,e,n;Ot++,r=It,h.substr(It,2)===Mr?(t=Mr,It+=2):(t=p,0===Ot&&Xt(jr));if(t!==p){if(e=[],(n=le())!==p)for(;n!==p;)e.push(n),n=le();else e=p;e!==p?(h.substr(It,2)===Mr?(n=Mr,It+=2):(n=p,0===Ot&&Xt(jr)),n!==p?(Qt=r,t=Lr(e),r=t):(It=r,r=p)):(It=r,r=p)}else It=r,r=p;Ot--,r===p&&(t=p,0===Ot&&Xt($r));return r}())===p&&(t=null),t!==p&&be()!==p&&(e=ie())!==p&&be()!==p?(123===h.charCodeAt(It)?(n=a,It++):(n=p,0===Ot&&Xt(i)),n!==p?((u=function(){var r,t,e;Ot++,r=It,(t=function(){var r,t,e;if(Ot++,r=It,t=[],(e=ee())!==p)for(;e!==p;)t.push(e),e=ee();else t=p;return t!==p&&(Qt=r,t=v(t)),Ot--,(r=t)===p&&(t=p,0===Ot&&Xt(A)),r}())!==p&&be()!==p?((e=ve())===p&&(e=null),e!==p&&be()!==p?(Qt=r,t=g(t,e),r=t):(It=r,r=p)):(It=r,r=p);Ot--,r===p&&(t=p,0===Ot&&Xt(d));return r}())===p&&(u=function(){var r,t,e,n,u,o;Ot++,r=It,l=c=It,h.substr(It,4).toLowerCase()===S?(f=h.substr(It,4),It+=4):(f=p,0===Ot&&Xt(T)),f===p&&(h.substr(It,1).toLowerCase()===$?(f=h.charAt(It),It++):(f=p,0===Ot&&Xt(M))),f!==p&&(Qt=l,f=j()),(a=l=f)===p&&(i=It,h.substr(It,5).toLowerCase()===L?(s=h.substr(It,5),It+=5):(s=p,0===Ot&&Xt(N)),s===p&&(h.substr(It,1).toLowerCase()===R?(s=h.charAt(It),It++):(s=p,0===Ot&&Xt(_))),s!==p&&(Qt=i,s=q()),a=i=s),a!==p&&(Qt=c,a=E(a)),(t=c=a)!==p&&be()!==p?(e=It,(n=be())!==p?((u=oe())===p&&(u=null),u!==p?((o=oe())===p&&(o=null),o!==p?e=n=[n,u,o]:(It=e,e=p)):(It=e,e=p)):(It=e,e=p),e!==p&&(n=be())!==p?((u=ve())===p&&(u=null),u!==p?(Qt=r,t=k(t,e,u),r=t):(It=r,r=p)):(It=r,r=p)):(It=r,r=p);var c,a,i,s,l,f;Ot--,r===p&&(t=p,0===Ot&&Xt(F));return r}())===p&&(u=function(){var r,t,e;Ot++,r=It,(t=function(){var r,t,e;if(Ot++,r=It,t=[],(e=ne())!==p)for(;e!==p;)t.push(e),e=ne();else t=p;return t!==p&&(Qt=r,t=Q(t)),Ot--,(r=t)===p&&(t=p,0===Ot&&Xt(I)),r}())!==p&&be()!==p?((e=ve())===p&&(e=null),e!==p&&be()!==p?(Qt=r,t=D(t,e),r=t):(It=r,r=p)):(It=r,r=p);Ot--,r===p&&(t=p,0===Ot&&Xt(P));return r}())===p&&(u=function(){var r,t,e,n;Ot++,r=It,35===h.charCodeAt(It)?(t=cr,It++):(t=p,0===Ot&&Xt(ar));t!==p&&be()!==p&&(e=function(){var r;Ot++,(r=function(){var r,t,e;if(Ot++,r=It,t=[],(e=ce())!==p)for(;e!==p;)t.push(e),e=ce();else t=p;return t!==p&&(Qt=r,t=Q(t)),Ot--,(r=t)===p&&(t=p,0===Ot&&Xt(gr)),r}())===p&&(r=ae());Ot--,r===p&&(p,0===Ot&&Xt(dr));return r}())!==p&&be()!==p?((n=ve())===p&&(n=null),n!==p?(Qt=r,t=pr(e,n),r=t):(It=r,r=p)):(It=r,r=p);Ot--,r===p&&(t=p,0===Ot&&Xt(hr));return r}())===p&&(u=function(){var r,t,e;Ot++,r=It,(t=lr)!==p&&be()!==p?((e=ve())===p&&(e=null),e!==p&&be()!==p?(Qt=r,t=fr(e),r=t):(It=r,r=p)):(It=r,r=p);Ot--,r===p&&(t=p,0===Ot&&Xt(sr));return r}()),u!==p?(125===h.charCodeAt(It)?(o=s,It++):(o=p,0===Ot&&Xt(l)),o!==p&&be()!==p?((c=Ce())===p&&(c=ie()),c===p&&(c=null),c!==p&&se()!==p?(Qt=r,r=f(t,e,u,c)):(It=r,r=p)):(It=r,r=p)):(It=r,r=p)):(It=r,r=p)):(It=r,r=p)):(It=r,r=p),r}function ee(){var r,t,e,n,u;return Ot++,r=It,be()!==p?(61===h.charCodeAt(It)?(t=m,It++):(t=p,0===Ot&&Xt(C)),t!==p&&be()!==p?((e=ge())===p&&(e=null),e!==p&&be()!==p?(h.substr(It,2)===x?(n=x,It+=2):(n=p,0===Ot&&Xt(y)),n!==p&&be()!==p&&(u=function(){var r,t,e;if(Ot++,r=It,t=[],(e=fe())!==p)for(;e!==p;)t.push(e),e=fe();else t=p;t!==p&&(Qt=r,t=ht(t));Ot--,(r=t)===p&&(t=p,0===Ot&&Xt(ft));return r}())!==p&&be()!==p?(Qt=r,r=w(e,u)):(It=r,r=p)):(It=r,r=p)):(It=r,r=p)):(It=r,r=p),Ot--,r===p&&(p,0===Ot&&Xt(b)),r}function ne(){var r,t,e,n,u,o,c;return Ot++,r=It,be()!==p?(t=It,G.test(h.charAt(It))?(e=h.charAt(It),It++):(e=p,0===Ot&&Xt(H)),e!==p&&(n=be())!==p?((u=ue())===p&&(u=null),u!==p&&(o=be())!==p&&(c=ge())!==p?t=e=[e,n,u,o,c]:(It=t,t=p)):(It=t,t=p),t!==p?((e=oe())===p&&(e=null),e!==p&&(n=be())!==p?(Qt=r,r=O(t,e)):(It=r,r=p)):(It=r,r=p)):(It=r,r=p),Ot--,r===p&&(p,0===Ot&&Xt(U)),r}function ue(){var r,t,e,n,u;return Ot++,r=It,37===h.charCodeAt(It)?(t=B,It++):(t=p,0===Ot&&Xt(J)),t!==p&&be()!==p?(e=It,K.test(h.charAt(It))?(n=h.charAt(It),It++):(n=p,0===Ot&&Xt(V)),n===p&&(n=null),n!==p&&(u=function(){var r,t,e;Ot++,h.substr(It,3)===Y?(r=Y,It+=3):(r=p,0===Ot&&Xt(Z));r===p&&(r=It,rr.test(h.charAt(It))?(t=h.charAt(It),It++):(t=p,0===Ot&&Xt(tr)),t!==p?(er.test(h.charAt(It))?(e=h.charAt(It),It++):(e=p,0===Ot&&Xt(nr)),e===p&&(e=null),e!==p?(Qt=r,t=ur(),r=t):(It=r,r=p)):(It=r,r=p));Ot--,r===p&&(t=p,0===Ot&&Xt(X));return r}())!==p?e=n=[n,u]:(It=e,e=p),e!==p&&(n=be())!==p?(37===h.charCodeAt(It)?(u=B,It++):(u=p,0===Ot&&Xt(J)),u!==p?(Qt=r,r=t=W(e)):(It=r,r=p)):(It=r,r=p)):(It=r,r=p),Ot--,r===p&&(t=p,0===Ot&&Xt(z)),r}function oe(){var r,t,e;return Ot++,r=It,35===h.charCodeAt(It)?(t=cr,It++):(t=p,0===Ot&&Xt(ar)),t!==p&&be()!==p&&(e=ge())!==p?(Qt=r,r=t=ir(e)):(It=r,r=p),Ot--,r===p&&(t=p,0===Ot&&Xt(or)),r}function ce(){var r,t,e,n,u;return Ot++,r=It,be()!==p?(t=It,G.test(h.charAt(It))?(e=h.charAt(It),It++):(e=p,0===Ot&&Xt(H)),e!==p?((n=ue())===p&&(n=null),n!==p&&(u=ae())!==p?t=e=[e,n,u]:(It=t,t=p)):(It=t,t=p),t!==p&&(e=be())!==p?((n=oe())===p&&(n=null),n!==p&&(u=be())!==p?(Qt=r,r=vr(t,n)):(It=r,r=p)):(It=r,r=p)):(It=r,r=p),Ot--,r===p&&(p,0===Ot&&Xt(Ar)),r}function ae(){var r;return Ot++,(r=function(){var r,t,e,n;Ot++,r=It,(t=Ae())!==p?(58===h.charCodeAt(It)?(e=Cr,It++):(e=p,0===Ot&&Xt(xr)),e!==p&&(n=Ae())!==p?(Qt=r,t=yr(t,n),r=t):(It=r,r=p)):(It=r,r=p);Ot--,r===p&&(t=p,0===Ot&&Xt(mr));return r}())===p&&(r=function(){var r,t,e,n;Ot++,r=It,(t=Ae())!==p?(h.substr(It,2)===Fr?(e=Fr,It+=2):(e=p,0===Ot&&Xt(kr)),e!==p&&(n=Ae())!==p?(Qt=r,t=Er(t,n),r=t):(It=r,r=p)):(It=r,r=p);Ot--,r===p&&(t=p,0===Ot&&Xt(wr));return r}())===p&&(r=function(){var r,t;Ot++,r=It,(t=Ae())!==p&&(Qt=r,t=Tr(t));Ot--,(r=t)===p&&(t=p,0===Ot&&Xt(Sr));return r}()),Ot--,r===p&&(p,0===Ot&&Xt(br)),r}function ie(){var r,t;return Ot++,r=It,(t=ge())!==p&&(Qt=r,t=Rr(t)),Ot--,(r=t)===p&&(t=p,0===Ot&&Xt(Nr)),r}function se(){var r,t,e,n;if(Ot++,r=It,(t=ye())!==p){if(e=[],(n=ye())!==p)for(;n!==p;)e.push(n),n=ye();else e=p;e!==p?r=t=[t,e]:(It=r,r=p)}else It=r,r=p;return r===p&&(r=It,(t=ye())===p&&(t=null),t!==p&&(e=we())!==p?r=t=[t,e]:(It=r,r=p)),Ot--,r===p&&(t=p,0===Ot&&Xt(_r)),r}function le(){var r,t,e;return Ot++,t=r=It,Ot++,h.substr(It,2)===Mr?(e=Mr,It+=2):(e=p,0===Ot&&Xt(jr)),Ot--,e===p?t=void 0:(It=t,t=p),t!==p&&(e=de())!==p?(Qt=r,r=t=Pr(e)):(It=r,r=p),Ot--,r===p&&(t=p,0===Ot&&Xt(qr)),r}function fe(){var r;return Ot++,(r=de())===p&&(r=pe())===p&&(r=he()),Ot--,r===p&&(p,0===Ot&&Xt(Dr)),r}function he(){var r;return Ot++,92===h.charCodeAt(It)?(r=rt,It++):(r=p,0===Ot&&Xt(tt)),Ot--,r===p&&(p,0===Ot&&Xt(Zr)),r}function pe(){var r,t;return Ot++,r=It,he()!==p?((t=he())===p&&(58===h.charCodeAt(It)?(t=Cr,It++):(t=p,0===Ot&&Xt(xr)),t===p&&(126===h.charCodeAt(It)?(t=nt,It++):(t=p,0===Ot&&Xt(ut)),t===p&&(61===h.charCodeAt(It)?(t=m,It++):(t=p,0===Ot&&Xt(C)),t===p&&(35===h.charCodeAt(It)?(t=cr,It++):(t=p,0===Ot&&Xt(ar)),t===p&&(91===h.charCodeAt(It)?(t=Qr,It++):(t=p,0===Ot&&Xt(Ur)),t===p&&(93===h.charCodeAt(It)?(t=Wr,It++):(t=p,0===Ot&&Xt(Xr)),t===p&&(123===h.charCodeAt(It)?(t=a,It++):(t=p,0===Ot&&Xt(i)),t===p&&(125===h.charCodeAt(It)?(t=s,It++):(t=p,0===Ot&&Xt(l)))))))))),t!==p?(Qt=r,r=ot(t)):(It=r,r=p)):(It=r,r=p),Ot--,r===p&&(p,0===Ot&&Xt(et)),r}function de(){var r,t,e;return Ot++,t=r=It,Ot++,(e=pe())===p&&(e=function(){var r;61===h.charCodeAt(It)?(r=m,It++):(r=p,0===Ot&&Xt(C));r===p&&(126===h.charCodeAt(It)?(r=nt,It++):(r=p,0===Ot&&Xt(ut)),r===p&&(35===h.charCodeAt(It)?(r=cr,It++):(r=p,0===Ot&&Xt(ar)),r===p&&(123===h.charCodeAt(It)?(r=a,It++):(r=p,0===Ot&&Xt(i)),r===p&&(125===h.charCodeAt(It)?(r=s,It++):(r=p,0===Ot&&Xt(l)),r===p&&(92===h.charCodeAt(It)?(r=rt,It++):(r=p,0===Ot&&Xt(tt)),r===p&&(h.substr(It,2)===x?(r=x,It+=2):(r=p,0===Ot&&Xt(y))))))));return r}())===p&&(e=se()),Ot--,e===p?t=void 0:(It=t,t=p),t!==p?(h.length>It?(e=h.charAt(It),It++):(e=p,0===Ot&&Xt(at)),e!==p?(Qt=r,r=t=it()):(It=r,r=p)):(It=r,r=p),Ot--,r===p&&(t=p,0===Ot&&Xt(ct)),r}function ge(){var r,t,e,n,u,o,c,a;if(Ot++,Ot++,u=r=It,91===h.charCodeAt(It)?(o=Qr,It++):(o=p,0===Ot&&Xt(Ur)),o!==p?(h.substr(It,4)===Gr?(c=Gr,It+=4):(c=p,0===Ot&&Xt(Hr)),c===p&&(h.substr(It,8)===Or?(c=Or,It+=8):(c=p,0===Ot&&Xt(zr)),c===p&&(h.substr(It,5)===Br?(c=Br,It+=5):(c=p,0===Ot&&Xt(Jr)),c===p&&(h.substr(It,6)===Kr?(c=Kr,It+=6):(c=p,0===Ot&&Xt(Vr))))),c!==p?(93===h.charCodeAt(It)?(a=Wr,It++):(a=p,0===Ot&&Xt(Xr)),a!==p?(Qt=u,u=o=Yr(c)):(It=u,u=p)):(It=u,u=p)):(It=u,u=p),Ot--,u===p&&(o=p,0===Ot&&Xt(Ir)),(t=u)===p&&(t=null),t!==p)if(be()!==p){if(e=[],(n=fe())!==p)for(;n!==p;)e.push(n),n=fe();else e=p;e!==p?(Qt=r,r=t=lt(t,e)):(It=r,r=p)}else It=r,r=p;else It=r,r=p;return Ot--,r===p&&(t=p,0===Ot&&Xt(st)),r}function Ae(){var r,t,e;if(r=It,t=[],er.test(h.charAt(It))?(e=h.charAt(It),It++):(e=p,0===Ot&&Xt(nr)),e!==p)for(;e!==p;)t.push(e),er.test(h.charAt(It))?(e=h.charAt(It),It++):(e=p,0===Ot&&Xt(nr));else t=p;return t!==p?((e=function(){var r,t,e,n,u;r=It,46===h.charCodeAt(It)?(t=dt,It++):(t=p,0===Ot&&Xt(gt));if(t!==p)if(e=It,Ot++,46===h.charCodeAt(It)?(n=dt,It++):(n=p,0===Ot&&Xt(gt)),Ot--,n===p?e=void 0:(It=e,e=p),e!==p){for(n=[],er.test(h.charAt(It))?(u=h.charAt(It),It++):(u=p,0===Ot&&Xt(nr));u!==p;)n.push(u),er.test(h.charAt(It))?(u=h.charAt(It),It++):(u=p,0===Ot&&Xt(nr));n!==p?(Qt=r,t=At(n),r=t):(It=r,r=p)}else It=r,r=p;else It=r,r=p;return r}())===p&&(e=null),e!==p?(Qt=r,r=t=pt(t,e)):(It=r,r=p)):(It=r,r=p),r}function ve(){var r,t,e;return r=It,h.substr(It,4)===vt?(t=vt,It+=4):(t=p,0===Ot&&Xt(bt)),t!==p&&be()!==p&&(e=ge())!==p&&be()!==p?(Qt=r,r=t=mt(e)):(It=r,r=p),r}function be(){var r,t,e,n,u;for(Ot++,r=[],t=It,(e=ye())!==p?(n=It,Ot++,u=ye(),Ot--,u===p?n=void 0:(It=n,n=p),n!==p?t=e=[e,n]:(It=t,t=p)):(It=t,t=p),t===p&&(t=xe());t!==p;)r.push(t),t=It,(e=ye())!==p?(n=It,Ot++,u=ye(),Ot--,u===p?n=void 0:(It=n,n=p),n!==p?t=e=[e,n]:(It=t,t=p)):(It=t,t=p),t===p&&(t=xe());return Ot--,r===p&&(t=p,0===Ot&&Xt(Ct)),r}function me(){var r,t;for(Ot++,r=[],(t=Ce())===p&&(t=ye())===p&&(t=xe());t!==p;)r.push(t),(t=Ce())===p&&(t=ye())===p&&(t=xe());return Ot--,r===p&&(t=p,0===Ot&&Xt(xt)),r}function Ce(){var r,t,e,n,u,o;if(Ot++,r=It,h.substr(It,2)===wt?(t=wt,It+=2):(t=p,0===Ot&&Xt(Ft)),t!==p){for(e=[],u=n=It,Ot++,o=ye(),Ot--,o===p?u=void 0:(It=u,u=p),u!==p?(h.length>It?(o=h.charAt(It),It++):(o=p,0===Ot&&Xt(at)),o!==p?n=u=[u,o]:(It=n,n=p)):(It=n,n=p);n!==p;)e.push(n),u=n=It,Ot++,o=ye(),Ot--,o===p?u=void 0:(It=u,u=p),u!==p?(h.length>It?(o=h.charAt(It),It++):(o=p,0===Ot&&Xt(at)),o!==p?n=u=[u,o]:(It=n,n=p)):(It=n,n=p);e!==p?((n=ye())===p&&(n=we()),n!==p?(Qt=r,r=t=kt()):(It=r,r=p)):(It=r,r=p)}else It=r,r=p;return Ot--,r===p&&(t=p,0===Ot&&Xt(yt)),r}function xe(){var r;return Ot++,32===h.charCodeAt(It)?(r=St,It++):(r=p,0===Ot&&Xt(Tt)),r===p&&(9===h.charCodeAt(It)?(r=$t,It++):(r=p,0===Ot&&Xt(Mt))),Ot--,r===p&&(p,0===Ot&&Xt(Et)),r}function ye(){var r;return Ot++,h.substr(It,2)===Lt?(r=Lt,It+=2):(r=p,0===Ot&&Xt(Nt)),r===p&&(10===h.charCodeAt(It)?(r=Rt,It++):(r=p,0===Ot&&Xt(_t)),r===p&&(13===h.charCodeAt(It)?(r=qt,It++):(r=p,0===Ot&&Xt(Pt)))),Ot--,r===p&&(p,0===Ot&&Xt(jt)),r}function we(){var r,t,e;return t=r=It,Ot++,h.length>It?(e=h.charAt(It),It++):(e=p,0===Ot&&Xt(at)),Ot--,e===p?t=void 0:(It=t,t=p),t!==p&&(Qt=r,t=Dt()),r=t}var Fe="moodle",ke=Fe;function Ee(r){return r.replace(/\s\s+/g," ")}function Se(){return ke}function Te(){ke=Fe}if((t=n())!==p&&It===h.length)return t;throw t!==p&&It<h.length&&Xt({type:"end"}),Yt(Ht,Gt<h.length?h.charAt(Gt):null,Gt<h.length?Wt(Gt,Gt+1):Wt(Gt,Gt))}peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(r,t){var e,o={literal:function(r){return'"'+u(r.text)+'"'},class:function(r){var t,e="";for(t=0;t<r.parts.length;t++)e+=r.parts[t]instanceof Array?c(r.parts[t][0])+"-"+c(r.parts[t][1]):c(r.parts[t]);return"["+(r.inverted?"^":"")+e+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function u(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}function c(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}return"Expected "+function(r){var t,e,n,u=new Array(r.length);for(t=0;t<r.length;t++)u[t]=(n=r[t],o[n.type](n));if(u.sort(),0<u.length){for(e=t=1;t<u.length;t++)u[t-1]!==u[t]&&(u[e]=u[t],e++);u.length=e}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(r)+" but "+((e=t)?'"'+u(e)+'"':"end of input")+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse};
