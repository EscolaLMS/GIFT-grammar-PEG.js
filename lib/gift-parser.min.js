"use strict";function peg$subclass(r,t){function e(){this.constructor=r}e.prototype=t.prototype,r.prototype=new e}function peg$SyntaxError(r,t,e,n){this.message=r,this.expected=t,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(h,r){r=void 0!==r?r:{};var t,p={},e={GIFTQuestions:me},n=me,u=function(r){return r},c=pe("Category"),o="$",a=fe("$",!1),i="CATEGORY:",l=fe("CATEGORY:",!1),s=function(r){return{type:"Category",title:r}},f=pe("Description"),d=function(r,t){var e={id:Ve,tags:We,type:"Description",title:r,stem:t,hasEmbeddedAnswers:!1};return en(),We=Ve=null,e},g="{",A=fe("{",!1),v="}",m=fe("}",!1),b=function(r,t,e,n){var u=null!==n,c=t?t.text+(u?" ":""):"",o=t&&t.format||n&&n.format||"moodle",a=c+(u?"_____ "+n.text:""),i={type:e.type,title:r,stem:{format:o,text:a},hasEmbeddedAnswers:u};return i=function(r,t){switch(r.globalFeedback=t.globalFeedback,r.type){case"TF":r.isTrue=t.isTrue,r.incorrectFeedback=t.feedback[1],r.correctFeedback=t.feedback[2];break;case"MC":case"Numerical":case"Short":r.choices=t.choices;break;case"Matching":r.matchPairs=t.matchPairs}"MC"==r.type&&function(r){for(var t=!0,e=0;e<r.length;e++)t&=r[e].isCorrect;return t}(r.choices)&&(r.type="Short");return r.id=Ve,r.tags=We,r}(i,e),en(),i},C=pe("{= match1 -> Match1\n...}"),x=function(r,t){return{type:"Matching",matchPairs:r,globalFeedback:t}},y=pe("matches"),F=function(r){return r},w=pe("match"),E="=",k=fe("=",!1),S="->",T=fe("->",!1),$=function(r,t){return{subquestion:{format:null!==r?r.format:tn(),text:null!==r?r.text:""},subanswer:t}},j=pe("{T} or {F} or {TRUE} or {FALSE}"),M=function(r,t,e){return{type:"TF",isTrue:r,feedback:t,globalFeedback:e}},R=function(r){return r},N="TRUE",_=fe("TRUE",!1),L="T",U=fe("T",!1),q=function(){return!0},G="FALSE",O=fe("FALSE",!1),P="F",D=fe("F",!1),Q=function(){return!1},Y=pe("{=correct choice ~incorrect choice ... }"),H=function(r,t){return{type:"MC",choices:r,globalFeedback:t}},I=pe("Choices"),z=function(r){return r},B=pe("Choice"),J=/^[=~]/,K=he(["=","~"],!1,!1),V=function(r,t){var e=r[2],n=r[4];return r={isCorrect:"="==r[0],weight:e,text:n,feedback:t}},W=pe("(weight)"),X="%",Z=fe("%",!1),rr=/^[\-]/,tr=he(["-"],!1,!1),er=function(r){return parseFloat(r.join(""))},nr=pe("(percent)"),ur="100",cr=fe("100",!1),or=/^[0-9]/,ar=he([["0","9"]],!1,!1),ir=/^[.]/,lr=he(["."],!1,!1),sr=function(){return se()},fr=pe("(feedback)"),hr="#",pr=fe("#",!1),dr="###",gr=fe("###",!1),Ar=function(r){return r},vr=pe("Essay question { ... }"),mr="",br=function(r){return{type:"Essay",globalFeedback:r}},Cr=pe("Single short answer { ... }"),xr=function(r,t,e){var n=[];return n.push({isCorrect:!0,text:r,feedback:t,weight:null}),{type:"Short",choices:n,globalFeedback:e}},yr=pe("{#... }"),Fr=function(r,t){return{type:"Numerical",choices:r,globalFeedback:t}},wr=pe("Numerical Answers"),Er=pe("Multiple Numerical Choices"),kr=pe("Numerical Choice"),Sr=function(r,t){var e=r[0],n=r[1],u=r[2];return r={isCorrect:"="==e,weight:n,text:null!==u?u:{format:tn(),text:"*"},feedback:t}},Tr=pe("Single numeric answer"),$r=pe("(number with range)"),jr=":",Mr=fe(":",!1),Rr=function(r,t){return{type:"range",number:r,range:t}},Nr=pe("(number with high-low)"),_r="..",Lr=fe("..",!1),Ur=function(r,t){return{type:"high-low",numberHigh:t,numberLow:r}},qr=pe("(number answer)"),Gr=function(r){return{type:"simple",number:r}},Or=pe(":: Title ::"),Pr="::",Dr=fe("::",!1),Qr=function(r){return r.join("")},Yr=pe("Question stem"),Hr=function(r){var t;return t=r.format,Ze=t,r},Ir=pe("(blank lines separator)"),zr=pe("(blank lines)"),Br=pe("blank line"),Jr=pe("(Title text)"),Kr=function(r){return r},Vr=pe("(text character)"),Wr=pe("format"),Xr="[",Zr=fe("[",!1),rt="html",tt=fe("html",!1),et="markdown",nt=fe("markdown",!1),ut="plain",ct=fe("plain",!1),ot="moodle",at=fe("moodle",!1),it="]",lt=fe("]",!1),st=function(r){return r},ft=pe("(escape character)"),ht="\\",pt=fe("\\",!1),dt=pe("escape sequence"),gt="~",At=fe("~",!1),vt=function(r){return r},mt=pe(""),bt={type:"any"},Ct=function(){return se()},xt=pe("(formatted text excluding '->'"),yt=function(r,t){return{format:null!==r?r:tn(),text:"html"!==r?rn(t.join("").trim()):t.join("").replace(/\r\n/g,"\n")}},Ft=pe("(formatted text)"),wt=pe("(unformatted text)"),Et=function(r){return rn(r.join("").trim())},kt=pe("(category text)"),St=function(r){return r.flat().join("")},Tt=function(r,t){return parseFloat(r.join("")+t)},$t=".",jt=fe(".",!1),Mt=function(r){return"."+r.join("")},Rt="####",Nt=fe("####",!1),_t=function(r){return r},Lt=pe("(single line whitespace)"),Ut=pe("(multiple line whitespace)"),qt=" ",Gt=fe(" ",!1),Ot=function(){We=Ve=null},Pt=pe("(comment)"),Dt="//",Qt=fe("//",!1),Yt=/^[^\n\r]/,Ht=he(["\n","\r"],!0,!1),It=function(r){return null},zt=function(r){var t=r.join(""),e=t.match(/\[id:([^\x00-\x1F\x7F]+?)]/);e&&(Ve=e[1].trim().replace("\\]","]"));t.matchAll(/\[tag:([^\x00-\x1F\x7F]+?)]/g);return Array.from(t.matchAll(/\[tag:([^\x00-\x1F\x7F]+?)]/g),function(r){return r[1]}).forEach(function(r){We||(We=[]),We.push(r)}),null},Bt=pe("(space)"),Jt="\t",Kt=fe("\t",!1),Vt=pe("(end of line)"),Wt="\r\n",Xt=fe("\r\n",!1),Zt="\n",re=fe("\n",!1),te="\r",ee=fe("\r",!1),ne=function(){return"EOF"},ue=0,ce=0,oe=[{line:1,column:1}],ae=0,ie=[],le=0;if("startRule"in r){if(!(r.startRule in e))throw new Error("Can't start parsing from rule \""+r.startRule+'".');n=e[r.startRule]}function se(){return h.substring(ce,ue)}function fe(r,t){return{type:"literal",text:r,ignoreCase:t}}function he(r,t,e){return{type:"class",parts:r,inverted:t,ignoreCase:e}}function pe(r){return{type:"other",description:r}}function de(r){var t,e=oe[r];if(e)return e;for(t=r-1;!oe[t];)t--;for(e={line:(e=oe[t]).line,column:e.column};t<r;)10===h.charCodeAt(t)?(e.line++,e.column=1):e.column++,t++;return oe[r]=e}function ge(r,t){var e=de(r),n=de(t);return{start:{offset:r,line:e.line,column:e.column},end:{offset:t,line:n.line,column:n.column}}}function Ae(r){ue<ae||(ae<ue&&(ae=ue,ie=[]),ie.push(r))}function ve(r,t,e){return new peg$SyntaxError(peg$SyntaxError.buildMessage(r,t),r,t,e)}function me(){var r,t,e;if(r=ue,t=[],(e=be())===p&&(e=Ce())===p&&(e=xe()),e!==p)for(;e!==p;)t.push(e),(e=be())===p&&(e=Ce())===p&&(e=xe());else t=p;return t!==p&&(e=Ye())!==p&&He()!==p?(ce=r,r=t=u(t)):(ue=r,r=p),r}function be(){var r,t,e,n;return le++,r=ue,Ie()!==p&&He()!==p?(36===h.charCodeAt(ue)?(t=o,ue++):(t=p,0===le&&Ae(a)),t!==p?(h.substr(ue,9)===i?(e=i,ue+=9):(e=p,0===le&&Ae(l)),e!==p&&Ye()!==p&&(n=function(){var r,t,e,n,u;le++,t=[],n=e=r=ue,le++,u=Je(),le--,u===p?n=void 0:(ue=n,n=p);n!==p?(h.length>ue?(u=h.charAt(ue),ue++):(u=p,0===le&&Ae(bt)),u!==p?e=n=[n,u]:(ue=e,e=p)):(ue=e,e=p);for(;e!==p;)t.push(e),n=e=ue,le++,u=Je(),le--,u===p?n=void 0:(ue=n,n=p),n!==p?(h.length>ue?(u=h.charAt(ue),ue++):(u=p,0===le&&Ae(bt)),u!==p?e=n=[n,u]:(ue=e,e=p)):(ue=e,e=p);t!==p?(e=ue,le++,(n=Je())===p&&(n=Ke()),le--,n!==p?(ue=e,e=void 0):e=p,e!==p?(ce=r,t=St(t),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&Ae(kt));return r}())!==p&&je()!==p?(ce=r,r=s(n)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(p,0===le&&Ae(c)),r}function Ce(){var r,t,e,n;if(le++,r=ue,Ie()!==p)if(He()!==p){for(t=[],e=ze();e!==p;)t.push(e),e=ze();t!==p?((e=Te())===p&&(e=null),e!==p&&Ye()!==p&&(n=$e())!==p&&je()!==p?(ce=r,r=d(e,n)):(ue=r,r=p)):(ue=r,r=p)}else ue=r,r=p;else ue=r,r=p;return le--,r===p&&(p,0===le&&Ae(f)),r}function xe(){var r,t,e,n,u,c,o,a;if(r=ue,Ie()!==p)if(He()!==p){for(t=[],e=ze();e!==p;)t.push(e),e=ze();t!==p?((e=Te())===p&&(e=null),e!==p&&Ye()!==p?((n=$e())===p&&(n=null),n!==p&&Ye()!==p?(123===h.charCodeAt(ue)?(u=g,ue++):(u=p,0===le&&Ae(A)),u!==p&&Ye()!==p?((c=function(){var r,t,e;le++,r=ue,(t=function(){var r,t,e;if(le++,r=ue,t=[],(e=ye())!==p)for(;e!==p;)t.push(e),e=ye();else t=p;return t!==p&&(ce=r,t=F(t)),le--,(r=t)===p&&(t=p,0===le&&Ae(y)),r}())!==p&&Ye()!==p?((e=Qe())===p&&(e=null),e!==p&&Ye()!==p?(ce=r,t=x(t,e),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&Ae(C));return r}())===p&&(c=function(){var r,t,e,n,u,c;le++,r=ue,s=o=ue,h.substr(ue,4)===N?(f=N,ue+=4):(f=p,0===le&&Ae(_)),f===p&&(84===h.charCodeAt(ue)?(f=L,ue++):(f=p,0===le&&Ae(U))),f!==p&&(ce=s,f=q()),(a=s=f)===p&&(i=ue,h.substr(ue,5)===G?(l=G,ue+=5):(l=p,0===le&&Ae(O)),l===p&&(70===h.charCodeAt(ue)?(l=P,ue++):(l=p,0===le&&Ae(D))),l!==p&&(ce=i,l=Q()),a=i=l),a!==p&&(ce=o,a=R(a)),(t=o=a)!==p&&Ye()!==p?(e=ue,(n=Ye())!==p?((u=Ee())===p&&(u=null),u!==p?((c=Ee())===p&&(c=null),c!==p?e=n=[n,u,c]:(ue=e,e=p)):(ue=e,e=p)):(ue=e,e=p),e!==p&&(n=Ye())!==p?((u=Qe())===p&&(u=null),u!==p?(ce=r,t=M(t,e,u),r=t):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p);var o,a,i,l,s,f;le--,r===p&&(t=p,0===le&&Ae(j));return r}())===p&&(c=function(){var r,t,e;le++,r=ue,(t=function(){var r,t,e;if(le++,r=ue,t=[],(e=Fe())!==p)for(;e!==p;)t.push(e),e=Fe();else t=p;return t!==p&&(ce=r,t=z(t)),le--,(r=t)===p&&(t=p,0===le&&Ae(I)),r}())!==p&&Ye()!==p?((e=Qe())===p&&(e=null),e!==p&&Ye()!==p?(ce=r,t=H(t,e),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&Ae(Y));return r}())===p&&(c=function(){var r,t,e,n;le++,r=ue,35===h.charCodeAt(ue)?(t=hr,ue++):(t=p,0===le&&Ae(pr));t!==p&&Ye()!==p&&(e=function(){var r;le++,(r=function(){var r,t,e;if(le++,r=ue,t=[],(e=ke())!==p)for(;e!==p;)t.push(e),e=ke();else t=p;return t!==p&&(ce=r,t=z(t)),le--,(r=t)===p&&(t=p,0===le&&Ae(Er)),r}())===p&&(r=Se());le--,r===p&&(p,0===le&&Ae(wr));return r}())!==p&&Ye()!==p?((n=Qe())===p&&(n=null),n!==p?(ce=r,t=Fr(e,n),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&Ae(yr));return r}())===p&&(c=function(){var r,t,e,n;le++,r=ue,(t=Pe())!==p&&Ye()!==p?((e=Ee())===p&&(e=null),e!==p&&Ye()!==p?((n=Qe())===p&&(n=null),n!==p&&Ye()!==p?(ce=r,t=xr(t,e,n),r=t):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&Ae(Cr));return r}())===p&&(c=function(){var r,t,e;le++,r=ue,(t=mr)!==p&&Ye()!==p?((e=Qe())===p&&(e=null),e!==p&&Ye()!==p?(ce=r,t=br(e),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&Ae(vr));return r}()),c!==p&&Ye()!==p?(125===h.charCodeAt(ue)?(o=v,ue++):(o=p,0===le&&Ae(m)),o!==p&&Ye()!==p?((a=function(){var r,t,e,n;le++,r=ue,h.substr(ue,2)===Dt?(t=Dt,ue+=2):(t=p,0===le&&Ae(Qt));if(t!==p){for(e=[],Yt.test(h.charAt(ue))?(n=h.charAt(ue),ue++):(n=p,0===le&&Ae(Ht));n!==p;)e.push(n),Yt.test(h.charAt(ue))?(n=h.charAt(ue),ue++):(n=p,0===le&&Ae(Ht));e!==p?(ce=r,t=It(e),r=t):(ue=r,r=p)}else ue=r,r=p;le--,r===p&&(t=p,0===le&&Ae(Pt));return r}())===p&&(a=$e()),a===p&&(a=null),a!==p&&je()!==p?(ce=r,r=b(e,n,c,a)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p)}else ue=r,r=p;else ue=r,r=p;return r}function ye(){var r,t,e,n,u;return le++,r=ue,Ye()!==p?(61===h.charCodeAt(ue)?(t=E,ue++):(t=p,0===le&&Ae(k)),t!==p&&Ye()!==p?((e=function(){var r,t,e,n;le++,r=ue,(t=Le())===p&&(t=null);if(t!==p)if(Ye()!==p){if(e=[],(n=_e())!==p)for(;n!==p;)e.push(n),n=_e();else e=p;e!==p?(ce=r,t=yt(t,e),r=t):(ue=r,r=p)}else ue=r,r=p;else ue=r,r=p;le--,r===p&&(t=p,0===le&&Ae(xt));return r}())===p&&(e=null),e!==p&&Ye()!==p?(h.substr(ue,2)===S?(n=S,ue+=2):(n=p,0===le&&Ae(T)),n!==p&&Ye()!==p&&(u=function(){var r,t,e;if(le++,r=ue,t=[],(e=Ne())!==p)for(;e!==p;)t.push(e),e=Ne();else t=p;t!==p&&(ce=r,t=Et(t));le--,(r=t)===p&&(t=p,0===le&&Ae(wt));return r}())!==p&&Ye()!==p?(ce=r,r=$(e,u)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(p,0===le&&Ae(w)),r}function Fe(){var r,t,e,n,u,c,o;return le++,r=ue,Ye()!==p?(t=ue,J.test(h.charAt(ue))?(e=h.charAt(ue),ue++):(e=p,0===le&&Ae(K)),e!==p&&(n=Ye())!==p?((u=we())===p&&(u=null),u!==p&&(c=Ye())!==p&&(o=Pe())!==p?t=e=[e,n,u,c,o]:(ue=t,t=p)):(ue=t,t=p),t!==p?((e=Ee())===p&&(e=null),e!==p&&(n=Ye())!==p?(ce=r,r=V(t,e)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(p,0===le&&Ae(B)),r}function we(){var r,t,e,n,u;return le++,r=ue,37===h.charCodeAt(ue)?(t=X,ue++):(t=p,0===le&&Ae(Z)),t!==p?(e=ue,rr.test(h.charAt(ue))?(n=h.charAt(ue),ue++):(n=p,0===le&&Ae(tr)),n===p&&(n=null),n!==p&&(u=function(){var r,t,e,n,u,c;le++,h.substr(ue,3)===ur?(r=ur,ue+=3):(r=p,0===le&&Ae(cr));if(r===p)if(r=ue,or.test(h.charAt(ue))?(t=h.charAt(ue),ue++):(t=p,0===le&&Ae(ar)),t!==p)if(or.test(h.charAt(ue))?(e=h.charAt(ue),ue++):(e=p,0===le&&Ae(ar)),e===p&&(e=null),e!==p)if(ir.test(h.charAt(ue))?(n=h.charAt(ue),ue++):(n=p,0===le&&Ae(lr)),n===p&&(n=null),n!==p){for(u=[],or.test(h.charAt(ue))?(c=h.charAt(ue),ue++):(c=p,0===le&&Ae(ar));c!==p;)u.push(c),or.test(h.charAt(ue))?(c=h.charAt(ue),ue++):(c=p,0===le&&Ae(ar));u!==p?(ce=r,t=sr(),r=t):(ue=r,r=p)}else ue=r,r=p;else ue=r,r=p;else ue=r,r=p;le--,r===p&&(t=p,0===le&&Ae(nr));return r}())!==p?e=n=[n,u]:(ue=e,e=p),e!==p?(37===h.charCodeAt(ue)?(n=X,ue++):(n=p,0===le&&Ae(Z)),n!==p?(ce=r,r=t=er(e)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(t=p,0===le&&Ae(W)),r}function Ee(){var r,t,e,n,u;return le++,r=ue,35===h.charCodeAt(ue)?(t=hr,ue++):(t=p,0===le&&Ae(pr)),t!==p?(e=ue,le++,h.substr(ue,3)===dr?(n=dr,ue+=3):(n=p,0===le&&Ae(gr)),le--,n===p?e=void 0:(ue=e,e=p),e!==p&&(n=Ye())!==p?((u=Pe())===p&&(u=null),u!==p?(ce=r,r=t=Ar(u)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(t=p,0===le&&Ae(fr)),r}function ke(){var r,t,e,n,u;return le++,r=ue,Ye()!==p?(t=ue,J.test(h.charAt(ue))?(e=h.charAt(ue),ue++):(e=p,0===le&&Ae(K)),e!==p?((n=we())===p&&(n=null),n!==p?((u=Se())===p&&(u=null),u!==p?t=e=[e,n,u]:(ue=t,t=p)):(ue=t,t=p)):(ue=t,t=p),t!==p&&(e=Ye())!==p?((n=Ee())===p&&(n=null),n!==p&&(u=Ye())!==p?(ce=r,r=Sr(t,n)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(p,0===le&&Ae(kr)),r}function Se(){var r;return le++,(r=function(){var r,t,e,n;le++,r=ue,(t=De())!==p?(58===h.charCodeAt(ue)?(e=jr,ue++):(e=p,0===le&&Ae(Mr)),e!==p&&(n=De())!==p?(ce=r,t=Rr(t,n),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&Ae($r));return r}())===p&&(r=function(){var r,t,e,n;le++,r=ue,(t=De())!==p?(h.substr(ue,2)===_r?(e=_r,ue+=2):(e=p,0===le&&Ae(Lr)),e!==p&&(n=De())!==p?(ce=r,t=Ur(t,n),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&Ae(Nr));return r}())===p&&(r=function(){var r,t;le++,r=ue,(t=De())!==p&&(ce=r,t=Gr(t));le--,(r=t)===p&&(t=p,0===le&&Ae(qr));return r}()),le--,r===p&&(p,0===le&&Ae(Tr)),r}function Te(){var r,t,e,n;if(le++,r=ue,h.substr(ue,2)===Pr?(t=Pr,ue+=2):(t=p,0===le&&Ae(Dr)),t!==p){if(e=[],(n=Re())!==p)for(;n!==p;)e.push(n),n=Re();else e=p;e!==p?(h.substr(ue,2)===Pr?(n=Pr,ue+=2):(n=p,0===le&&Ae(Dr)),n!==p?(ce=r,r=t=Qr(e)):(ue=r,r=p)):(ue=r,r=p)}else ue=r,r=p;return le--,r===p&&(t=p,0===le&&Ae(Or)),r}function $e(){var r,t;return le++,r=ue,(t=Pe())!==p&&(ce=r,t=Hr(t)),le--,(r=t)===p&&(t=p,0===le&&Ae(Yr)),r}function je(){var r,t,e;return le++,(r=function(){var r,t,e,n;if(le++,r=ue,(t=Je())!==p){if(e=[],(n=Me())!==p)for(;n!==p;)e.push(n),n=Me();else e=p;e!==p?r=t=[t,e]:(ue=r,r=p)}else ue=r,r=p;le--,r===p&&(t=p,0===le&&Ae(zr));return r}())===p&&(r=ue,(t=Je())===p&&(t=null),t!==p&&(e=Ke())!==p?r=t=[t,e]:(ue=r,r=p)),le--,r===p&&(t=p,0===le&&Ae(Ir)),r}function Me(){var r,t,e;for(le++,r=ue,t=[],e=Be();e!==p;)t.push(e),e=Be();return t!==p&&(e=Je())!==p?r=t=[t,e]:(ue=r,r=p),le--,r===p&&(t=p,0===le&&Ae(Br)),r}function Re(){var r,t,e;return le++,t=r=ue,le++,h.substr(ue,2)===Pr?(e=Pr,ue+=2):(e=p,0===le&&Ae(Dr)),le--,e===p?t=void 0:(ue=t,t=p),t!==p?((e=qe())===p&&(e=Ge()),e!==p?(ce=r,r=t=Kr(e)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(t=p,0===le&&Ae(Jr)),r}function Ne(){var r;return le++,(r=Ge())===p&&(r=qe())===p&&(r=Ue()),le--,r===p&&(p,0===le&&Ae(Vr)),r}function _e(){var r;return le++,(r=function(){var r,t,e;le++,t=r=ue,le++,(e=qe())===p&&(e=Oe())===p&&(h.substr(ue,2)===S?(e=S,ue+=2):(e=p,0===le&&Ae(T)),e===p&&(e=je()));le--,e===p?t=void 0:(ue=t,t=p);t!==p?(h.length>ue?(e=h.charAt(ue),ue++):(e=p,0===le&&Ae(bt)),e!==p?(ce=r,t=Ct(),r=t):(ue=r,r=p)):(ue=r,r=p);le--,r===p&&(t=p,0===le&&Ae(mt));return r}())===p&&(r=qe())===p&&(r=Ue()),le--,r===p&&(p,0===le&&Ae(Vr)),r}function Le(){var r,t,e,n;return le++,r=ue,91===h.charCodeAt(ue)?(t=Xr,ue++):(t=p,0===le&&Ae(Zr)),t!==p?(h.substr(ue,4)===rt?(e=rt,ue+=4):(e=p,0===le&&Ae(tt)),e===p&&(h.substr(ue,8)===et?(e=et,ue+=8):(e=p,0===le&&Ae(nt)),e===p&&(h.substr(ue,5)===ut?(e=ut,ue+=5):(e=p,0===le&&Ae(ct)),e===p&&(h.substr(ue,6)===ot?(e=ot,ue+=6):(e=p,0===le&&Ae(at))))),e!==p?(93===h.charCodeAt(ue)?(n=it,ue++):(n=p,0===le&&Ae(lt)),n!==p?(ce=r,r=t=st(e)):(ue=r,r=p)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(t=p,0===le&&Ae(Wr)),r}function Ue(){var r;return le++,92===h.charCodeAt(ue)?(r=ht,ue++):(r=p,0===le&&Ae(pt)),le--,r===p&&(p,0===le&&Ae(ft)),r}function qe(){var r,t;return le++,r=ue,Ue()!==p?((t=Ue())===p&&(58===h.charCodeAt(ue)?(t=jr,ue++):(t=p,0===le&&Ae(Mr)),t===p&&(126===h.charCodeAt(ue)?(t=gt,ue++):(t=p,0===le&&Ae(At)),t===p&&(61===h.charCodeAt(ue)?(t=E,ue++):(t=p,0===le&&Ae(k)),t===p&&(35===h.charCodeAt(ue)?(t=hr,ue++):(t=p,0===le&&Ae(pr)),t===p&&(91===h.charCodeAt(ue)?(t=Xr,ue++):(t=p,0===le&&Ae(Zr)),t===p&&(93===h.charCodeAt(ue)?(t=it,ue++):(t=p,0===le&&Ae(lt)),t===p&&(123===h.charCodeAt(ue)?(t=g,ue++):(t=p,0===le&&Ae(A)),t===p&&(125===h.charCodeAt(ue)?(t=v,ue++):(t=p,0===le&&Ae(m)))))))))),t!==p?(ce=r,r=vt(t)):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(p,0===le&&Ae(dt)),r}function Ge(){var r,t,e;return le++,t=r=ue,le++,(e=qe())===p&&(e=Oe())===p&&(e=je()),le--,e===p?t=void 0:(ue=t,t=p),t!==p?(h.length>ue?(e=h.charAt(ue),ue++):(e=p,0===le&&Ae(bt)),e!==p?(ce=r,r=t=Ct()):(ue=r,r=p)):(ue=r,r=p),le--,r===p&&(t=p,0===le&&Ae(mt)),r}function Oe(){var r;return 61===h.charCodeAt(ue)?(r=E,ue++):(r=p,0===le&&Ae(k)),r===p&&(126===h.charCodeAt(ue)?(r=gt,ue++):(r=p,0===le&&Ae(At)),r===p&&(35===h.charCodeAt(ue)?(r=hr,ue++):(r=p,0===le&&Ae(pr)),r===p&&(123===h.charCodeAt(ue)?(r=g,ue++):(r=p,0===le&&Ae(A)),r===p&&(125===h.charCodeAt(ue)?(r=v,ue++):(r=p,0===le&&Ae(m)),r===p&&(92===h.charCodeAt(ue)?(r=ht,ue++):(r=p,0===le&&Ae(pt)),r===p&&(58===h.charCodeAt(ue)?(r=jr,ue++):(r=p,0===le&&Ae(Mr)))))))),r}function Pe(){var r,t,e,n;if(le++,r=ue,(t=Le())===p&&(t=null),t!==p)if(Ye()!==p){if(e=[],(n=Ne())!==p)for(;n!==p;)e.push(n),n=Ne();else e=p;e!==p?(ce=r,r=t=yt(t,e)):(ue=r,r=p)}else ue=r,r=p;else ue=r,r=p;return le--,r===p&&(t=p,0===le&&Ae(Ft)),r}function De(){var r,t,e;if(r=ue,t=[],or.test(h.charAt(ue))?(e=h.charAt(ue),ue++):(e=p,0===le&&Ae(ar)),e!==p)for(;e!==p;)t.push(e),or.test(h.charAt(ue))?(e=h.charAt(ue),ue++):(e=p,0===le&&Ae(ar));else t=p;return t!==p?((e=function(){var r,t,e,n,u;r=ue,46===h.charCodeAt(ue)?(t=$t,ue++):(t=p,0===le&&Ae(jt));if(t!==p)if(e=ue,le++,46===h.charCodeAt(ue)?(n=$t,ue++):(n=p,0===le&&Ae(jt)),le--,n===p?e=void 0:(ue=e,e=p),e!==p){for(n=[],or.test(h.charAt(ue))?(u=h.charAt(ue),ue++):(u=p,0===le&&Ae(ar));u!==p;)n.push(u),or.test(h.charAt(ue))?(u=h.charAt(ue),ue++):(u=p,0===le&&Ae(ar));n!==p?(ce=r,t=Mt(n),r=t):(ue=r,r=p)}else ue=r,r=p;else ue=r,r=p;return r}())===p&&(e=null),e!==p?(ce=r,r=t=Tt(t,e)):(ue=r,r=p)):(ue=r,r=p),r}function Qe(){var r,t,e;return r=ue,h.substr(ue,4)===Rt?(t=Rt,ue+=4):(t=p,0===le&&Ae(Nt)),t!==p&&Ye()!==p&&(e=Pe())!==p&&Ye()!==p?(ce=r,r=t=_t(e)):(ue=r,r=p),r}function Ye(){var r,t,e,n,u;for(le++,r=[],(t=Be())===p&&(t=ue,(e=Je())!==p?(n=ue,le++,u=Me(),le--,u===p?n=void 0:(ue=n,n=p),n!==p?t=e=[e,n]:(ue=t,t=p)):(ue=t,t=p));t!==p;)r.push(t),(t=Be())===p&&(t=ue,(e=Je())!==p?(n=ue,le++,u=Me(),le--,u===p?n=void 0:(ue=n,n=p),n!==p?t=e=[e,n]:(ue=t,t=p)):(ue=t,t=p));return le--,r===p&&(t=p,0===le&&Ae(Lt)),r}function He(){var r,t;for(le++,r=[],(t=ze())===p&&(t=Je())===p&&(t=Be());t!==p;)r.push(t),(t=ze())===p&&(t=Je())===p&&(t=Be());return le--,r===p&&(t=p,0===le&&Ae(Ut)),r}function Ie(){var r,t,e,n;for(t=r=ue,le++,e=[],32===h.charCodeAt(ue)?(n=qt,ue++):(n=p,0===le&&Ae(Gt));n!==p;)e.push(n),32===h.charCodeAt(ue)?(n=qt,ue++):(n=p,0===le&&Ae(Gt));return le--,e!==p?(ue=t,t=void 0):t=p,t!==p&&(ce=r,t=Ot()),r=t}function ze(){var r,t,e,n;if(le++,r=ue,h.substr(ue,2)===Dt?(t=Dt,ue+=2):(t=p,0===le&&Ae(Qt)),t!==p){for(e=[],Yt.test(h.charAt(ue))?(n=h.charAt(ue),ue++):(n=p,0===le&&Ae(Ht));n!==p;)e.push(n),Yt.test(h.charAt(ue))?(n=h.charAt(ue),ue++):(n=p,0===le&&Ae(Ht));e!==p?(ce=r,r=t=zt(e)):(ue=r,r=p)}else ue=r,r=p;return le--,r===p&&(t=p,0===le&&Ae(Pt)),r}function Be(){var r;return le++,32===h.charCodeAt(ue)?(r=qt,ue++):(r=p,0===le&&Ae(Gt)),r===p&&(9===h.charCodeAt(ue)?(r=Jt,ue++):(r=p,0===le&&Ae(Kt))),le--,r===p&&(p,0===le&&Ae(Bt)),r}function Je(){var r;return le++,h.substr(ue,2)===Wt?(r=Wt,ue+=2):(r=p,0===le&&Ae(Xt)),r===p&&(10===h.charCodeAt(ue)?(r=Zt,ue++):(r=p,0===le&&Ae(re)),r===p&&(13===h.charCodeAt(ue)?(r=te,ue++):(r=p,0===le&&Ae(ee)))),le--,r===p&&(p,0===le&&Ae(Vt)),r}function Ke(){var r,t,e;return t=r=ue,le++,h.length>ue?(e=h.charAt(ue),ue++):(e=p,0===le&&Ae(bt)),le--,e===p?t=void 0:(ue=t,t=p),t!==p&&(ce=r,t=ne()),r=t}var Ve=null,We=null,Xe="moodle",Ze=Xe;function rn(r){return(r=r.replace(/[\n\r]/g," ")).replace(/\s\s+/g," ")}function tn(){return Ze}function en(){Ze=Xe}if((t=n())!==p&&ue===h.length)return t;throw t!==p&&ue<h.length&&Ae({type:"end"}),ve(ie,ae<h.length?h.charAt(ae):null,ae<h.length?ge(ae,ae+1):ge(ae,ae))}peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(r,t){var e,c={literal:function(r){return'"'+u(r.text)+'"'},class:function(r){var t,e="";for(t=0;t<r.parts.length;t++)e+=r.parts[t]instanceof Array?o(r.parts[t][0])+"-"+o(r.parts[t][1]):o(r.parts[t]);return"["+(r.inverted?"^":"")+e+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function u(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}function o(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}return"Expected "+function(r){var t,e,n,u=new Array(r.length);for(t=0;t<r.length;t++)u[t]=(n=r[t],c[n.type](n));if(u.sort(),0<u.length){for(e=t=1;t<u.length;t++)u[t-1]!==u[t]&&(u[e]=u[t],e++);u.length=e}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(r)+" but "+((e=t)?'"'+u(e)+'"':"end of input")+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse};
